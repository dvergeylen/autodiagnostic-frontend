var app=function(){"use strict";function t(){}const e=t=>t;function i(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(i)}function s(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(e,...i){if(null==e)return t;const n=e.subscribe(...i);return n.unsubscribe?()=>n.unsubscribe():n}function l(t,e,i){t.$$.on_destroy.push(a(e,i))}function h(t,e,i=e){return t.set(i),e}const u="undefined"!=typeof window;let c=u?()=>window.performance.now():()=>Date.now(),d=u?t=>requestAnimationFrame(t):t;const p=new Set;function _(t){p.forEach((e=>{e.c(t)||(p.delete(e),e.f())})),0!==p.size&&d(_)}let m=!1;function f(t,e,i,n){for(;t<e;){const o=t+(e-t>>1);i(o)<=n?t=o+1:e=o}return t}function g(t,e){m?(!function(t){if(t.hydrate_init)return;t.hydrate_init=!0;const e=t.childNodes,i=new Int32Array(e.length+1),n=new Int32Array(e.length);i[0]=-1;let o=0;for(let t=0;t<e.length;t++){const s=f(1,o+1,(t=>e[i[t]].claim_order),e[t].claim_order)-1;n[t]=i[s]+1;const r=s+1;i[r]=t,o=Math.max(r,o)}const s=[],r=[];let a=e.length-1;for(let t=i[o]+1;0!=t;t=n[t-1]){for(s.push(e[t-1]);a>=t;a--)r.push(e[a]);a--}for(;a>=0;a--)r.push(e[a]);s.reverse(),r.sort(((t,e)=>t.claim_order-e.claim_order));for(let e=0,i=0;e<r.length;e++){for(;i<s.length&&r[e].claim_order>=s[i].claim_order;)i++;const n=i<s.length?s[i]:null;t.insertBefore(r[e],n)}}(t),(void 0===t.actual_end_child||null!==t.actual_end_child&&t.actual_end_child.parentElement!==t)&&(t.actual_end_child=t.firstChild),e!==t.actual_end_child?t.insertBefore(e,t.actual_end_child):t.actual_end_child=e.nextSibling):e.parentNode!==t&&t.appendChild(e)}function v(t,e,i){m&&!i?g(t,e):(e.parentNode!==t||i&&e.nextSibling!==i)&&t.insertBefore(e,i||null)}function y(t){t.parentNode.removeChild(t)}function x(t){return document.createElement(t)}function w(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function b(t){return document.createTextNode(t)}function P(){return b(" ")}function T(){return b("")}function M(t,e,i,n){return t.addEventListener(e,i,n),()=>t.removeEventListener(e,i,n)}function C(t,e,i){null==i?t.removeAttribute(e):t.getAttribute(e)!==i&&t.setAttribute(e,i)}function k(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function z(t,e,i,n){t.style.setProperty(e,i,n?"important":"")}function S(t,e){for(let i=0;i<t.options.length;i+=1){const n=t.options[i];if(n.__value===e)return void(n.selected=!0)}}function E(t,e,i){t.classList[i?"add":"remove"](e)}function B(t,e){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,!1,!1,e),i}const Z=new Set;let A,O=0;function I(t,e){const i=(t.style.animation||"").split(", "),n=i.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),o=i.length-n.length;o&&(t.style.animation=n.join(", "),O-=o,O||d((()=>{O||(Z.forEach((t=>{const e=t.__svelte_stylesheet;let i=e.cssRules.length;for(;i--;)e.deleteRule(i);t.__svelte_rules={}})),Z.clear())})))}function N(t){A=t}function R(){if(!A)throw new Error("Function called outside component initialization");return A}function $(t){R().$$.on_mount.push(t)}function j(t){R().$$.on_destroy.push(t)}function q(){const t=R();return(e,i)=>{const n=t.$$.callbacks[e];if(n){const o=B(e,i);n.slice().forEach((e=>{e.call(t,o)}))}}}function D(t,e){const i=t.$$.callbacks[e.type];i&&i.slice().forEach((t=>t.call(this,e)))}const H=[],W=[],F=[],U=[],V=Promise.resolve();let G=!1;function K(){G||(G=!0,V.then(Q))}function Y(t){F.push(t)}let J=!1;const X=new Set;function Q(){if(!J){J=!0;do{for(let t=0;t<H.length;t+=1){const e=H[t];N(e),tt(e.$$)}for(N(null),H.length=0;W.length;)W.pop()();for(let t=0;t<F.length;t+=1){const e=F[t];X.has(e)||(X.add(e),e())}F.length=0}while(H.length);for(;U.length;)U.pop()();G=!1,J=!1,X.clear()}}function tt(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Y)}}let et;function it(t,e,i){t.dispatchEvent(B(`${e?"intro":"outro"}${i}`))}const nt=new Set;let ot;function st(){ot={r:0,c:[],p:ot}}function rt(){ot.r||o(ot.c),ot=ot.p}function at(t,e){t&&t.i&&(nt.delete(t),t.i(e))}function lt(t,e,i,n){if(t&&t.o){if(nt.has(t))return;nt.add(t),ot.c.push((()=>{nt.delete(t),n&&(i&&t.d(1),n())})),t.o(e)}}const ht={duration:0};function ut(i,n,o){let r,a,l=n(i,o),h=!1,u=0;function m(){r&&I(i,r)}function f(){const{delay:n=0,duration:o=300,easing:s=e,tick:f=t,css:g}=l||ht;g&&(r=function(t,e,i,n,o,s,r,a=0){const l=16.666/n;let h="{\n";for(let t=0;t<=1;t+=l){const n=e+(i-e)*s(t);h+=100*t+`%{${r(n,1-n)}}\n`}const u=h+`100% {${r(i,1-i)}}\n}`,c=`__svelte_${function(t){let e=5381,i=t.length;for(;i--;)e=(e<<5)-e^t.charCodeAt(i);return e>>>0}(u)}_${a}`,d=t.ownerDocument;Z.add(d);const p=d.__svelte_stylesheet||(d.__svelte_stylesheet=d.head.appendChild(x("style")).sheet),_=d.__svelte_rules||(d.__svelte_rules={});_[c]||(_[c]=!0,p.insertRule(`@keyframes ${c} ${u}`,p.cssRules.length));const m=t.style.animation||"";return t.style.animation=`${m?`${m}, `:""}${c} ${n}ms linear ${o}ms 1 both`,O+=1,c}(i,0,1,o,n,s,g,u++)),f(0,1);const v=c()+n,y=v+o;a&&a.abort(),h=!0,Y((()=>it(i,!0,"start"))),a=function(t){let e;return 0===p.size&&d(_),{promise:new Promise((i=>{p.add(e={c:t,f:i})})),abort(){p.delete(e)}}}((t=>{if(h){if(t>=y)return f(1,0),it(i,!0,"end"),m(),h=!1;if(t>=v){const e=s((t-v)/o);f(e,1-e)}}return h}))}let g=!1;return{start(){g||(I(i),s(l)?(l=l(),(et||(et=Promise.resolve(),et.then((()=>{et=null}))),et).then(f)):f())},invalidate(){g=!1},end(){h&&(m(),h=!1)}}}function ct(t,e){t.d(1),e.delete(t.key)}function dt(t,e,i,n,o,s,r,a,l,h,u,c){let d=t.length,p=s.length,_=d;const m={};for(;_--;)m[t[_].key]=_;const f=[],g=new Map,v=new Map;for(_=p;_--;){const t=c(o,s,_),a=i(t);let l=r.get(a);l?n&&l.p(t,e):(l=h(a,t),l.c()),g.set(a,f[_]=l),a in m&&v.set(a,Math.abs(_-m[a]))}const y=new Set,x=new Set;function w(t){at(t,1),t.m(a,u),r.set(t.key,t),u=t.first,p--}for(;d&&p;){const e=f[p-1],i=t[d-1],n=e.key,o=i.key;e===i?(u=e.first,d--,p--):g.has(o)?!r.has(n)||y.has(n)?w(e):x.has(o)?d--:v.get(n)>v.get(o)?(x.add(n),w(e)):(y.add(o),d--):(l(i,r),d--)}for(;d--;){const e=t[d];g.has(e.key)||l(e,r)}for(;p;)w(f[p-1]);return f}function pt(t){t&&t.c()}function _t(t,e,n,r){const{fragment:a,on_mount:l,on_destroy:h,after_update:u}=t.$$;a&&a.m(e,n),r||Y((()=>{const e=l.map(i).filter(s);h?h.push(...e):o(e),t.$$.on_mount=[]})),u.forEach(Y)}function mt(t,e){const i=t.$$;null!==i.fragment&&(o(i.on_destroy),i.fragment&&i.fragment.d(e),i.on_destroy=i.fragment=null,i.ctx=[])}function ft(e,i,s,r,a,l,h=[-1]){const u=A;N(e);const c=e.$$={fragment:null,ctx:null,props:l,update:t,not_equal:a,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:i.context||[]),callbacks:n(),dirty:h,skip_bound:!1};let d=!1;if(c.ctx=s?s(e,i.props||{},((t,i,...n)=>{const o=n.length?n[0]:i;return c.ctx&&a(c.ctx[t],c.ctx[t]=o)&&(!c.skip_bound&&c.bound[t]&&c.bound[t](o),d&&function(t,e){-1===t.$$.dirty[0]&&(H.push(t),K(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(e,t)),i})):[],c.update(),d=!0,o(c.before_update),c.fragment=!!r&&r(c.ctx),i.target){if(i.hydrate){m=!0;const t=function(t){return Array.from(t.childNodes)}(i.target);c.fragment&&c.fragment.l(t),t.forEach(y)}else c.fragment&&c.fragment.c();i.intro&&at(e.$$.fragment),_t(e,i.target,i.anchor,i.customElement),m=!1,Q()}N(u)}class gt{$destroy(){mt(this,1),this.$destroy=t}$on(t,e){const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(e),()=>{const t=i.indexOf(e);-1!==t&&i.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const vt=[];function yt(t,e){return{subscribe:xt(t,e).subscribe}}function xt(e,i=t){let n;const o=[];function s(t){if(r(e,t)&&(e=t,n)){const t=!vt.length;for(let t=0;t<o.length;t+=1){const i=o[t];i[1](),vt.push(i,e)}if(t){for(let t=0;t<vt.length;t+=2)vt[t][0](vt[t+1]);vt.length=0}}}return{set:s,update:function(t){s(t(e))},subscribe:function(r,a=t){const l=[r,a];return o.push(l),1===o.length&&(n=i(s)||t),r(e),()=>{const t=o.indexOf(l);-1!==t&&o.splice(t,1),0===o.length&&(n(),n=null)}}}}function wt(e,i,n){const r=!Array.isArray(e),l=r?[e]:e,h=i.length<2;return yt(n,(e=>{let n=!1;const u=[];let c=0,d=t;const p=()=>{if(c)return;d();const n=i(r?u[0]:u,e);h?e(n):d=s(n)?n:t},_=l.map(((t,e)=>a(t,(t=>{u[e]=t,c&=~(1<<e),n&&p()}),(()=>{c|=1<<e}))));return n=!0,p(),function(){o(_),d()}}))}const bt=xt({gender:"",language:"fr",attribution:{leader:0,bricoleur:0,coequipier:0,planificateur:0,idealiste:0,creatif:0,audacieux:0,explorateur:0},nodes:{}}),Pt=wt(bt,(t=>Object.keys(t.nodes).reduce(((t,e)=>Number(e)>Number(t)?e:t),"0"))),Lt=wt(bt,(t=>Object.entries(t.attribution).sort((([t,e],[i,n])=>n-e))));var Tt;!function(t){t[t.UNSTARTED=0]="UNSTARTED",t[t.INTRO=1]="INTRO",t[t.ONGOING=2]="ONGOING",t[t.PAUSED=3]="PAUSED",t[t.FINISHED=4]="FINISHED",t[t.ERROR=5]="ERROR"}(Tt||(Tt={}));const Mt=xt(Tt.UNSTARTED),Ct=xt(!1),kt=xt(!0),zt=xt(!0);function St(e){let i;return{c(){i=x("footer"),i.innerHTML='<div id="footer-container" class="svelte-1wov5q4"><div class="svelte-1wov5q4"><p id="moto" class="is-uppercase svelte-1wov5q4">&#39;Voyage au bout du monde&#39; est un outil développé le groupe <a href="https://www.sowalfin.be">Sowalfin</a>.</p></div> \n    <div class="svelte-1wov5q4"><img id="sowalfin-creation" src="/assets/images/logo_sowalfin_creation.svg" alt="Sowalfin Création" class="svelte-1wov5q4"/></div></div>',C(i,"class","svelte-1wov5q4")},m(t,e){v(t,i,e)},p:t,i:t,o:t,d(t){t&&y(i)}}}class Et extends gt{constructor(t){super(),ft(this,t,null,St,r,{})}}function Bt(e){let i,n,o,s;return{c(){i=w("svg"),n=w("use"),C(n,"href","assets/sprite_icons.svg#music-slash"),C(i,"class","icon music svelte-ye4yx3")},m(t,r){v(t,i,r),g(i,n),o||(s=M(i,"click",e[4]),o=!0)},p:t,d(t){t&&y(i),o=!1,s()}}}function Zt(e){let i,n,o,s;return{c(){i=w("svg"),n=w("use"),C(n,"href","assets/sprite_icons.svg#music"),C(i,"class","icon music svelte-ye4yx3")},m(t,r){v(t,i,r),g(i,n),o||(s=M(i,"click",e[4]),o=!0)},p:t,d(t){t&&y(i),o=!1,s()}}}function At(t){let e,i,n;return{c(){e=x("button"),e.textContent="Continuer",C(e,"class","is-uppercase svelte-ye4yx3"),E(e,"pressed",!t[0])},m(o,s){v(o,e,s),i||(n=M(e,"click",t[6]),i=!0)},p(t,i){1&i&&E(e,"pressed",!t[0])},d(t){t&&y(e),i=!1,n()}}}function Ot(t){let e,i,n,s,r,a,l,h,u,c,d,p,_,m,f,w,b,L,T,k,z,S,B,Z,A,O,I,N,R,$,j,q,D,H,W,F,U,V,G,K;function Y(t,e){return t[3]?Zt:Bt}let J=Y(t),X=J(t),Q=!t[1]&&t[2]&&At(t);return U=new Et({}),{c(){e=x("main"),i=x("div"),i.innerHTML='<h1 class="svelte-ye4yx3">VOYAGE AU BOUT DU MONDE</h1>',n=P(),s=x("h3"),s.textContent="UNE AVENTURE D'INTROSPECTION",r=P(),a=x("div"),a.innerHTML="<p>🚧 Version en Développement</p>",l=P(),h=x("div"),u=x("div"),c=x("h4"),c.textContent="Bienvenue !",d=P(),p=x("div"),X.c(),_=P(),m=x("p"),m.innerHTML="Tu as décidé de tester ton niveau actuel de compétences…<br/>Et ça démarre maintenant.",f=P(),w=x("p"),w.innerHTML="Tu vas assister aux échanges de SMS entre Arya et Jon.<br/>\n      Ces deux-là sont les meilleurs amis du monde …<br/>\n      Mais la vie les sépare pour 1 an. 12 longs mois !<br/>\n      Le temps d&#39;un séjour au Japon pour l&#39;un.<br/>\n      Pendant que l&#39;autre reste en Belgique.<br/>\n      Mais, ils restent connectés.<br/>\n      Ils se soutiennent dans des péripéties que tu vas découvrir au fil de leurs échanges de textos.",b=P(),L=x("p"),L.innerHTML="Pour pouvoir établir ton profil actuel de compétences, tu vas jouer un personnage.<br/>\n      Tu dois répondre à sa place lorsque des choix multiples te sont proposés.<br/>\n      Tu dois veiller à choisir la réponse qui te correspond le plus.<br/>\n      Bref, que ferais-tu/que dirais-tu dans la même situation ?<br/>\n      Tes choix doivent refléter qui tu es, comment tu fonctionnes en général.<br/>",T=P(),k=x("p"),k.innerHTML="Joue spontanément et honnêtement...<br/>\n      Et tu découvriras ton profil dès la partie finie 😉<br/>\n      (Environ dans 20 minutes)",z=P(),S=x("p"),S.textContent="C'est parti !",B=P(),Z=x("div"),A=x("div"),Q&&Q.c(),O=P(),I=x("button"),I.textContent="Nouvelle Partie",N=P(),R=x("div"),$=x("p"),$.textContent="Protagoniste :",j=P(),q=x("div"),D=x("div"),D.innerHTML='<div class="is-button is-uppercase svelte-ye4yx3">Féminin</div>',H=P(),W=x("div"),W.innerHTML='<div class="is-button is-uppercase svelte-ye4yx3">Masculin</div>',F=P(),pt(U.$$.fragment),C(i,"class","h1-wrapper svelte-ye4yx3"),C(s,"class","svelte-ye4yx3"),C(a,"id","warning-dev"),C(a,"class","svelte-ye4yx3"),C(c,"class","is-bold svelte-ye4yx3"),C(p,"id","music-settings-wrapper"),C(p,"class","svelte-ye4yx3"),C(u,"class","is-flex svelte-ye4yx3"),C(m,"class","is-bold"),C(I,"class","is-uppercase svelte-ye4yx3"),E(I,"pressed",t[0]),C(A,"id","buttons-settings"),C(A,"class","is-grid svelte-ye4yx3"),C($,"class","is-uppercase svelte-ye4yx3"),C(D,"class","svelte-ye4yx3"),C(W,"class","svelte-ye4yx3"),C(q,"class","is-flex svelte-ye4yx3"),C(R,"class","buttons-protagoniste svelte-ye4yx3"),E(R,"is-hidden",!t[0]),C(Z,"id","buttons-wrapper"),C(Z,"class","svelte-ye4yx3"),C(h,"id","intro-text"),C(h,"class","svelte-ye4yx3")},m(o,y){v(o,e,y),g(e,i),g(e,n),g(e,s),g(e,r),g(e,a),g(e,l),g(e,h),g(h,u),g(u,c),g(u,d),g(u,p),X.m(p,null),g(h,_),g(h,m),g(h,f),g(h,w),g(h,b),g(h,L),g(h,T),g(h,k),g(h,z),g(h,S),g(h,B),g(h,Z),g(Z,A),Q&&Q.m(A,null),g(A,O),g(A,I),g(Z,N),g(Z,R),g(R,$),g(R,j),g(R,q),g(q,D),g(q,H),g(q,W),v(o,F,y),_t(U,o,y),V=!0,G||(K=[M(I,"click",t[5]),M(D,"click",t[10]),M(W,"click",t[11])],G=!0)},p(t,[e]){J===(J=Y(t))&&X?X.p(t,e):(X.d(1),X=J(t),X&&(X.c(),X.m(p,null))),!t[1]&&t[2]?Q?Q.p(t,e):(Q=At(t),Q.c(),Q.m(A,O)):Q&&(Q.d(1),Q=null),1&e&&E(I,"pressed",t[0]),1&e&&E(R,"is-hidden",!t[0])},i(t){V||(at(U.$$.fragment,t),V=!0)},o(t){lt(U.$$.fragment,t),V=!1},d(t){t&&y(e),X.d(),Q&&Q.d(),t&&y(F),mt(U,t),G=!1,o(K)}}}function It(t,e,i){let n,o,s;var r;l(t,kt,(t=>i(3,n=t))),l(t,Mt,(t=>i(12,o=t))),l(t,bt,(t=>i(9,s=t)));let a,u=!1,c=!1;function d(){h(Mt,o=Tt.INTRO,o)}function p(t){h(bt,s.gender=t,s),h(bt,s.nodes={},s),d()}return t.$$.update=()=>{512&t.$$.dirty&&i(1,c=0===Object.entries(s.nodes).length),768&t.$$.dirty&&i(2,a=((null===i(8,r=null==s?void 0:s.gender)||void 0===r?void 0:r.length)||0)>0)},[u,c,a,n,function(){kt.set(!n)},function(){i(0,u=!u),u&&window.scrollTo(0,document.body.scrollHeight)},d,p,r,s,()=>p("F"),()=>p("M")]}class Nt extends gt{constructor(t){super(),ft(this,t,It,Ot,r,{})}}function Rt(t){let e,i,n,o;return{c(){e=x("img"),n=P(),o=x("p"),o.textContent="Jon",e.src!==(i="/assets/images/avatar_jon.jpeg")&&C(e,"src","/assets/images/avatar_jon.jpeg"),C(e,"alt","Jon"),C(e,"class","svelte-ju3yvb")},m(t,i){v(t,e,i),v(t,n,i),v(t,o,i)},d(t){t&&y(e),t&&y(n),t&&y(o)}}}function $t(t){let e,i,n,o;return{c(){e=x("img"),n=P(),o=x("p"),o.textContent="Arya",e.src!==(i="/assets/images/avatar_ayra.jpeg")&&C(e,"src","/assets/images/avatar_ayra.jpeg"),C(e,"alt","Arya"),C(e,"class","svelte-ju3yvb")},m(t,i){v(t,e,i),v(t,n,i),v(t,o,i)},d(t){t&&y(e),t&&y(n),t&&y(o)}}}function jt(e){let i,n,o,s;return{c(){i=w("svg"),n=w("use"),C(n,"href","assets/sprite_icons.svg#volume-slash"),C(i,"class","icon map svelte-ju3yvb")},m(t,r){v(t,i,r),g(i,n),o||(s=M(i,"click",e[4]),o=!0)},p:t,d(t){t&&y(i),o=!1,s()}}}function qt(e){let i,n,o,s;return{c(){i=w("svg"),n=w("use"),C(n,"href","assets/sprite_icons.svg#volume"),C(i,"class","icon map svelte-ju3yvb")},m(t,r){v(t,i,r),g(i,n),o||(s=M(i,"click",e[4]),o=!0)},p:t,d(t){t&&y(i),o=!1,s()}}}function Dt(e){let i,n,s,r,a,l,h,u,c,d,p,_;function m(t,e){return"M"===t[1].gender?$t:Rt}let f=m(e),b=f(e);function L(t,e){return t[0]?qt:jt}let T=L(e),k=T(e);return{c(){i=x("div"),n=x("div"),b.c(),s=P(),r=x("div"),k.c(),a=P(),l=w("svg"),h=w("use"),u=P(),c=w("svg"),d=w("use"),C(n,"id","npc-avatar"),C(n,"class","svelte-ju3yvb"),C(h,"href","assets/sprite_icons.svg#map-marked-alt"),C(l,"class","icon map svelte-ju3yvb"),C(d,"href","assets/sprite_icons.svg#home"),C(c,"class","icon home svelte-ju3yvb"),C(r,"id","settings"),C(r,"class","svelte-ju3yvb"),C(i,"class","header svelte-ju3yvb")},m(t,o){v(t,i,o),g(i,n),b.m(n,null),g(i,s),g(i,r),k.m(r,null),g(r,a),g(r,l),g(l,h),g(r,u),g(r,c),g(c,d),p||(_=[M(l,"click",e[3]),M(c,"click",e[2])],p=!0)},p(t,[e]){f!==(f=m(t))&&(b.d(1),b=f(t),b&&(b.c(),b.m(n,null))),T===(T=L(t))&&k?k.p(t,e):(k.d(1),k=T(t),k&&(k.c(),k.m(r,a)))},i:t,o:t,d(t){t&&y(i),b.d(),k.d(),p=!1,o(_)}}}function Ht(t,e,i){let n,o,s;return l(t,Ct,(t=>i(5,n=t))),l(t,zt,(t=>i(0,o=t))),l(t,bt,(t=>i(1,s=t))),[o,s,function(){Mt.set(Tt.PAUSED)},function(){Ct.set(!n)},function(){zt.set(!o)}]}class Wt extends gt{constructor(t){super(),ft(this,t,Ht,Dt,r,{})}}function Ft(t,{delay:i=0,duration:n=400,easing:o=e}={}){const s=+getComputedStyle(t).opacity;return{delay:i,duration:n,easing:o,css:t=>"opacity: "+t*s}}const Ut=yt({},(function(t){const e=Array.from(Array(11).keys()).map((async t=>{const e=await fetch(`chapters/chapitre${String(t).padStart(2,"0")}.json`);if(e.ok){const t=await e.text();return JSON.parse(t)}throw new Error(`Impossible de lire le scénario n°${String(t).padStart(2,"0")}`)}));return Promise.all(e).then((e=>{const i=e.reduce(((t,e)=>Object.assign(Object.assign({},t),{[e.metadata.chapter]:e})),{});t(i)})).catch((e=>{t({error:e.message})})),function(){}}));function Vt(t,e,i){const n=t.slice();return n[28]=e[i],n}function Gt(t,e,i){const n=t.slice();return n[31]=e[i],n}function Kt(e){let i;return{c(){i=x("p"),i.textContent="Chargement...",C(i,"class","svelte-13nc1e3")},m(t,e){v(t,i,e)},p:t,d(t){t&&y(i)}}}function Yt(t){let e,i,n,o,s,r,a,l,h,u=[],c=new Map,d=[],p=new Map,_=t[3];const m=t=>t[31];for(let e=0;e<_.length;e+=1){let i=Gt(t,_,e),n=m(i);c.set(n,u[e]=ee(n,i))}let f=t[7];const w=t=>t[28];for(let e=0;e<f.length;e+=1){let i=Vt(t,f,e),n=w(i);p.set(n,d[e]=re(n,i))}let b=t[4]&&ae(t),L=t[5]&&le(t);return{c(){e=x("div");for(let t=0;t<u.length;t+=1)u[t].c();i=P(),n=x("div"),n.innerHTML='<p class="svelte-13nc1e3">...</p>',o=P(),s=x("div"),r=x("div");for(let t=0;t<d.length;t+=1)d[t].c();a=P(),b&&b.c(),l=P(),L&&L.c(),h=T(),C(n,"id","typing-container"),C(n,"class","svelte-13nc1e3"),E(n,"is-hidden",!t[8]),E(n,"npc1",t[9]),E(n,"player",t[10]),C(e,"id","dialog-container"),C(e,"class","svelte-13nc1e3"),C(r,"class","player svelte-13nc1e3"),E(r,"is-grid-2x2",t[7].reduce(t[17],!1)),C(s,"id","answer-container"),C(s,"class","svelte-13nc1e3")},m(t,c){v(t,e,c);for(let t=0;t<u.length;t+=1)u[t].m(e,null);g(e,i),g(e,n),v(t,o,c),v(t,s,c),g(s,r);for(let t=0;t<d.length;t+=1)d[t].m(r,null);v(t,a,c),b&&b.m(t,c),v(t,l,c),L&&L.m(t,c),v(t,h,c)},p(t,o){15&o[0]&&(_=t[3],u=dt(u,o,m,1,t,_,c,e,ct,ee,i,Gt)),256&o[0]&&E(n,"is-hidden",!t[8]),512&o[0]&&E(n,"npc1",t[9]),1024&o[0]&&E(n,"player",t[10]),16519&o[0]&&(f=t[7],d=dt(d,o,w,1,t,f,p,r,ct,re,null,Vt)),133&o[0]&&E(r,"is-grid-2x2",t[7].reduce(t[17],!1)),t[4]?b?b.p(t,o):(b=ae(t),b.c(),b.m(l.parentNode,l)):b&&(b.d(1),b=null),t[5]?L?L.p(t,o):(L=le(t),L.c(),L.m(h.parentNode,h)):L&&(L.d(1),L=null)},d(t){t&&y(e);for(let t=0;t<u.length;t+=1)u[t].d();t&&y(o),t&&y(s);for(let t=0;t<d.length;t+=1)d[t].d();t&&y(a),b&&b.d(t),t&&y(l),L&&L.d(t),t&&y(h)}}}function Jt(t){let e;function i(t,e){return t[0][t[2]].dialogNodes[t[31]].text[t[1].language]instanceof Object?te:Qt}let n=i(t),o=n(t);return{c(){e=x("p"),o.c(),C(e,"class","svelte-13nc1e3")},m(t,i){v(t,e,i),o.m(e,null)},p(t,s){n===(n=i(t))&&o?o.p(t,s):(o.d(1),o=n(t),o&&(o.c(),o.m(e,null)))},d(t){t&&y(e),o.d()}}}function Xt(t){let e,i,n,o,s;return{c(){e=x("img"),e.src!==(i=t[0][t[2]].dialogNodes[t[31]].imagePath)&&C(e,"src",i),C(e,"alt",n=t[0][t[2]].dialogNodes[t[31]].imageAlt),C(e,"class","svelte-13nc1e3")},m(t,i){v(t,e,i),o||(s=M(e,"load",ue),o=!0)},p(t,o){13&o[0]&&e.src!==(i=t[0][t[2]].dialogNodes[t[31]].imagePath)&&C(e,"src",i),13&o[0]&&n!==(n=t[0][t[2]].dialogNodes[t[31]].imageAlt)&&C(e,"alt",n)},d(t){t&&y(e),o=!1,s()}}}function Qt(t){let e,i=t[0][t[2]].dialogNodes[t[31]].text[t[1].language]+"";return{c(){e=b(i)},m(t,i){v(t,e,i)},p(t,n){15&n[0]&&i!==(i=t[0][t[2]].dialogNodes[t[31]].text[t[1].language]+"")&&k(e,i)},d(t){t&&y(e)}}}function te(t){let e,i=t[0][t[2]].dialogNodes[t[31]].text[t[1].language][t[1].gender.toLowerCase()]+"";return{c(){e=b(i)},m(t,i){v(t,e,i)},p(t,n){15&n[0]&&i!==(i=t[0][t[2]].dialogNodes[t[31]].text[t[1].language][t[1].gender.toLowerCase()]+"")&&k(e,i)},d(t){t&&y(e)}}}function ee(t,e){let i;function n(t,e){return t[0][t[2]].dialogNodes[t[31]].imagePath?Xt:Jt}let o=n(e),s=o(e);return{key:t,first:null,c(){i=x("div"),s.c(),C(i,"class","svelte-13nc1e3"),E(i,"npc1","NPC1"===e[0][e[2]].dialogNodes[e[31]].character),E(i,"player","Player"===e[0][e[2]].dialogNodes[e[31]].character),E(i,"narrator","Narrator"===e[0][e[2]].dialogNodes[e[31]].character),this.first=i},m(t,e){v(t,i,e),s.m(i,null)},p(t,r){o===(o=n(e=t))&&s?s.p(e,r):(s.d(1),s=o(e),s&&(s.c(),s.m(i,null))),13&r[0]&&E(i,"npc1","NPC1"===e[0][e[2]].dialogNodes[e[31]].character),13&r[0]&&E(i,"player","Player"===e[0][e[2]].dialogNodes[e[31]].character),13&r[0]&&E(i,"narrator","Narrator"===e[0][e[2]].dialogNodes[e[31]].character)},d(t){t&&y(i),s.d()}}}function ie(t){let e,i,n,o;function s(t,e){return t[0][t[2]].dialogNodes[t[28]].text[t[1].language]instanceof Object?se:oe}let r=s(t),a=r(t);function l(){return t[16](t[28])}return{c(){e=x("p"),a.c(),i=P(),C(e,"class","choice svelte-13nc1e3")},m(t,s){v(t,e,s),a.m(e,null),g(e,i),n||(o=M(e,"click",l),n=!0)},p(n,o){r===(r=s(t=n))&&a?a.p(t,o):(a.d(1),a=r(t),a&&(a.c(),a.m(e,i)))},d(t){t&&y(e),a.d(),n=!1,o()}}}function ne(t){let e,i,n,s,r;function a(){return t[15](t[28])}return{c(){e=x("img"),e.src!==(i=t[0][t[2]].dialogNodes[t[28]].imagePath)&&C(e,"src",i),C(e,"alt",n=t[0][t[2]].dialogNodes[t[28]].imageAlt),C(e,"class","svelte-13nc1e3")},m(t,i){v(t,e,i),s||(r=[M(e,"click",a),M(e,"load",ue)],s=!0)},p(o,s){t=o,133&s[0]&&e.src!==(i=t[0][t[2]].dialogNodes[t[28]].imagePath)&&C(e,"src",i),133&s[0]&&n!==(n=t[0][t[2]].dialogNodes[t[28]].imageAlt)&&C(e,"alt",n)},d(t){t&&y(e),s=!1,o(r)}}}function oe(t){let e,i=t[0][t[2]].dialogNodes[t[28]].text[t[1].language]+"";return{c(){e=b(i)},m(t,i){v(t,e,i)},p(t,n){135&n[0]&&i!==(i=t[0][t[2]].dialogNodes[t[28]].text[t[1].language]+"")&&k(e,i)},d(t){t&&y(e)}}}function se(t){let e,i=t[0][t[2]].dialogNodes[t[28]].text[t[1].language][t[1].gender.toLowerCase()]+"";return{c(){e=b(i)},m(t,i){v(t,e,i)},p(t,n){135&n[0]&&i!==(i=t[0][t[2]].dialogNodes[t[28]].text[t[1].language][t[1].gender.toLowerCase()]+"")&&k(e,i)},d(t){t&&y(e)}}}function re(t,e){let i,n;function o(t,e){return t[0][t[2]].dialogNodes[t[28]].imagePath?ne:ie}let s=o(e),r=s(e);return{key:t,first:null,c(){i=T(),r.c(),n=T(),this.first=i},m(t,e){v(t,i,e),r.m(t,e),v(t,n,e)},p(t,i){s===(s=o(e=t))&&r?r.p(e,i):(r.d(1),r=s(e),r&&(r.c(),r.m(n.parentNode,n)))},d(t){t&&y(i),r.d(t),t&&y(n)}}}function ae(t){let e,i,n,o,s,r,a;return{c(){e=x("div"),i=x("p"),n=b("Continuer (Chapitre "),o=b(t[6]),s=b(") →"),C(i,"class","svelte-13nc1e3"),C(e,"id","next-chapter-container"),C(e,"class","svelte-13nc1e3")},m(l,h){v(l,e,h),g(e,i),g(i,n),g(i,o),g(i,s),r||(a=M(e,"click",t[13]),r=!0)},p(t,e){64&e[0]&&k(o,t[6])},d(t){t&&y(e),r=!1,a()}}}function le(e){let i,n,o;return{c(){i=x("div"),i.innerHTML='<p class="svelte-13nc1e3">Fin de l&#39;Aventure (Résultats) →</p>',C(i,"id","next-chapter-container"),C(i,"class","svelte-13nc1e3")},m(t,s){v(t,i,s),n||(o=M(i,"click",e[11]),n=!0)},p:t,d(t){t&&y(i),n=!1,o()}}}function he(e){let i,n,o,s;function r(t,e){return t[0][t[2]]?Yt:Kt}let a=r(e),l=a(e);return{c(){i=x("div"),l.c(),C(i,"id","dialog-container-background"),C(i,"class","svelte-13nc1e3")},m(t,n){v(t,i,n),l.m(i,null),o||(s=M(i,"click",e[12]),o=!0)},p(t,e){a===(a=r(t))&&l?l.p(t,e):(l.d(1),l=a(t),l&&(l.c(),l.m(i,null)))},i(t){n||Y((()=>{n=ut(i,Ft,{}),n.start()}))},o:t,d(t){t&&y(i),l.d(),o=!1,s()}}}function ue(){window.scrollTo(0,document.body.scrollHeight)}function ce(t,e,i){let n,o,s;l(t,Ut,(t=>i(0,n=t))),l(t,bt,(t=>i(1,o=t))),l(t,Pt,(t=>i(2,s=t)));var r=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))((function(o,s){function r(t){try{l(n.next(t))}catch(t){s(t)}}function a(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}l((n=n.apply(t,e||[])).next())}))};const a=q();let u,c,d,p=!1,_=!1,m=[],f=!1,g=!1,v=!1,y=!1,x=!1;function w(t,e=!1,r=!1){var l;const u=e?["1"]:n[s].dialogNodes[t].nextNodes,y=Object.entries(n[s].dialogNodes).filter((([t,e])=>u.includes(e.id))).map((([t,e])=>e));n[s].dialogNodes[t||"1"].character;const x=y.reduce(((t,e)=>"Player"===t||"Player"===e.character?"Player":t),(null===(l=y[0])||void 0===l?void 0:l.character)||"NPC1");if(i(9,g="NPC1"===x),i(10,v="Player"===x),0===y.length){const t=Object.keys(n).reduce(((t,e)=>Number(e)>t?Number(e):t),1);i(6,c=Number(s)+1),t>=c?i(4,p=!0):i(5,_=!0)}else if("Player"===x&&y.length>1){const t=1e3;d=setTimeout((()=>{!function(t){i(7,m=t)}(u)}),r?0:t)}else if("Narrator"===x)h(bt,o.nodes[s]=[...o.nodes[s]||[],u[0]],o),w(u[0]);else{const t=Math.floor(251*Math.random()+500);d=setTimeout((()=>{i(8,f=!0);const t=Math.floor(501*Math.random()+1e3);d=setTimeout((()=>{i(8,f=!1),h(bt,o.nodes[s]=[...o.nodes[s]||[],u[0]],o),a("playSound",{}),w(u[0])}),r?0:t)}),r?0:t)}}function b(t){if(Ct.set(!1),i(7,m=[]),x=!0,h(bt,o.nodes[s]=[...o.nodes[s]||[],t],o),a("playSound",{}),"Player"===n[s].dialogNodes[t].character){h(bt,o.attribution=Object.entries(o.attribution).reduce(((e,[i,o])=>Object.assign(Object.assign({},e),{[i]:o+n[s].dialogNodes[t].attribution[i]})),{leader:0,bricoleur:0,coequipier:0,planificateur:0,idealiste:0,creatif:0,audacieux:0,explorateur:0}),o);const e=Object.entries(n[s].dialogNodes[t].attribution).filter((([t,e])=>0!==e));e.length>0&&async function(t,e,i,n,o){const s=new FormData;s.append("timestamp[part]",t),s.append("timestamp[chapter]",e),s.append("timestamp[node_id]",i),s.append("timestamp[attribution_key]",n),s.append("timestamp[attribution_value]",String(o));const r=await fetch("http://localhost:3000/timestamps",{method:"POST",headers:{Accept:"application/json"},body:s});r.ok||console.error(`ERROR ${r.status}: ${r.statusText})`)}("1",s,t,e[0][0],e[0][1])}w(t)}function P(t=!1){if(Object.keys(n).length>0){const e=u[u.length-1];w(e,void 0===e,t)}else setTimeout(P,10)}var L;$((()=>{P()})),j((()=>{clearTimeout(d),T()})),L=()=>{window.scrollTo(0,document.body.scrollHeight)},R().$$.after_update.push(L);const T=Ct.subscribe((t=>{t&&!y?clearTimeout(d):0==t&&!0===y&&P(),y=t}));return t.$$.update=()=>{1&t.$$.dirty[0]&&Object.keys(n).includes("error")&&Mt.set(Tt.ERROR),6&t.$$.dirty[0]&&i(3,u=o.nodes[s]||[])},[n,o,s,u,p,_,c,m,f,g,v,function(){Mt.set(Tt.FINISHED)},function(){x?x=!1:(clearTimeout(d),P(!0))},function(){return r(this,void 0,void 0,(function*(){h(bt,o.nodes[String(c)]=[],o),i(4,p=!1),yield(K(),V),Mt.set(Tt.INTRO)}))},b,t=>b(t),t=>b(t),(t,e)=>t||n[s].dialogNodes[e].imagePath]}class de extends gt{constructor(t){super(),ft(this,t,ce,he,r,{},[-1,-1])}}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;
/* @preserve
     * Leaflet 1.7.1, a JS library for interactive maps. http://leafletjs.com
     * (c) 2010-2019 Vladimir Agafonkin, (c) 2010-2011 CloudMade
     */
var pe,_e=(function(t,e){!function(t){var e="1.7.1";function i(t){var e,i,n,o;for(i=1,n=arguments.length;i<n;i++)for(e in o=arguments[i])t[e]=o[e];return t}var n=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function o(t,e){var i=Array.prototype.slice;if(t.bind)return t.bind.apply(t,i.call(arguments,1));var n=i.call(arguments,2);return function(){return t.apply(e,n.length?n.concat(i.call(arguments)):arguments)}}var s=0;function r(t){return t._leaflet_id=t._leaflet_id||++s,t._leaflet_id}function a(t,e,i){var n,o,s,r;return r=function(){n=!1,o&&(s.apply(i,o),o=!1)},s=function(){n?o=arguments:(t.apply(i,arguments),setTimeout(r,e),n=!0)}}function l(t,e,i){var n=e[1],o=e[0],s=n-o;return t===n&&i?t:((t-o)%s+s)%s+o}function h(){return!1}function u(t,e){var i=Math.pow(10,void 0===e?6:e);return Math.round(t*i)/i}function c(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function d(t){return c(t).split(/\s+/)}function p(t,e){for(var i in Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?n(t.options):{}),e)t.options[i]=e[i];return t.options}function _(t,e,i){var n=[];for(var o in t)n.push(encodeURIComponent(i?o.toUpperCase():o)+"="+encodeURIComponent(t[o]));return(e&&-1!==e.indexOf("?")?"&":"?")+n.join("&")}var m=/\{ *([\w_-]+) *\}/g;function f(t,e){return t.replace(m,(function(t,i){var n=e[i];if(void 0===n)throw new Error("No value provided for variable "+t);return"function"==typeof n&&(n=n(e)),n}))}var g=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function v(t,e){for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1}var y="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function x(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var w=0;function b(t){var e=+new Date,i=Math.max(0,16-(e-w));return w=e+i,window.setTimeout(t,i)}var P=window.requestAnimationFrame||x("RequestAnimationFrame")||b,T=window.cancelAnimationFrame||x("CancelAnimationFrame")||x("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function M(t,e,i){if(!i||P!==b)return P.call(window,o(t,e));t.call(e)}function C(t){t&&T.call(window,t)}var k={extend:i,create:n,bind:o,lastId:s,stamp:r,throttle:a,wrapNum:l,falseFn:h,formatNum:u,trim:c,splitWords:d,setOptions:p,getParamString:_,template:f,isArray:g,indexOf:v,emptyImageUrl:y,requestFn:P,cancelFn:T,requestAnimFrame:M,cancelAnimFrame:C};function z(){}function S(t){if("undefined"!=typeof L&&L&&L.Mixin){t=g(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}z.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},o=e.__super__=this.prototype,s=n(o);for(var r in s.constructor=e,e.prototype=s,this)Object.prototype.hasOwnProperty.call(this,r)&&"prototype"!==r&&"__super__"!==r&&(e[r]=this[r]);return t.statics&&(i(e,t.statics),delete t.statics),t.includes&&(S(t.includes),i.apply(null,[s].concat(t.includes)),delete t.includes),s.options&&(t.options=i(n(s.options),t.options)),i(s,t),s._initHooks=[],s.callInitHooks=function(){if(!this._initHooksCalled){o.callInitHooks&&o.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=s._initHooks.length;t<e;t++)s._initHooks[t].call(this)}},e},z.include=function(t){return i(this.prototype,t),this},z.mergeOptions=function(t){return i(this.prototype.options,t),this},z.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),i="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(i),this};var E={on:function(t,e,i){if("object"==typeof t)for(var n in t)this._on(n,t[n],e);else for(var o=0,s=(t=d(t)).length;o<s;o++)this._on(t[o],e,i);return this},off:function(t,e,i){if(t)if("object"==typeof t)for(var n in t)this._off(n,t[n],e);else for(var o=0,s=(t=d(t)).length;o<s;o++)this._off(t[o],e,i);else delete this._events;return this},_on:function(t,e,i){this._events=this._events||{};var n=this._events[t];n||(n=[],this._events[t]=n),i===this&&(i=void 0);for(var o={fn:e,ctx:i},s=n,r=0,a=s.length;r<a;r++)if(s[r].fn===e&&s[r].ctx===i)return;s.push(o)},_off:function(t,e,i){var n,o,s;if(this._events&&(n=this._events[t]))if(e){if(i===this&&(i=void 0),n)for(o=0,s=n.length;o<s;o++){var r=n[o];if(r.ctx===i&&r.fn===e)return r.fn=h,this._firingCount&&(this._events[t]=n=n.slice()),void n.splice(o,1)}}else{for(o=0,s=n.length;o<s;o++)n[o].fn=h;delete this._events[t]}},fire:function(t,e,n){if(!this.listens(t,n))return this;var o=i({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var s=this._events[t];if(s){this._firingCount=this._firingCount+1||1;for(var r=0,a=s.length;r<a;r++){var l=s[r];l.fn.call(l.ctx||this,o)}this._firingCount--}}return n&&this._propagateEvent(o),this},listens:function(t,e){var i=this._events&&this._events[t];if(i&&i.length)return!0;if(e)for(var n in this._eventParents)if(this._eventParents[n].listens(t,e))return!0;return!1},once:function(t,e,i){if("object"==typeof t){for(var n in t)this.once(n,t[n],e);return this}var s=o((function(){this.off(t,e,i).off(t,s,i)}),this);return this.on(t,e,i).on(t,s,i)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[r(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[r(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,i({layer:t.target,propagatedFrom:t.target},t),!0)}};E.addEventListener=E.on,E.removeEventListener=E.clearAllEventListeners=E.off,E.addOneTimeEventListener=E.once,E.fireEvent=E.fire,E.hasEventListeners=E.listens;var B=z.extend(E);function Z(t,e,i){this.x=i?Math.round(t):t,this.y=i?Math.round(e):e}var A=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};function O(t,e,i){return t instanceof Z?t:g(t)?new Z(t[0],t[1]):null==t?t:"object"==typeof t&&"x"in t&&"y"in t?new Z(t.x,t.y):new Z(t,e,i)}function I(t,e){if(t)for(var i=e?[t,e]:t,n=0,o=i.length;n<o;n++)this.extend(i[n])}function N(t,e){return!t||t instanceof I?t:new I(t,e)}function R(t,e){if(t)for(var i=e?[t,e]:t,n=0,o=i.length;n<o;n++)this.extend(i[n])}function $(t,e){return t instanceof R?t:new R(t,e)}function j(t,e,i){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,void 0!==i&&(this.alt=+i)}function q(t,e,i){return t instanceof j?t:g(t)&&"object"!=typeof t[0]?3===t.length?new j(t[0],t[1],t[2]):2===t.length?new j(t[0],t[1]):null:null==t?t:"object"==typeof t&&"lat"in t?new j(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new j(t,e,i)}Z.prototype={clone:function(){return new Z(this.x,this.y)},add:function(t){return this.clone()._add(O(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(O(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new Z(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new Z(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=A(this.x),this.y=A(this.y),this},distanceTo:function(t){var e=(t=O(t)).x-this.x,i=t.y-this.y;return Math.sqrt(e*e+i*i)},equals:function(t){return(t=O(t)).x===this.x&&t.y===this.y},contains:function(t){return t=O(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+u(this.x)+", "+u(this.y)+")"}},I.prototype={extend:function(t){return t=O(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new Z((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new Z(this.min.x,this.max.y)},getTopRight:function(){return new Z(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,i;return(t="number"==typeof t[0]||t instanceof Z?O(t):N(t))instanceof I?(e=t.min,i=t.max):e=i=t,e.x>=this.min.x&&i.x<=this.max.x&&e.y>=this.min.y&&i.y<=this.max.y},intersects:function(t){t=N(t);var e=this.min,i=this.max,n=t.min,o=t.max,s=o.x>=e.x&&n.x<=i.x,r=o.y>=e.y&&n.y<=i.y;return s&&r},overlaps:function(t){t=N(t);var e=this.min,i=this.max,n=t.min,o=t.max,s=o.x>e.x&&n.x<i.x,r=o.y>e.y&&n.y<i.y;return s&&r},isValid:function(){return!(!this.min||!this.max)}},R.prototype={extend:function(t){var e,i,n=this._southWest,o=this._northEast;if(t instanceof j)e=t,i=t;else{if(!(t instanceof R))return t?this.extend(q(t)||$(t)):this;if(e=t._southWest,i=t._northEast,!e||!i)return this}return n||o?(n.lat=Math.min(e.lat,n.lat),n.lng=Math.min(e.lng,n.lng),o.lat=Math.max(i.lat,o.lat),o.lng=Math.max(i.lng,o.lng)):(this._southWest=new j(e.lat,e.lng),this._northEast=new j(i.lat,i.lng)),this},pad:function(t){var e=this._southWest,i=this._northEast,n=Math.abs(e.lat-i.lat)*t,o=Math.abs(e.lng-i.lng)*t;return new R(new j(e.lat-n,e.lng-o),new j(i.lat+n,i.lng+o))},getCenter:function(){return new j((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new j(this.getNorth(),this.getWest())},getSouthEast:function(){return new j(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof j||"lat"in t?q(t):$(t);var e,i,n=this._southWest,o=this._northEast;return t instanceof R?(e=t.getSouthWest(),i=t.getNorthEast()):e=i=t,e.lat>=n.lat&&i.lat<=o.lat&&e.lng>=n.lng&&i.lng<=o.lng},intersects:function(t){t=$(t);var e=this._southWest,i=this._northEast,n=t.getSouthWest(),o=t.getNorthEast(),s=o.lat>=e.lat&&n.lat<=i.lat,r=o.lng>=e.lng&&n.lng<=i.lng;return s&&r},overlaps:function(t){t=$(t);var e=this._southWest,i=this._northEast,n=t.getSouthWest(),o=t.getNorthEast(),s=o.lat>e.lat&&n.lat<i.lat,r=o.lng>e.lng&&n.lng<i.lng;return s&&r},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return!!t&&(t=$(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e))},isValid:function(){return!(!this._southWest||!this._northEast)}},j.prototype={equals:function(t,e){return!!t&&(t=q(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(void 0===e?1e-9:e))},toString:function(t){return"LatLng("+u(this.lat,t)+", "+u(this.lng,t)+")"},distanceTo:function(t){return W.distance(this,q(t))},wrap:function(){return W.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,i=e/Math.cos(Math.PI/180*this.lat);return $([this.lat-e,this.lng-i],[this.lat+e,this.lng+i])},clone:function(){return new j(this.lat,this.lng,this.alt)}};var D,H={latLngToPoint:function(t,e){var i=this.projection.project(t),n=this.scale(e);return this.transformation._transform(i,n)},pointToLatLng:function(t,e){var i=this.scale(e),n=this.transformation.untransform(t,i);return this.projection.unproject(n)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,i=this.scale(t);return new I(this.transformation.transform(e.min,i),this.transformation.transform(e.max,i))},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?l(t.lng,this.wrapLng,!0):t.lng;return new j(this.wrapLat?l(t.lat,this.wrapLat,!0):t.lat,e,t.alt)},wrapLatLngBounds:function(t){var e=t.getCenter(),i=this.wrapLatLng(e),n=e.lat-i.lat,o=e.lng-i.lng;if(0===n&&0===o)return t;var s=t.getSouthWest(),r=t.getNorthEast();return new R(new j(s.lat-n,s.lng-o),new j(r.lat-n,r.lng-o))}},W=i({},H,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var i=Math.PI/180,n=t.lat*i,o=e.lat*i,s=Math.sin((e.lat-t.lat)*i/2),r=Math.sin((e.lng-t.lng)*i/2),a=s*s+Math.cos(n)*Math.cos(o)*r*r,l=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));return this.R*l}}),F=6378137,U={R:F,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,i=this.MAX_LATITUDE,n=Math.max(Math.min(i,t.lat),-i),o=Math.sin(n*e);return new Z(this.R*t.lng*e,this.R*Math.log((1+o)/(1-o))/2)},unproject:function(t){var e=180/Math.PI;return new j((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:(D=F*Math.PI,new I([-D,-D],[D,D]))};function V(t,e,i,n){if(g(t))return this._a=t[0],this._b=t[1],this._c=t[2],void(this._d=t[3]);this._a=t,this._b=e,this._c=i,this._d=n}function G(t,e,i,n){return new V(t,e,i,n)}V.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new Z((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};var K=i({},W,{code:"EPSG:3857",projection:U,transformation:function(){var t=.5/(Math.PI*U.R);return G(t,.5,-t,.5)}()}),Y=i({},K,{code:"EPSG:900913"});function J(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function X(t,e){var i,n,o,s,r,a,l="";for(i=0,o=t.length;i<o;i++){for(n=0,s=(r=t[i]).length;n<s;n++)l+=(n?"L":"M")+(a=r[n]).x+" "+a.y;l+=e?St?"z":"x":""}return l||"M0 0"}var Q=document.documentElement.style,tt="ActiveXObject"in window,et=tt&&!document.addEventListener,it="msLaunchUri"in navigator&&!("documentMode"in document),nt=Bt("webkit"),ot=Bt("android"),st=Bt("android 2")||Bt("android 3"),rt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),at=ot&&Bt("Google")&&rt<537&&!("AudioNode"in window),lt=!!window.opera,ht=!it&&Bt("chrome"),ut=Bt("gecko")&&!nt&&!lt&&!tt,ct=!ht&&Bt("safari"),dt=Bt("phantom"),pt="OTransition"in Q,_t=0===navigator.platform.indexOf("Win"),mt=tt&&"transition"in Q,ft="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!st,gt="MozPerspective"in Q,vt=!window.L_DISABLE_3D&&(mt||ft||gt)&&!pt&&!dt,yt="undefined"!=typeof orientation||Bt("mobile"),xt=yt&&nt,wt=yt&&ft,bt=!window.PointerEvent&&window.MSPointerEvent,Pt=!(!window.PointerEvent&&!bt),Lt=!window.L_NO_TOUCH&&(Pt||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),Tt=yt&&lt,Mt=yt&&ut,Ct=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,kt=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",h,e),window.removeEventListener("testPassiveEventSupport",h,e)}catch(t){}return t}(),zt=!!document.createElement("canvas").getContext,St=!(!document.createElementNS||!J("svg").createSVGRect),Et=!St&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(t){return!1}}();function Bt(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var Zt={ie:tt,ielt9:et,edge:it,webkit:nt,android:ot,android23:st,androidStock:at,opera:lt,chrome:ht,gecko:ut,safari:ct,phantom:dt,opera12:pt,win:_t,ie3d:mt,webkit3d:ft,gecko3d:gt,any3d:vt,mobile:yt,mobileWebkit:xt,mobileWebkit3d:wt,msPointer:bt,pointer:Pt,touch:Lt,mobileOpera:Tt,mobileGecko:Mt,retina:Ct,passiveEvents:kt,canvas:zt,svg:St,vml:Et},At=bt?"MSPointerDown":"pointerdown",Ot=bt?"MSPointerMove":"pointermove",It=bt?"MSPointerUp":"pointerup",Nt=bt?"MSPointerCancel":"pointercancel",Rt={},$t=!1;function jt(t,e,i,n){return"touchstart"===e?Dt(t,i,n):"touchmove"===e?Vt(t,i,n):"touchend"===e&&Gt(t,i,n),this}function qt(t,e,i){var n=t["_leaflet_"+e+i];return"touchstart"===e?t.removeEventListener(At,n,!1):"touchmove"===e?t.removeEventListener(Ot,n,!1):"touchend"===e&&(t.removeEventListener(It,n,!1),t.removeEventListener(Nt,n,!1)),this}function Dt(t,e,i){var n=o((function(t){t.MSPOINTER_TYPE_TOUCH&&t.pointerType===t.MSPOINTER_TYPE_TOUCH&&We(t),Ut(t,e)}));t["_leaflet_touchstart"+i]=n,t.addEventListener(At,n,!1),$t||(document.addEventListener(At,Ht,!0),document.addEventListener(Ot,Wt,!0),document.addEventListener(It,Ft,!0),document.addEventListener(Nt,Ft,!0),$t=!0)}function Ht(t){Rt[t.pointerId]=t}function Wt(t){Rt[t.pointerId]&&(Rt[t.pointerId]=t)}function Ft(t){delete Rt[t.pointerId]}function Ut(t,e){for(var i in t.touches=[],Rt)t.touches.push(Rt[i]);t.changedTouches=[t],e(t)}function Vt(t,e,i){var n=function(t){t.pointerType===(t.MSPOINTER_TYPE_MOUSE||"mouse")&&0===t.buttons||Ut(t,e)};t["_leaflet_touchmove"+i]=n,t.addEventListener(Ot,n,!1)}function Gt(t,e,i){var n=function(t){Ut(t,e)};t["_leaflet_touchend"+i]=n,t.addEventListener(It,n,!1),t.addEventListener(Nt,n,!1)}var Kt=bt?"MSPointerDown":Pt?"pointerdown":"touchstart",Yt=bt?"MSPointerUp":Pt?"pointerup":"touchend",Jt="_leaflet_";function Xt(t,e,i){var n,o,s=!1,r=250;function a(t){if(Pt){if(!t.isPrimary)return;if("mouse"===t.pointerType)return}else if(t.touches.length>1)return;var e=Date.now(),i=e-(n||e);o=t.touches?t.touches[0]:t,s=i>0&&i<=r,n=e}function l(t){if(s&&!o.cancelBubble){if(Pt){if("mouse"===t.pointerType)return;var i,r,a={};for(r in o)i=o[r],a[r]=i&&i.bind?i.bind(o):i;o=a}o.type="dblclick",o.button=0,e(o),n=null}}return t[Jt+Kt+i]=a,t[Jt+Yt+i]=l,t[Jt+"dblclick"+i]=e,t.addEventListener(Kt,a,!!kt&&{passive:!1}),t.addEventListener(Yt,l,!!kt&&{passive:!1}),t.addEventListener("dblclick",e,!1),this}function Qt(t,e){var i=t[Jt+Kt+e],n=t[Jt+Yt+e],o=t[Jt+"dblclick"+e];return t.removeEventListener(Kt,i,!!kt&&{passive:!1}),t.removeEventListener(Yt,n,!!kt&&{passive:!1}),t.removeEventListener("dblclick",o,!1),this}var te,ee,ie,ne,oe,se=be(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),re=be(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ae="webkitTransition"===re||"OTransition"===re?re+"End":"transitionend";function le(t){return"string"==typeof t?document.getElementById(t):t}function he(t,e){var i=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!i||"auto"===i)&&document.defaultView){var n=document.defaultView.getComputedStyle(t,null);i=n?n[e]:null}return"auto"===i?null:i}function ue(t,e,i){var n=document.createElement(t);return n.className=e||"",i&&i.appendChild(n),n}function ce(t){var e=t.parentNode;e&&e.removeChild(t)}function de(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function pe(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function _e(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function me(t,e){if(void 0!==t.classList)return t.classList.contains(e);var i=ye(t);return i.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(i)}function fe(t,e){if(void 0!==t.classList)for(var i=d(e),n=0,o=i.length;n<o;n++)t.classList.add(i[n]);else if(!me(t,e)){var s=ye(t);ve(t,(s?s+" ":"")+e)}}function ge(t,e){void 0!==t.classList?t.classList.remove(e):ve(t,c((" "+ye(t)+" ").replace(" "+e+" "," ")))}function ve(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function ye(t){return t.correspondingElement&&(t=t.correspondingElement),void 0===t.className.baseVal?t.className:t.className.baseVal}function xe(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&we(t,e)}function we(t,e){var i=!1,n="DXImageTransform.Microsoft.Alpha";try{i=t.filters.item(n)}catch(t){if(1===e)return}e=Math.round(100*e),i?(i.Enabled=100!==e,i.Opacity=e):t.style.filter+=" progid:"+n+"(opacity="+e+")"}function be(t){for(var e=document.documentElement.style,i=0;i<t.length;i++)if(t[i]in e)return t[i];return!1}function Pe(t,e,i){var n=e||new Z(0,0);t.style[se]=(mt?"translate("+n.x+"px,"+n.y+"px)":"translate3d("+n.x+"px,"+n.y+"px,0)")+(i?" scale("+i+")":"")}function Le(t,e){t._leaflet_pos=e,vt?Pe(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function Te(t){return t._leaflet_pos||new Z(0,0)}if("onselectstart"in document)te=function(){Ae(window,"selectstart",We)},ee=function(){Ie(window,"selectstart",We)};else{var Me=be(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);te=function(){if(Me){var t=document.documentElement.style;ie=t[Me],t[Me]="none"}},ee=function(){Me&&(document.documentElement.style[Me]=ie,ie=void 0)}}function Ce(){Ae(window,"dragstart",We)}function ke(){Ie(window,"dragstart",We)}function ze(t){for(;-1===t.tabIndex;)t=t.parentNode;t.style&&(Se(),ne=t,oe=t.style.outline,t.style.outline="none",Ae(window,"keydown",Se))}function Se(){ne&&(ne.style.outline=oe,ne=void 0,oe=void 0,Ie(window,"keydown",Se))}function Ee(t){do{t=t.parentNode}while(!(t.offsetWidth&&t.offsetHeight||t===document.body));return t}function Be(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var Ze={TRANSFORM:se,TRANSITION:re,TRANSITION_END:ae,get:le,getStyle:he,create:ue,remove:ce,empty:de,toFront:pe,toBack:_e,hasClass:me,addClass:fe,removeClass:ge,setClass:ve,getClass:ye,setOpacity:xe,testProp:be,setTransform:Pe,setPosition:Le,getPosition:Te,disableTextSelection:te,enableTextSelection:ee,disableImageDrag:Ce,enableImageDrag:ke,preventOutline:ze,restoreOutline:Se,getSizedParentNode:Ee,getScale:Be};function Ae(t,e,i,n){if("object"==typeof e)for(var o in e)$e(t,o,e[o],i);else for(var s=0,r=(e=d(e)).length;s<r;s++)$e(t,e[s],i,n);return this}var Oe="_leaflet_events";function Ie(t,e,i,n){if("object"==typeof e)for(var o in e)je(t,o,e[o],i);else if(e)for(var s=0,r=(e=d(e)).length;s<r;s++)je(t,e[s],i,n);else{for(var a in t[Oe])je(t,a,t[Oe][a]);delete t[Oe]}return this}function Ne(){if(Pt)return!(it||ct)}var Re={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function $e(t,e,i,n){var o=e+r(i)+(n?"_"+r(n):"");if(t[Oe]&&t[Oe][o])return this;var s=function(e){return i.call(n||t,e||window.event)},a=s;Pt&&0===e.indexOf("touch")?jt(t,e,s,o):Lt&&"dblclick"===e&&!Ne()?Xt(t,s,o):"addEventListener"in t?"touchstart"===e||"touchmove"===e||"wheel"===e||"mousewheel"===e?t.addEventListener(Re[e]||e,s,!!kt&&{passive:!1}):"mouseenter"===e||"mouseleave"===e?(s=function(e){e=e||window.event,Xe(t,e)&&a(e)},t.addEventListener(Re[e],s,!1)):t.addEventListener(e,a,!1):"attachEvent"in t&&t.attachEvent("on"+e,s),t[Oe]=t[Oe]||{},t[Oe][o]=s}function je(t,e,i,n){var o=e+r(i)+(n?"_"+r(n):""),s=t[Oe]&&t[Oe][o];if(!s)return this;Pt&&0===e.indexOf("touch")?qt(t,e,o):Lt&&"dblclick"===e&&!Ne()?Qt(t,o):"removeEventListener"in t?t.removeEventListener(Re[e]||e,s,!1):"detachEvent"in t&&t.detachEvent("on"+e,s),t[Oe][o]=null}function qe(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,Je(t),this}function De(t){return $e(t,"wheel",qe),this}function He(t){return Ae(t,"mousedown touchstart dblclick",qe),$e(t,"click",Ye),this}function We(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function Fe(t){return We(t),qe(t),this}function Ue(t,e){if(!e)return new Z(t.clientX,t.clientY);var i=Be(e),n=i.boundingClientRect;return new Z((t.clientX-n.left)/i.x-e.clientLeft,(t.clientY-n.top)/i.y-e.clientTop)}var Ve=_t&&ht?2*window.devicePixelRatio:ut?window.devicePixelRatio:1;function Ge(t){return it?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/Ve:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}var Ke={};function Ye(t){Ke[t.type]=!0}function Je(t){var e=Ke[t.type];return Ke[t.type]=!1,e}function Xe(t,e){var i=e.relatedTarget;if(!i)return!0;try{for(;i&&i!==t;)i=i.parentNode}catch(t){return!1}return i!==t}var Qe={on:Ae,off:Ie,stopPropagation:qe,disableScrollPropagation:De,disableClickPropagation:He,preventDefault:We,stop:Fe,getMousePosition:Ue,getWheelDelta:Ge,fakeStop:Ye,skipped:Je,isExternalTarget:Xe,addListener:Ae,removeListener:Ie},ti=B.extend({run:function(t,e,i,n){this.stop(),this._el=t,this._inProgress=!0,this._duration=i||.25,this._easeOutPower=1/Math.max(n||.5,.2),this._startPos=Te(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=M(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,i=1e3*this._duration;e<i?this._runFrame(this._easeOut(e/i),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var i=this._startPos.add(this._offset.multiplyBy(t));e&&i._round(),Le(this._el,i),this.fire("step")},_complete:function(){C(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),ei=B.extend({options:{crs:K,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=p(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(q(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=re&&vt&&!Tt&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ae(this._proxy,ae,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,n){return e=void 0===e?this._zoom:this._limitZoom(e),t=this._limitCenter(q(t),e,this.options.maxBounds),n=n||{},this._stop(),this._loaded&&!n.reset&&!0!==n&&(void 0!==n.animate&&(n.zoom=i({animate:n.animate},n.zoom),n.pan=i({animate:n.animate,duration:n.duration},n.pan)),this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,n.zoom):this._tryAnimatedPan(t,n.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(t,e),this)},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(vt?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(vt?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,i){var n=this.getZoomScale(e),o=this.getSize().divideBy(2),s=(t instanceof Z?t:this.latLngToContainerPoint(t)).subtract(o).multiplyBy(1-1/n),r=this.containerPointToLatLng(o.add(s));return this.setView(r,e,{zoom:i})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():$(t);var i=O(e.paddingTopLeft||e.padding||[0,0]),n=O(e.paddingBottomRight||e.padding||[0,0]),o=this.getBoundsZoom(t,!1,i.add(n));if((o="number"==typeof e.maxZoom?Math.min(e.maxZoom,o):o)===1/0)return{center:t.getCenter(),zoom:o};var s=n.subtract(i).divideBy(2),r=this.project(t.getSouthWest(),o),a=this.project(t.getNorthEast(),o);return{center:this.unproject(r.add(a).divideBy(2).add(s),o),zoom:o}},fitBounds:function(t,e){if(!(t=$(t)).isValid())throw new Error("Bounds are not valid.");var i=this._getBoundsCenterZoom(t,e);return this.setView(i.center,i.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(e=e||{},!(t=O(t).round()).x&&!t.y)return this.fire("moveend");if(!0!==e.animate&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ti,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){fe(this._mapPane,"leaflet-pan-anim");var i=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,i,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,i){if(!1===(i=i||{}).animate||!vt)return this.setView(t,e,i);this._stop();var n=this.project(this.getCenter()),o=this.project(t),s=this.getSize(),r=this._zoom;t=q(t),e=void 0===e?r:e;var a=Math.max(s.x,s.y),l=a*this.getZoomScale(r,e),h=o.distanceTo(n)||1,u=1.42,c=u*u;function d(t){var e=(l*l-a*a+(t?-1:1)*c*c*h*h)/(2*(t?l:a)*c*h),i=Math.sqrt(e*e+1)-e;return i<1e-9?-18:Math.log(i)}function p(t){return(Math.exp(t)-Math.exp(-t))/2}function _(t){return(Math.exp(t)+Math.exp(-t))/2}function m(t){return p(t)/_(t)}var f=d(0);function g(t){return a*(_(f)/_(f+u*t))}function v(t){return a*(_(f)*m(f+u*t)-p(f))/c}function y(t){return 1-Math.pow(1-t,1.5)}var x=Date.now(),w=(d(1)-f)/u,b=i.duration?1e3*i.duration:1e3*w*.8;function P(){var i=(Date.now()-x)/b,s=y(i)*w;i<=1?(this._flyToFrame=M(P,this),this._move(this.unproject(n.add(o.subtract(n).multiplyBy(v(s)/h)),r),this.getScaleZoom(a/g(s),r),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}return this._moveStart(!0,i.noMoveStart),P.call(this),this},flyToBounds:function(t,e){var i=this._getBoundsCenterZoom(t,e);return this.flyTo(i.center,i.zoom,e)},setMaxBounds:function(t){return(t=$(t)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var i=this.getCenter(),n=this._limitCenter(i,this._zoom,$(t));return i.equals(n)||this.panTo(n,e),this._enforcingBounds=!1,this},panInside:function(t,e){var i=O((e=e||{}).paddingTopLeft||e.padding||[0,0]),n=O(e.paddingBottomRight||e.padding||[0,0]),o=this.getCenter(),s=this.project(o),r=this.project(t),a=this.getPixelBounds(),l=a.getSize().divideBy(2),h=N([a.min.add(i),a.max.subtract(n)]);if(!h.contains(r)){this._enforcingBounds=!0;var u=s.subtract(r),c=O(r.x+u.x,r.y+u.y);(r.x<h.min.x||r.x>h.max.x)&&(c.x=s.x-u.x,u.x>0?c.x+=l.x-i.x:c.x-=l.x-n.x),(r.y<h.min.y||r.y>h.max.y)&&(c.y=s.y-u.y,u.y>0?c.y+=l.y-i.y:c.y-=l.y-n.y),this.panTo(this.unproject(c),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=i({animate:!1,pan:!0},!0===t?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var n=this.getSize(),s=e.divideBy(2).round(),r=n.divideBy(2).round(),a=s.subtract(r);return a.x||a.y?(t.animate&&t.pan?this.panBy(a):(t.pan&&this._rawPanBy(a),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:n})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=i({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=o(this._handleGeolocationResponse,this),n=o(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,n,t):navigator.geolocation.getCurrentPosition(e,n,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,i=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+i+"."})},_handleGeolocationResponse:function(t){var e=new j(t.coords.latitude,t.coords.longitude),i=e.toBounds(2*t.coords.accuracy),n=this._locateOptions;if(n.setView){var o=this.getBoundsZoom(i);this.setView(e,n.maxZoom?Math.min(o,n.maxZoom):o)}var s={latlng:e,bounds:i,timestamp:t.timestamp};for(var r in t.coords)"number"==typeof t.coords[r]&&(s[r]=t.coords[r]);this.fire("locationfound",s)},addHandler:function(t,e){if(!e)return this;var i=this[t]=new e(this);return this._handlers.push(i),this.options[t]&&i.enable(),this},remove:function(){if(this._initEvents(!0),this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}var t;for(t in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),ce(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(C(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[t].remove();for(t in this._panes)ce(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var i=ue("div","leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),e||this._mapPane);return t&&(this._panes[t]=i),i},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds();return new R(this.unproject(t.getBottomLeft()),this.unproject(t.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,i){t=$(t),i=O(i||[0,0]);var n=this.getZoom()||0,o=this.getMinZoom(),s=this.getMaxZoom(),r=t.getNorthWest(),a=t.getSouthEast(),l=this.getSize().subtract(i),h=N(this.project(a,n),this.project(r,n)).getSize(),u=vt?this.options.zoomSnap:1,c=l.x/h.x,d=l.y/h.y,p=e?Math.max(c,d):Math.min(c,d);return n=this.getScaleZoom(p,n),u&&(n=Math.round(n/(u/100))*(u/100),n=e?Math.ceil(n/u)*u:Math.floor(n/u)*u),Math.max(o,Math.min(s,n))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new Z(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var i=this._getTopLeftPoint(t,e);return new I(i,i.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var i=this.options.crs;return e=void 0===e?this._zoom:e,i.scale(t)/i.scale(e)},getScaleZoom:function(t,e){var i=this.options.crs;e=void 0===e?this._zoom:e;var n=i.zoom(t*i.scale(e));return isNaN(n)?1/0:n},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(q(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(O(t),e)},layerPointToLatLng:function(t){var e=O(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(q(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(q(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds($(t))},distance:function(t,e){return this.options.crs.distance(q(t),q(e))},containerPointToLayerPoint:function(t){return O(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return O(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(O(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(q(t)))},mouseEventToContainerPoint:function(t){return Ue(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=le(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");Ae(e,"scroll",this._onScroll,this),this._containerId=r(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&vt,fe(t,"leaflet-container"+(Lt?" leaflet-touch":"")+(Ct?" leaflet-retina":"")+(et?" leaflet-oldie":"")+(ct?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=he(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Le(this._mapPane,new Z(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(fe(t.markerPane,"leaflet-zoom-hide"),fe(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e){Le(this._mapPane,new Z(0,0));var i=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var n=this._zoom!==e;this._moveStart(n,!1)._move(t,e)._moveEnd(n),this.fire("viewreset"),i&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,i){void 0===e&&(e=this._zoom);var n=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(n||i&&i.pinch)&&this.fire("zoom",i),this.fire("move",i)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return C(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){Le(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[r(this._container)]=this;var e=t?Ie:Ae;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),vt&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){C(this._resizeRequest),this._resizeRequest=M((function(){this.invalidateSize({debounceMoveend:!0})}),this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var i,n=[],o="mouseout"===e||"mouseover"===e,s=t.target||t.srcElement,a=!1;s;){if((i=this._targets[r(s)])&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(i)){a=!0;break}if(i&&i.listens(e,!0)){if(o&&!Xe(s,t))break;if(n.push(i),o)break}if(s===this._container)break;s=s.parentNode}return n.length||a||o||!Xe(s,t)||(n=[this]),n},_handleDOMEvent:function(t){if(this._loaded&&!Je(t)){var e=t.type;"mousedown"!==e&&"keypress"!==e&&"keyup"!==e&&"keydown"!==e||ze(t.target||t.srcElement),this._fireDOMEvent(t,e)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,n){if("click"===t.type){var o=i({},t);o.type="preclick",this._fireDOMEvent(o,o.type,n)}if(!t._stopped&&(n=(n||[]).concat(this._findEventTargets(t,e))).length){var s=n[0];"contextmenu"===e&&s.listens(e,!0)&&We(t);var r={originalEvent:t};if("keypress"!==t.type&&"keydown"!==t.type&&"keyup"!==t.type){var a=s.getLatLng&&(!s._radius||s._radius<=10);r.containerPoint=a?this.latLngToContainerPoint(s.getLatLng()):this.mouseEventToContainerPoint(t),r.layerPoint=this.containerPointToLayerPoint(r.containerPoint),r.latlng=a?s.getLatLng():this.layerPointToLatLng(r.layerPoint)}for(var l=0;l<n.length;l++)if(n[l].fire(e,r,!0),r.originalEvent._stopped||!1===n[l].options.bubblingMouseEvents&&-1!==v(this._mouseEvents,e))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return Te(this._mapPane)||new Z(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){return(t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var i=this.getSize()._divideBy(2);return this.project(t,e)._subtract(i)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,i){var n=this._getNewPixelOrigin(i,e);return this.project(t,e)._subtract(n)},_latLngBoundsToNewLayerBounds:function(t,e,i){var n=this._getNewPixelOrigin(i,e);return N([this.project(t.getSouthWest(),e)._subtract(n),this.project(t.getNorthWest(),e)._subtract(n),this.project(t.getSouthEast(),e)._subtract(n),this.project(t.getNorthEast(),e)._subtract(n)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,i){if(!i)return t;var n=this.project(t,e),o=this.getSize().divideBy(2),s=new I(n.subtract(o),n.add(o)),r=this._getBoundsOffset(s,i,e);return r.round().equals([0,0])?t:this.unproject(n.add(r),e)},_limitOffset:function(t,e){if(!e)return t;var i=this.getPixelBounds(),n=new I(i.min.add(t),i.max.add(t));return t.add(this._getBoundsOffset(n,e))},_getBoundsOffset:function(t,e,i){var n=N(this.project(e.getNorthEast(),i),this.project(e.getSouthWest(),i)),o=n.min.subtract(t.min),s=n.max.subtract(t.max);return new Z(this._rebound(o.x,-s.x),this._rebound(o.y,-s.y))},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),i=this.getMaxZoom(),n=vt?this.options.zoomSnap:1;return n&&(t=Math.round(t/n)*n),Math.max(e,Math.min(i,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ge(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var i=this._getCenterOffset(t)._trunc();return!(!0!==(e&&e.animate)&&!this.getSize().contains(i)||(this.panBy(i,e),0))},_createAnimProxy:function(){var t=this._proxy=ue("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",(function(t){var e=se,i=this._proxy.style[e];Pe(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),i===this._proxy.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()}),this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ce(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();Pe(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,i){if(this._animatingZoom)return!0;if(i=i||{},!this._zoomAnimated||!1===i.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var n=this.getZoomScale(e),o=this._getCenterOffset(t)._divideBy(1-1/n);return!(!0!==i.animate&&!this.getSize().contains(o)||(M((function(){this._moveStart(!0,!1)._animateZoom(t,e,!0)}),this),0))},_animateZoom:function(t,e,i,n){this._mapPane&&(i&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,fe(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:n}),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ge(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),M((function(){this._moveEnd(!0)}),this))}});function ii(t,e){return new ei(t,e)}var ni=z.extend({options:{position:"topright"},initialize:function(t){p(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),i=this.getPosition(),n=t._controlCorners[i];return fe(e,"leaflet-control"),-1!==i.indexOf("bottom")?n.insertBefore(e,n.firstChild):n.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ce(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),oi=function(t){return new ni(t)};ei.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",i=this._controlContainer=ue("div",e+"control-container",this._container);function n(n,o){var s=e+n+" "+e+o;t[n+o]=ue("div",s,i)}n("top","left"),n("top","right"),n("bottom","left"),n("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)ce(this._controlCorners[t]);ce(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var si=ni.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,i,n){return i<n?-1:n<i?1:0}},initialize:function(t,e,i){for(var n in p(this,i),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,t)this._addLayer(t[n],n);for(n in e)this._addLayer(e[n],n,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return ni.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(r(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){fe(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(fe(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):ge(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ge(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=ue("div",t),i=this.options.collapsed;e.setAttribute("aria-haspopup",!0),He(e),De(e);var n=this._section=ue("section",t+"-list");i&&(this._map.on("click",this.collapse,this),ot||Ae(e,{mouseenter:this.expand,mouseleave:this.collapse},this));var o=this._layersLink=ue("a",t+"-toggle",e);o.href="#",o.title="Layers",Lt?(Ae(o,"click",Fe),Ae(o,"click",this.expand,this)):Ae(o,"focus",this.expand,this),i||this.expand(),this._baseLayersList=ue("div",t+"-base",n),this._separator=ue("div",t+"-separator",n),this._overlaysList=ue("div",t+"-overlays",n),e.appendChild(n)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&r(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,i){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:i}),this.options.sortLayers&&this._layers.sort(o((function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)}),this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;de(this._baseLayersList),de(this._overlaysList),this._layerControlInputs=[];var t,e,i,n,o=0;for(i=0;i<this._layers.length;i++)n=this._layers[i],this._addItem(n),e=e||n.overlay,t=t||!n.overlay,o+=n.overlay?0:1;return this.options.hideSingleBase&&(t=t&&o>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(r(t.target)),i=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;i&&this._map.fire(i,e)},_createRadioElement:function(t,e){var i='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",n=document.createElement("div");return n.innerHTML=i,n.firstChild},_addItem:function(t){var e,i=document.createElement("label"),n=this._map.hasLayer(t.layer);t.overlay?((e=document.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=n):e=this._createRadioElement("leaflet-base-layers_"+r(this),n),this._layerControlInputs.push(e),e.layerId=r(t.layer),Ae(e,"click",this._onInputClick,this);var o=document.createElement("span");o.innerHTML=" "+t.name;var s=document.createElement("div");return i.appendChild(s),s.appendChild(e),s.appendChild(o),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(i),this._checkDisabledLayers(),i},_onInputClick:function(){var t,e,i=this._layerControlInputs,n=[],o=[];this._handlingClick=!0;for(var s=i.length-1;s>=0;s--)t=i[s],e=this._getLayer(t.layerId).layer,t.checked?n.push(e):t.checked||o.push(e);for(s=0;s<o.length;s++)this._map.hasLayer(o[s])&&this._map.removeLayer(o[s]);for(s=0;s<n.length;s++)this._map.hasLayer(n[s])||this._map.addLayer(n[s]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,i=this._layerControlInputs,n=this._map.getZoom(),o=i.length-1;o>=0;o--)t=i[o],e=this._getLayer(t.layerId).layer,t.disabled=void 0!==e.options.minZoom&&n<e.options.minZoom||void 0!==e.options.maxZoom&&n>e.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),ri=function(t,e,i){return new si(t,e,i)},ai=ni.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",i=ue("div",e+" leaflet-bar"),n=this.options;return this._zoomInButton=this._createButton(n.zoomInText,n.zoomInTitle,e+"-in",i,this._zoomIn),this._zoomOutButton=this._createButton(n.zoomOutText,n.zoomOutTitle,e+"-out",i,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),i},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,i,n,o){var s=ue("a",i,n);return s.innerHTML=t,s.href="#",s.title=e,s.setAttribute("role","button"),s.setAttribute("aria-label",e),He(s),Ae(s,"click",Fe),Ae(s,"click",o,this),Ae(s,"click",this._refocusOnMap,this),s},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";ge(this._zoomInButton,e),ge(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMinZoom())&&fe(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMaxZoom())&&fe(this._zoomInButton,e)}});ei.mergeOptions({zoomControl:!0}),ei.addInitHook((function(){this.options.zoomControl&&(this.zoomControl=new ai,this.addControl(this.zoomControl))}));var li=function(t){return new ai(t)},hi=ni.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",i=ue("div",e),n=this.options;return this._addScales(n,e+"-line",i),t.on(n.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),i},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,i){t.metric&&(this._mScale=ue("div",e,i)),t.imperial&&(this._iScale=ue("div",e,i))},_update:function(){var t=this._map,e=t.getSize().y/2,i=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(i)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),i=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,i,e/t)},_updateImperial:function(t){var e,i,n,o=3.2808399*t;o>5280?(e=o/5280,i=this._getRoundNum(e),this._updateScale(this._iScale,i+" mi",i/e)):(n=this._getRoundNum(o),this._updateScale(this._iScale,n+" ft",n/o))},_updateScale:function(t,e,i){t.style.width=Math.round(this.options.maxWidth*i)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),i=t/e;return e*(i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:1)}}),ui=function(t){return new hi(t)},ci=ni.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){p(this,t),this._attributions={}},onAdd:function(t){for(var e in t.attributionControl=this,this._container=ue("div","leaflet-control-attribution"),He(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var i=[];this.options.prefix&&i.push(this.options.prefix),t.length&&i.push(t.join(", ")),this._container.innerHTML=i.join(" | ")}}});ei.mergeOptions({attributionControl:!0}),ei.addInitHook((function(){this.options.attributionControl&&(new ci).addTo(this)}));var di=function(t){return new ci(t)};ni.Layers=si,ni.Zoom=ai,ni.Scale=hi,ni.Attribution=ci,oi.layers=ri,oi.zoom=li,oi.scale=ui,oi.attribution=di;var pi=z.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});pi.addTo=function(t,e){return t.addHandler(e,this),this};var _i,mi={Events:E},fi=Lt?"touchstart mousedown":"mousedown",gi={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},vi={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},yi=B.extend({options:{clickTolerance:3},initialize:function(t,e,i,n){p(this,n),this._element=t,this._dragStartTarget=e||t,this._preventOutline=i},enable:function(){this._enabled||(Ae(this._dragStartTarget,fi,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(yi._dragging===this&&this.finishDrag(),Ie(this._dragStartTarget,fi,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!t._simulated&&this._enabled&&(this._moved=!1,!me(this._element,"leaflet-zoom-anim")&&!(yi._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||(yi._dragging=this,this._preventOutline&&ze(this._element),Ce(),te(),this._moving)))){this.fire("down");var e=t.touches?t.touches[0]:t,i=Ee(this._element);this._startPoint=new Z(e.clientX,e.clientY),this._parentScale=Be(i),Ae(document,vi[t.type],this._onMove,this),Ae(document,gi[t.type],this._onUp,this)}},_onMove:function(t){if(!t._simulated&&this._enabled)if(t.touches&&t.touches.length>1)this._moved=!0;else{var e=t.touches&&1===t.touches.length?t.touches[0]:t,i=new Z(e.clientX,e.clientY)._subtract(this._startPoint);(i.x||i.y)&&(Math.abs(i.x)+Math.abs(i.y)<this.options.clickTolerance||(i.x/=this._parentScale.x,i.y/=this._parentScale.y,We(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=Te(this._element).subtract(i),fe(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),fe(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(i),this._moving=!0,C(this._animRequest),this._lastEvent=t,this._animRequest=M(this._updatePosition,this,!0)))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),Le(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){!t._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){for(var t in ge(document.body,"leaflet-dragging"),this._lastTarget&&(ge(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),vi)Ie(document,vi[t],this._onMove,this),Ie(document,gi[t],this._onUp,this);ke(),ee(),this._moved&&this._moving&&(C(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,yi._dragging=!1}});function xi(t,e){if(!e||!t.length)return t.slice();var i=e*e;return t=Pi(t=Ti(t,i),i)}function wi(t,e,i){return Math.sqrt(Si(t,e,i,!0))}function bi(t,e,i){return Si(t,e,i)}function Pi(t,e){var i=t.length,n=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(i);n[0]=n[i-1]=1,Li(t,n,e,0,i-1);var o,s=[];for(o=0;o<i;o++)n[o]&&s.push(t[o]);return s}function Li(t,e,i,n,o){var s,r,a,l=0;for(r=n+1;r<=o-1;r++)(a=Si(t[r],t[n],t[o],!0))>l&&(s=r,l=a);l>i&&(e[s]=1,Li(t,e,i,n,s),Li(t,e,i,s,o))}function Ti(t,e){for(var i=[t[0]],n=1,o=0,s=t.length;n<s;n++)zi(t[n],t[o])>e&&(i.push(t[n]),o=n);return o<s-1&&i.push(t[s-1]),i}function Mi(t,e,i,n,o){var s,r,a,l=n?_i:ki(t,i),h=ki(e,i);for(_i=h;;){if(!(l|h))return[t,e];if(l&h)return!1;a=ki(r=Ci(t,e,s=l||h,i,o),i),s===l?(t=r,l=a):(e=r,h=a)}}function Ci(t,e,i,n,o){var s,r,a=e.x-t.x,l=e.y-t.y,h=n.min,u=n.max;return 8&i?(s=t.x+a*(u.y-t.y)/l,r=u.y):4&i?(s=t.x+a*(h.y-t.y)/l,r=h.y):2&i?(s=u.x,r=t.y+l*(u.x-t.x)/a):1&i&&(s=h.x,r=t.y+l*(h.x-t.x)/a),new Z(s,r,o)}function ki(t,e){var i=0;return t.x<e.min.x?i|=1:t.x>e.max.x&&(i|=2),t.y<e.min.y?i|=4:t.y>e.max.y&&(i|=8),i}function zi(t,e){var i=e.x-t.x,n=e.y-t.y;return i*i+n*n}function Si(t,e,i,n){var o,s=e.x,r=e.y,a=i.x-s,l=i.y-r,h=a*a+l*l;return h>0&&((o=((t.x-s)*a+(t.y-r)*l)/h)>1?(s=i.x,r=i.y):o>0&&(s+=a*o,r+=l*o)),a=t.x-s,l=t.y-r,n?a*a+l*l:new Z(s,r)}function Ei(t){return!g(t[0])||"object"!=typeof t[0][0]&&void 0!==t[0][0]}function Bi(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Ei(t)}var Zi={simplify:xi,pointToSegmentDistance:wi,closestPointOnSegment:bi,clipSegment:Mi,_getEdgeIntersection:Ci,_getBitCode:ki,_sqClosestPointOnSegment:Si,isFlat:Ei,_flat:Bi};function Ai(t,e,i){var n,o,s,r,a,l,h,u,c,d=[1,4,2,8];for(o=0,h=t.length;o<h;o++)t[o]._code=ki(t[o],e);for(r=0;r<4;r++){for(u=d[r],n=[],o=0,s=(h=t.length)-1;o<h;s=o++)a=t[o],l=t[s],a._code&u?l._code&u||((c=Ci(l,a,u,e,i))._code=ki(c,e),n.push(c)):(l._code&u&&((c=Ci(l,a,u,e,i))._code=ki(c,e),n.push(c)),n.push(a));t=n}return t}var Oi={clipPolygon:Ai},Ii={project:function(t){return new Z(t.lng,t.lat)},unproject:function(t){return new j(t.y,t.x)},bounds:new I([-180,-90],[180,90])},Ni={R:6378137,R_MINOR:6356752.314245179,bounds:new I([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,i=this.R,n=t.lat*e,o=this.R_MINOR/i,s=Math.sqrt(1-o*o),r=s*Math.sin(n),a=Math.tan(Math.PI/4-n/2)/Math.pow((1-r)/(1+r),s/2);return n=-i*Math.log(Math.max(a,1e-10)),new Z(t.lng*e*i,n)},unproject:function(t){for(var e,i=180/Math.PI,n=this.R,o=this.R_MINOR/n,s=Math.sqrt(1-o*o),r=Math.exp(-t.y/n),a=Math.PI/2-2*Math.atan(r),l=0,h=.1;l<15&&Math.abs(h)>1e-7;l++)e=s*Math.sin(a),e=Math.pow((1-e)/(1+e),s/2),a+=h=Math.PI/2-2*Math.atan(r*e)-a;return new j(a*i,t.x*i/n)}},Ri={LonLat:Ii,Mercator:Ni,SphericalMercator:U},$i=i({},W,{code:"EPSG:3395",projection:Ni,transformation:function(){var t=.5/(Math.PI*Ni.R);return G(t,.5,-t,.5)}()}),ji=i({},W,{code:"EPSG:4326",projection:Ii,transformation:G(1/180,1,-1/180,.5)}),qi=i({},H,{projection:Ii,transformation:G(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var i=e.lng-t.lng,n=e.lat-t.lat;return Math.sqrt(i*i+n*n)},infinite:!0});H.Earth=W,H.EPSG3395=$i,H.EPSG3857=K,H.EPSG900913=Y,H.EPSG4326=ji,H.Simple=qi;var Di=B.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[r(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[r(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var i=this.getEvents();e.on(i,this),this.once("remove",(function(){e.off(i,this)}),this)}this.onAdd(e),this.getAttribution&&e.attributionControl&&e.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),e.fire("layeradd",{layer:this})}}});ei.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=r(t);return this._layers[e]||(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t)),this},removeLayer:function(t){var e=r(t);return this._layers[e]?(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return!!t&&r(t)in this._layers},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},_addLayers:function(t){for(var e=0,i=(t=t?g(t)?t:[t]:[]).length;e<i;e++)this.addLayer(t[e])},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[r(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=r(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,i=this._getZoomSpan();for(var n in this._zoomBoundLayers){var o=this._zoomBoundLayers[n].options;t=void 0===o.minZoom?t:Math.min(t,o.minZoom),e=void 0===o.maxZoom?e:Math.max(e,o.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,i!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Hi=Di.extend({initialize:function(t,e){var i,n;if(p(this,e),this._layers={},t)for(i=0,n=t.length;i<n;i++)this.addLayer(t[i])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&("number"==typeof t?t:this.getLayerId(t))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e,i,n=Array.prototype.slice.call(arguments,1);for(e in this._layers)(i=this._layers[e])[t]&&i[t].apply(i,n);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return r(t)}}),Wi=function(t,e){return new Hi(t,e)},Fi=Hi.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),Hi.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),Hi.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new R;for(var e in this._layers){var i=this._layers[e];t.extend(i.getBounds?i.getBounds():i.getLatLng())}return t}}),Ui=function(t,e){return new Fi(t,e)},Vi=z.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(t){p(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var i=this._getIconUrl(t);if(!i){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var n=this._createImg(i,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(n,t),n},_setIconStyles:function(t,e){var i=this.options,n=i[e+"Size"];"number"==typeof n&&(n=[n,n]);var o=O(n),s=O("shadow"===e&&i.shadowAnchor||i.iconAnchor||o&&o.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(i.className||""),s&&(t.style.marginLeft=-s.x+"px",t.style.marginTop=-s.y+"px"),o&&(t.style.width=o.x+"px",t.style.height=o.y+"px")},_createImg:function(t,e){return(e=e||document.createElement("img")).src=t,e},_getIconUrl:function(t){return Ct&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function Gi(t){return new Vi(t)}var Ki=Vi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return Ki.imagePath||(Ki.imagePath=this._detectIconPath()),(this.options.imagePath||Ki.imagePath)+Vi.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=ue("div","leaflet-default-icon-path",document.body),e=he(t,"background-image")||he(t,"backgroundImage");return document.body.removeChild(t),e=null===e||0!==e.indexOf("url")?"":e.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,"")}}),Yi=pi.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new yi(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),fe(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ge(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,i=e._map,n=this._marker.options.autoPanSpeed,o=this._marker.options.autoPanPadding,s=Te(e._icon),r=i.getPixelBounds(),a=i.getPixelOrigin(),l=N(r.min._subtract(a).add(o),r.max._subtract(a).subtract(o));if(!l.contains(s)){var h=O((Math.max(l.max.x,s.x)-l.max.x)/(r.max.x-l.max.x)-(Math.min(l.min.x,s.x)-l.min.x)/(r.min.x-l.min.x),(Math.max(l.max.y,s.y)-l.max.y)/(r.max.y-l.max.y)-(Math.min(l.min.y,s.y)-l.min.y)/(r.min.y-l.min.y)).multiplyBy(n);i.panBy(h,{animate:!1}),this._draggable._newPos._add(h),this._draggable._startPos._add(h),Le(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=M(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(C(this._panRequest),this._panRequest=M(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,i=e._shadow,n=Te(e._icon),o=e._map.layerPointToLatLng(n);i&&Le(i,n),e._latlng=o,t.latlng=o,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){C(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Ji=Di.extend({options:{icon:new Ki,interactive:!0,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){p(this,e),this._latlng=q(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=q(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),i=t.icon.createIcon(this._icon),n=!1;i!==this._icon&&(this._icon&&this._removeIcon(),n=!0,t.title&&(i.title=t.title),"IMG"===i.tagName&&(i.alt=t.alt||"")),fe(i,e),t.keyboard&&(i.tabIndex="0"),this._icon=i,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var o=t.icon.createShadow(this._shadow),s=!1;o!==this._shadow&&(this._removeShadow(),s=!0),o&&(fe(o,e),o.alt=""),this._shadow=o,t.opacity<1&&this._updateOpacity(),n&&this.getPane().appendChild(this._icon),this._initInteraction(),o&&s&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),ce(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ce(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&Le(this._icon,t),this._shadow&&Le(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(fe(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Yi)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Yi(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&xe(this._icon,t),this._shadow&&xe(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Xi(t,e){return new Ji(t,e)}var Qi=Di.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return p(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),tn=Qi.extend({options:{fill:!0,radius:10},initialize:function(t,e){p(this,e),this._latlng=q(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=q(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return Qi.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,i=this._clickTolerance(),n=[t+i,e+i];this._pxBounds=new I(this._point.subtract(n),this._point.add(n))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function en(t,e){return new tn(t,e)}var nn=tn.extend({initialize:function(t,e,n){if("number"==typeof e&&(e=i({},n,{radius:e})),p(this,e),this._latlng=q(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new R(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Qi.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,i=this._map,n=i.options.crs;if(n.distance===W.distance){var o=Math.PI/180,s=this._mRadius/W.R/o,r=i.project([e+s,t]),a=i.project([e-s,t]),l=r.add(a).divideBy(2),h=i.unproject(l).lat,u=Math.acos((Math.cos(s*o)-Math.sin(e*o)*Math.sin(h*o))/(Math.cos(e*o)*Math.cos(h*o)))/o;(isNaN(u)||0===u)&&(u=s/Math.cos(Math.PI/180*e)),this._point=l.subtract(i.getPixelOrigin()),this._radius=isNaN(u)?0:l.x-i.project([h,t-u]).x,this._radiusY=l.y-r.y}else{var c=n.unproject(n.project(this._latlng).subtract([this._mRadius,0]));this._point=i.latLngToLayerPoint(this._latlng),this._radius=this._point.x-i.latLngToLayerPoint(c).x}this._updateBounds()}});function on(t,e,i){return new nn(t,e,i)}var sn=Qi.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){p(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,i,n=1/0,o=null,s=Si,r=0,a=this._parts.length;r<a;r++)for(var l=this._parts[r],h=1,u=l.length;h<u;h++){var c=s(t,e=l[h-1],i=l[h],!0);c<n&&(n=c,o=s(t,e,i))}return o&&(o.distance=Math.sqrt(n)),o},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,i,n,o,s,r,a=this._rings[0],l=a.length;if(!l)return null;for(t=0,e=0;t<l-1;t++)e+=a[t].distanceTo(a[t+1])/2;if(0===e)return this._map.layerPointToLatLng(a[0]);for(t=0,n=0;t<l-1;t++)if(o=a[t],s=a[t+1],(n+=i=o.distanceTo(s))>e)return r=(n-e)/i,this._map.layerPointToLatLng([s.x-r*(s.x-o.x),s.y-r*(s.y-o.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=q(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new R,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return Ei(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],i=Ei(t),n=0,o=t.length;n<o;n++)i?(e[n]=q(t[n]),this._bounds.extend(e[n])):e[n]=this._convertLatLngs(t[n]);return e},_project:function(){var t=new I;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new Z(t,t);this._pxBounds=new I([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)])},_projectLatlngs:function(t,e,i){var n,o,s=t[0]instanceof j,r=t.length;if(s){for(o=[],n=0;n<r;n++)o[n]=this._map.latLngToLayerPoint(t[n]),i.extend(o[n]);e.push(o)}else for(n=0;n<r;n++)this._projectLatlngs(t[n],e,i)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else{var e,i,n,o,s,r,a,l=this._parts;for(e=0,n=0,o=this._rings.length;e<o;e++)for(i=0,s=(a=this._rings[e]).length;i<s-1;i++)(r=Mi(a[i],a[i+1],t,i,!0))&&(l[n]=l[n]||[],l[n].push(r[0]),r[1]===a[i+1]&&i!==s-2||(l[n].push(r[1]),n++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,i=0,n=t.length;i<n;i++)t[i]=xi(t[i],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var i,n,o,s,r,a,l=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(i=0,s=this._parts.length;i<s;i++)for(n=0,o=(r=(a=this._parts[i]).length)-1;n<r;o=n++)if((e||0!==n)&&wi(t,a[o],a[n])<=l)return!0;return!1}});function rn(t,e){return new sn(t,e)}sn._flat=Bi;var an=sn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,i,n,o,s,r,a,l,h=this._rings[0],u=h.length;if(!u)return null;for(s=r=a=0,t=0,e=u-1;t<u;e=t++)i=h[t],n=h[e],o=i.y*n.x-n.y*i.x,r+=(i.x+n.x)*o,a+=(i.y+n.y)*o,s+=3*o;return l=0===s?h[0]:[r/s,a/s],this._map.layerPointToLatLng(l)},_convertLatLngs:function(t){var e=sn.prototype._convertLatLngs.call(this,t),i=e.length;return i>=2&&e[0]instanceof j&&e[0].equals(e[i-1])&&e.pop(),e},_setLatLngs:function(t){sn.prototype._setLatLngs.call(this,t),Ei(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Ei(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,i=new Z(e,e);if(t=new I(t.min.subtract(i),t.max.add(i)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var n,o=0,s=this._rings.length;o<s;o++)(n=Ai(this._rings[o],t,!0)).length&&this._parts.push(n)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e,i,n,o,s,r,a,l,h=!1;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(o=0,a=this._parts.length;o<a;o++)for(s=0,r=(l=(e=this._parts[o]).length)-1;s<l;r=s++)i=e[s],n=e[r],i.y>t.y!=n.y>t.y&&t.x<(n.x-i.x)*(t.y-i.y)/(n.y-i.y)+i.x&&(h=!h);return h||sn.prototype._containsPoint.call(this,t,!0)}});function ln(t,e){return new an(t,e)}var hn=Fi.extend({initialize:function(t,e){p(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,i,n,o=g(t)?t:t.features;if(o){for(e=0,i=o.length;e<i;e++)((n=o[e]).geometries||n.geometry||n.features||n.coordinates)&&this.addData(n);return this}var s=this.options;if(s.filter&&!s.filter(t))return this;var r=un(t,s);return r?(r.feature=gn(t),r.defaultOptions=r.options,this.resetStyle(r),s.onEachFeature&&s.onEachFeature(t,r),this.addLayer(r)):this},resetStyle:function(t){return void 0===t?this.eachLayer(this.resetStyle,this):(t.options=i({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer((function(e){this._setLayerStyle(e,t)}),this)},_setLayerStyle:function(t,e){t.setStyle&&("function"==typeof e&&(e=e(t.feature)),t.setStyle(e))}});function un(t,e){var i,n,o,s,r="Feature"===t.type?t.geometry:t,a=r?r.coordinates:null,l=[],h=e&&e.pointToLayer,u=e&&e.coordsToLatLng||dn;if(!a&&!r)return null;switch(r.type){case"Point":return cn(h,t,i=u(a),e);case"MultiPoint":for(o=0,s=a.length;o<s;o++)i=u(a[o]),l.push(cn(h,t,i,e));return new Fi(l);case"LineString":case"MultiLineString":return n=pn(a,"LineString"===r.type?0:1,u),new sn(n,e);case"Polygon":case"MultiPolygon":return n=pn(a,"Polygon"===r.type?1:2,u),new an(n,e);case"GeometryCollection":for(o=0,s=r.geometries.length;o<s;o++){var c=un({geometry:r.geometries[o],type:"Feature",properties:t.properties},e);c&&l.push(c)}return new Fi(l);default:throw new Error("Invalid GeoJSON object.")}}function cn(t,e,i,n){return t?t(e,i):new Ji(i,n&&n.markersInheritOptions&&n)}function dn(t){return new j(t[1],t[0],t[2])}function pn(t,e,i){for(var n,o=[],s=0,r=t.length;s<r;s++)n=e?pn(t[s],e-1,i):(i||dn)(t[s]),o.push(n);return o}function _n(t,e){return e="number"==typeof e?e:6,void 0!==t.alt?[u(t.lng,e),u(t.lat,e),u(t.alt,e)]:[u(t.lng,e),u(t.lat,e)]}function mn(t,e,i,n){for(var o=[],s=0,r=t.length;s<r;s++)o.push(e?mn(t[s],e-1,i,n):_n(t[s],n));return!e&&i&&o.push(o[0]),o}function fn(t,e){return t.feature?i({},t.feature,{geometry:e}):gn(e)}function gn(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}var vn={toGeoJSON:function(t){return fn(this,{type:"Point",coordinates:_n(this.getLatLng(),t)})}};function yn(t,e){return new hn(t,e)}Ji.include(vn),nn.include(vn),tn.include(vn),sn.include({toGeoJSON:function(t){var e=!Ei(this._latlngs);return fn(this,{type:(e?"Multi":"")+"LineString",coordinates:mn(this._latlngs,e?1:0,!1,t)})}}),an.include({toGeoJSON:function(t){var e=!Ei(this._latlngs),i=e&&!Ei(this._latlngs[0]),n=mn(this._latlngs,i?2:e?1:0,!0,t);return e||(n=[n]),fn(this,{type:(i?"Multi":"")+"Polygon",coordinates:n})}}),Hi.include({toMultiPoint:function(t){var e=[];return this.eachLayer((function(i){e.push(i.toGeoJSON(t).geometry.coordinates)})),fn(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===e)return this.toMultiPoint(t);var i="GeometryCollection"===e,n=[];return this.eachLayer((function(e){if(e.toGeoJSON){var o=e.toGeoJSON(t);if(i)n.push(o.geometry);else{var s=gn(o);"FeatureCollection"===s.type?n.push.apply(n,s.features):n.push(s)}}})),i?fn(this,{geometries:n,type:"GeometryCollection"}):{type:"FeatureCollection",features:n}}});var xn=yn,wn=Di.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,i){this._url=t,this._bounds=$(e),p(this,i)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(fe(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ce(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&pe(this._image),this},bringToBack:function(){return this._map&&_e(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=$(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t="IMG"===this._url.tagName,e=this._image=t?this._url:ue("img");fe(e,"leaflet-image-layer"),this._zoomAnimated&&fe(e,"leaflet-zoom-animated"),this.options.className&&fe(e,this.options.className),e.onselectstart=h,e.onmousemove=h,e.onload=o(this.fire,this,"load"),e.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(e.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t?this._url=e.src:(e.src=this._url,e.alt=this.options.alt)},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),i=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;Pe(this._image,i,e)},_reset:function(){var t=this._image,e=new I(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),i=e.getSize();Le(t,e.min),t.style.width=i.x+"px",t.style.height=i.y+"px"},_updateOpacity:function(){xe(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)}}),bn=function(t,e,i){return new wn(t,e,i)},Pn=wn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1},_initImage:function(){var t="VIDEO"===this._url.tagName,e=this._image=t?this._url:ue("video");if(fe(e,"leaflet-image-layer"),this._zoomAnimated&&fe(e,"leaflet-zoom-animated"),this.options.className&&fe(e,this.options.className),e.onselectstart=h,e.onmousemove=h,e.onloadeddata=o(this.fire,this,"load"),t){for(var i=e.getElementsByTagName("source"),n=[],s=0;s<i.length;s++)n.push(i[s].src);this._url=i.length>0?n:[e.src]}else{g(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(e.style,"objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop,e.muted=!!this.options.muted;for(var r=0;r<this._url.length;r++){var a=ue("source");a.src=this._url[r],e.appendChild(a)}}}});function Ln(t,e,i){return new Pn(t,e,i)}var Tn=wn.extend({_initImage:function(){var t=this._image=this._url;fe(t,"leaflet-image-layer"),this._zoomAnimated&&fe(t,"leaflet-zoom-animated"),this.options.className&&fe(t,this.options.className),t.onselectstart=h,t.onmousemove=h}});function Mn(t,e,i){return new Tn(t,e,i)}var Cn=Di.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,e){p(this,t),this._source=e},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&xe(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&xe(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(xe(this._container,0),this._removeTimeout=setTimeout(o(ce,void 0,this._container),200)):ce(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=q(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&pe(this._container),this},bringToBack:function(){return this._map&&_e(this._container),this},_prepareOpen:function(t,e,i){if(e instanceof Di||(i=e,e=t),e instanceof Fi)for(var n in t._layers){e=t._layers[n];break}if(!i)if(e.getCenter)i=e.getCenter();else{if(!e.getLatLng)throw new Error("Unable to get source layer LatLng.");i=e.getLatLng()}return this._source=e,this.update(),i},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=O(this.options.offset),i=this._getAnchor();this._zoomAnimated?Le(this._container,t.add(i)):e=e.add(t).add(i);var n=this._containerBottom=-e.y,o=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=n+"px",this._container.style.left=o+"px"}},_getAnchor:function(){return[0,0]}}),kn=Cn.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){Cn.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Qi||this._source.on("preclick",qe))},onRemove:function(t){Cn.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Qi||this._source.off("preclick",qe))},getEvents:function(){var t=Cn.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",e=this._container=ue("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),i=this._wrapper=ue("div",t+"-content-wrapper",e);if(this._contentNode=ue("div",t+"-content",i),He(e),De(this._contentNode),Ae(e,"contextmenu",qe),this._tipContainer=ue("div",t+"-tip-container",e),this._tip=ue("div",t+"-tip",this._tipContainer),this.options.closeButton){var n=this._closeButton=ue("a",t+"-close-button",e);n.href="#close",n.innerHTML="&#215;",Ae(n,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var i=t.offsetWidth;i=Math.min(i,this.options.maxWidth),i=Math.max(i,this.options.minWidth),e.width=i+1+"px",e.whiteSpace="",e.height="";var n=t.offsetHeight,o=this.options.maxHeight,s="leaflet-popup-scrolled";o&&n>o?(e.height=o+"px",fe(t,s)):ge(t,s),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),i=this._getAnchor();Le(this._container,e.add(i))},_adjustPan:function(){if(this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var t=this._map,e=parseInt(he(this._container,"marginBottom"),10)||0,i=this._container.offsetHeight+e,n=this._containerWidth,o=new Z(this._containerLeft,-i-this._containerBottom);o._add(Te(this._container));var s=t.layerPointToContainerPoint(o),r=O(this.options.autoPanPadding),a=O(this.options.autoPanPaddingTopLeft||r),l=O(this.options.autoPanPaddingBottomRight||r),h=t.getSize(),u=0,c=0;s.x+n+l.x>h.x&&(u=s.x+n-h.x+l.x),s.x-u-a.x<0&&(u=s.x-a.x),s.y+i+l.y>h.y&&(c=s.y+i-h.y+l.y),s.y-c-a.y<0&&(c=s.y-a.y),(u||c)&&t.fire("autopanstart").panBy([u,c])}},_onCloseButtonClick:function(t){this._close(),Fe(t)},_getAnchor:function(){return O(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),zn=function(t,e){return new kn(t,e)};ei.mergeOptions({closePopupOnClick:!0}),ei.include({openPopup:function(t,e,i){return t instanceof kn||(t=new kn(i).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),Di.include({bindPopup:function(t,e){return t instanceof kn?(p(t,e),this._popup=t,t._source=this):(this._popup&&!e||(this._popup=new kn(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,e){return this._popup&&this._map&&(e=this._popup._prepareOpen(this,t,e),this._map.openPopup(this._popup,e)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;this._popup&&this._map&&(Fe(t),e instanceof Qi?this.openPopup(t.layer||t.target,t.latlng):this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng))},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var Sn=Cn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){Cn.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){Cn.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=Cn.prototype.getEvents.call(this);return Lt&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var t="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ue("div",t)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e,i,n=this._map,o=this._container,s=n.latLngToContainerPoint(n.getCenter()),r=n.layerPointToContainerPoint(t),a=this.options.direction,l=o.offsetWidth,h=o.offsetHeight,u=O(this.options.offset),c=this._getAnchor();"top"===a?(e=l/2,i=h):"bottom"===a?(e=l/2,i=0):"center"===a?(e=l/2,i=h/2):"right"===a?(e=0,i=h/2):"left"===a?(e=l,i=h/2):r.x<s.x?(a="right",e=0,i=h/2):(a="left",e=l+2*(u.x+c.x),i=h/2),t=t.subtract(O(e,i,!0)).add(u).add(c),ge(o,"leaflet-tooltip-right"),ge(o,"leaflet-tooltip-left"),ge(o,"leaflet-tooltip-top"),ge(o,"leaflet-tooltip-bottom"),fe(o,"leaflet-tooltip-"+a),Le(o,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&xe(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return O(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),En=function(t,e){return new Sn(t,e)};ei.include({openTooltip:function(t,e,i){return t instanceof Sn||(t=new Sn(i).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),Di.include({bindTooltip:function(t,e){return t instanceof Sn?(p(t,e),this._tooltip=t,t._source=this):(this._tooltip&&!e||(this._tooltip=new Sn(e,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",i={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?i.add=this._openTooltip:(i.mouseover=this._openTooltip,i.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(i.mousemove=this._moveTooltip),Lt&&(i.click=this._openTooltip)),this[e](i),this._tooltipHandlersAdded=!t}},openTooltip:function(t,e){return this._tooltip&&this._map&&(e=this._tooltip._prepareOpen(this,t,e),this._map.openTooltip(this._tooltip,e),this._tooltip.options.interactive&&this._tooltip._container&&(fe(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(ge(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var e=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(e,this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var e,i,n=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),i=this._map.containerPointToLayerPoint(e),n=this._map.layerPointToLatLng(i)),this._tooltip.setLatLng(n)}});var Bn=Vi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:document.createElement("div"),i=this.options;if(i.html instanceof Element?(de(e),e.appendChild(i.html)):e.innerHTML=!1!==i.html?i.html:"",i.bgPos){var n=O(i.bgPos);e.style.backgroundPosition=-n.x+"px "+-n.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});function Zn(t){return new Bn(t)}Vi.Default=Ki;var An=Di.extend({options:{tileSize:256,opacity:1,updateWhenIdle:yt,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){p(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),ce(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(pe(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(_e(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=a(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof Z?t:new Z(t,t)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,i=this.getPane().children,n=-t(-1/0,1/0),o=0,s=i.length;o<s;o++)e=i[o].style.zIndex,i[o]!==this._container&&e&&(n=t(n,+e));isFinite(n)&&(this.options.zIndex=n+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!et){xe(this._container,this.options.opacity);var t=+new Date,e=!1,i=!1;for(var n in this._tiles){var o=this._tiles[n];if(o.current&&o.loaded){var s=Math.min(1,(t-o.loaded)/200);xe(o.el,s),s<1?e=!0:(o.active?i=!0:this._onOpaqueTile(o),o.active=!0)}}i&&!this._noPrune&&this._pruneTiles(),e&&(C(this._fadeFrame),this._fadeFrame=M(this._updateOpacity,this))}},_onOpaqueTile:h,_initContainer:function(){this._container||(this._container=ue("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(void 0!==t){for(var i in this._levels)i=Number(i),this._levels[i].el.children.length||i===t?(this._levels[i].el.style.zIndex=e-Math.abs(t-i),this._onUpdateLevel(i)):(ce(this._levels[i].el),this._removeTilesAtZoom(i),this._onRemoveLevel(i),delete this._levels[i]);var n=this._levels[t],o=this._map;return n||((n=this._levels[t]={}).el=ue("div","leaflet-tile-container leaflet-zoom-animated",this._container),n.el.style.zIndex=e,n.origin=o.project(o.unproject(o.getPixelOrigin()),t).round(),n.zoom=t,this._setZoomTransform(n,o.getCenter(),o.getZoom()),h(n.el.offsetWidth),this._onCreateLevel(n)),this._level=n,n}},_onUpdateLevel:h,_onRemoveLevel:h,_onCreateLevel:h,_pruneTiles:function(){if(this._map){var t,e,i=this._map.getZoom();if(i>this.options.maxZoom||i<this.options.minZoom)this._removeAllTiles();else{for(t in this._tiles)(e=this._tiles[t]).retain=e.current;for(t in this._tiles)if((e=this._tiles[t]).current&&!e.active){var n=e.coords;this._retainParent(n.x,n.y,n.z,n.z-5)||this._retainChildren(n.x,n.y,n.z,n.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)ce(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,i,n){var o=Math.floor(t/2),s=Math.floor(e/2),r=i-1,a=new Z(+o,+s);a.z=+r;var l=this._tileCoordsToKey(a),h=this._tiles[l];return h&&h.active?(h.retain=!0,!0):(h&&h.loaded&&(h.retain=!0),r>n&&this._retainParent(o,s,r,n))},_retainChildren:function(t,e,i,n){for(var o=2*t;o<2*t+2;o++)for(var s=2*e;s<2*e+2;s++){var r=new Z(o,s);r.z=i+1;var a=this._tileCoordsToKey(r),l=this._tiles[a];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),i+1<n&&this._retainChildren(o,s,i+1,n))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return void 0!==e.minNativeZoom&&t<e.minNativeZoom?e.minNativeZoom:void 0!==e.maxNativeZoom&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,i,n){var o=Math.round(e);o=void 0!==this.options.maxZoom&&o>this.options.maxZoom||void 0!==this.options.minZoom&&o<this.options.minZoom?void 0:this._clampZoom(o);var s=this.options.updateWhenZooming&&o!==this._tileZoom;n&&!s||(this._tileZoom=o,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==o&&this._update(t),i||this._pruneTiles(),this._noPrune=!!i),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var i in this._levels)this._setZoomTransform(this._levels[i],t,e)},_setZoomTransform:function(t,e,i){var n=this._map.getZoomScale(i,t.zoom),o=t.origin.multiplyBy(n).subtract(this._map._getNewPixelOrigin(e,i)).round();vt?Pe(t.el,o,n):Le(t.el,o)},_resetGrid:function(){var t=this._map,e=t.options.crs,i=this._tileSize=this.getTileSize(),n=this._tileZoom,o=this._map.getPixelWorldBounds(this._tileZoom);o&&(this._globalTileRange=this._pxBoundsToTileRange(o)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],n).x/i.x),Math.ceil(t.project([0,e.wrapLng[1]],n).x/i.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],n).y/i.x),Math.ceil(t.project([e.wrapLat[1],0],n).y/i.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,i=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),n=e.getZoomScale(i,this._tileZoom),o=e.project(t,this._tileZoom).floor(),s=e.getSize().divideBy(2*n);return new I(o.subtract(s),o.add(s))},_update:function(t){var e=this._map;if(e){var i=this._clampZoom(e.getZoom());if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){var n=this._getTiledPixelBounds(t),o=this._pxBoundsToTileRange(n),s=o.getCenter(),r=[],a=this.options.keepBuffer,l=new I(o.getBottomLeft().subtract([a,-a]),o.getTopRight().add([a,-a]));if(!(isFinite(o.min.x)&&isFinite(o.min.y)&&isFinite(o.max.x)&&isFinite(o.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var h in this._tiles){var u=this._tiles[h].coords;u.z===this._tileZoom&&l.contains(new Z(u.x,u.y))||(this._tiles[h].current=!1)}if(Math.abs(i-this._tileZoom)>1)this._setView(t,i);else{for(var c=o.min.y;c<=o.max.y;c++)for(var d=o.min.x;d<=o.max.x;d++){var p=new Z(d,c);if(p.z=this._tileZoom,this._isValidTile(p)){var _=this._tiles[this._tileCoordsToKey(p)];_?_.current=!0:r.push(p)}}if(r.sort((function(t,e){return t.distanceTo(s)-e.distanceTo(s)})),0!==r.length){this._loading||(this._loading=!0,this.fire("loading"));var m=document.createDocumentFragment();for(d=0;d<r.length;d++)this._addTile(r[d],m);this._level.el.appendChild(m)}}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var i=this._globalTileRange;if(!e.wrapLng&&(t.x<i.min.x||t.x>i.max.x)||!e.wrapLat&&(t.y<i.min.y||t.y>i.max.y))return!1}if(!this.options.bounds)return!0;var n=this._tileCoordsToBounds(t);return $(this.options.bounds).overlaps(n)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,i=this.getTileSize(),n=t.scaleBy(i),o=n.add(i);return[e.unproject(n,t.z),e.unproject(o,t.z)]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),i=new R(e[0],e[1]);return this.options.noWrap||(i=this._map.wrapLatLngBounds(i)),i},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),i=new Z(+e[0],+e[1]);return i.z=+e[2],i},_removeTile:function(t){var e=this._tiles[t];e&&(ce(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){fe(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=h,t.onmousemove=h,et&&this.options.opacity<1&&xe(t,this.options.opacity),ot&&!st&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,e){var i=this._getTilePos(t),n=this._tileCoordsToKey(t),s=this.createTile(this._wrapCoords(t),o(this._tileReady,this,t));this._initTile(s),this.createTile.length<2&&M(o(this._tileReady,this,t,null,s)),Le(s,i),this._tiles[n]={el:s,coords:t,current:!0},e.appendChild(s),this.fire("tileloadstart",{tile:s,coords:t})},_tileReady:function(t,e,i){e&&this.fire("tileerror",{error:e,tile:i,coords:t});var n=this._tileCoordsToKey(t);(i=this._tiles[n])&&(i.loaded=+new Date,this._map._fadeAnimated?(xe(i.el,0),C(this._fadeFrame),this._fadeFrame=M(this._updateOpacity,this)):(i.active=!0,this._pruneTiles()),e||(fe(i.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:i.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),et||!this._map._fadeAnimated?M(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new Z(this._wrapX?l(t.x,this._wrapX):t.x,this._wrapY?l(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new I(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function On(t){return new An(t)}var In=An.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,e){this._url=t,(e=p(this,e)).detectRetina&&Ct&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),ot||this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&void 0===e&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var i=document.createElement("img");return Ae(i,"load",o(this._tileOnLoad,this,e,i)),Ae(i,"error",o(this._tileOnError,this,e,i)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(i.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),i.alt="",i.setAttribute("role","presentation"),i.src=this.getTileUrl(t),i},getTileUrl:function(t){var e={r:Ct?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var n=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=n),e["-y"]=n}return f(this._url,i(e,this.options))},_tileOnLoad:function(t,e){et?setTimeout(o(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,i){var n=this.options.errorTileUrl;n&&e.getAttribute("src")!==n&&(e.src=n),t(i,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom;return this.options.zoomReverse&&(t=e-t),t+this.options.zoomOffset},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&((e=this._tiles[t].el).onload=h,e.onerror=h,e.complete||(e.src=y,ce(e),delete this._tiles[t]))},_removeTile:function(t){var e=this._tiles[t];if(e)return at||e.el.setAttribute("src",y),An.prototype._removeTile.call(this,t)},_tileReady:function(t,e,i){if(this._map&&(!i||i.getAttribute("src")!==y))return An.prototype._tileReady.call(this,t,e,i)}});function Nn(t,e){return new In(t,e)}var Rn=In.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var n=i({},this.defaultWmsParams);for(var o in e)o in this.options||(n[o]=e[o]);var s=(e=p(this,e)).detectRetina&&Ct?2:1,r=this.getTileSize();n.width=r.x*s,n.height=r.y*s,this.wmsParams=n},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,In.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),i=this._crs,n=N(i.project(e[0]),i.project(e[1])),o=n.min,s=n.max,r=(this._wmsVersion>=1.3&&this._crs===ji?[o.y,o.x,s.y,s.x]:[o.x,o.y,s.x,s.y]).join(","),a=In.prototype.getTileUrl.call(this,t);return a+_(this.wmsParams,a,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+r},setParams:function(t,e){return i(this.wmsParams,t),e||this.redraw(),this}});function $n(t,e){return new Rn(t,e)}In.WMS=Rn,Nn.wms=$n;var jn=Di.extend({options:{padding:.1,tolerance:0},initialize:function(t){p(this,t),r(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&fe(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var i=this._map.getZoomScale(e,this._zoom),n=Te(this._container),o=this._map.getSize().multiplyBy(.5+this.options.padding),s=this._map.project(this._center,e),r=this._map.project(t,e).subtract(s),a=o.multiplyBy(-i).add(n).add(o).subtract(r);vt?Pe(this._container,a,i):Le(this._container,a)},_reset:function(){for(var t in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),i=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new I(i,i.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),qn=jn.extend({getEvents:function(){var t=jn.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){jn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");Ae(t,"mousemove",this._onMouseMove,this),Ae(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ae(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_destroyContainer:function(){C(this._redrawRequest),delete this._ctx,ce(this._container),Ie(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var t in this._redrawBounds=null,this._layers)this._layers[t]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){jn.prototype._update.call(this);var t=this._bounds,e=this._container,i=t.getSize(),n=Ct?2:1;Le(e,t.min),e.width=n*i.x,e.height=n*i.y,e.style.width=i.x+"px",e.style.height=i.y+"px",Ct&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){jn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[r(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,i=e.next,n=e.prev;i?i.prev=n:this._drawLast=n,n?n.next=i:this._drawFirst=i,delete t._order,delete this._layers[r(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if("string"==typeof t.options.dashArray){var e,i,n=t.options.dashArray.split(/[, ]+/),o=[];for(i=0;i<n.length;i++){if(e=Number(n[i]),isNaN(e))return;o.push(e)}t.options._dashArray=o}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||M(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new I,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var i=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,i.x,i.y),this._ctx.clip()}this._drawing=!0;for(var n=this._drawFirst;n;n=n.next)t=n.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var i,n,o,s,r=t._parts,a=r.length,l=this._ctx;if(a){for(l.beginPath(),i=0;i<a;i++){for(n=0,o=r[i].length;n<o;n++)s=r[i][n],l[n?"lineTo":"moveTo"](s.x,s.y);e&&l.closePath()}this._fillStroke(l,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var e=t._point,i=this._ctx,n=Math.max(Math.round(t._radius),1),o=(Math.max(Math.round(t._radiusY),1)||n)/n;1!==o&&(i.save(),i.scale(1,o)),i.beginPath(),i.arc(e.x,e.y/o,n,0,2*Math.PI,!1),1!==o&&i.restore(),this._fillStroke(i,t)}},_fillStroke:function(t,e){var i=e.options;i.fill&&(t.globalAlpha=i.fillOpacity,t.fillStyle=i.fillColor||i.color,t.fill(i.fillRule||"evenodd")),i.stroke&&0!==i.weight&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=i.opacity,t.lineWidth=i.weight,t.strokeStyle=i.color,t.lineCap=i.lineCap,t.lineJoin=i.lineJoin,t.stroke())},_onClick:function(t){for(var e,i,n=this._map.mouseEventToLayerPoint(t),o=this._drawFirst;o;o=o.next)(e=o.layer).options.interactive&&e._containsPoint(n)&&("click"!==t.type&&"preclick"===t.type||!this._map._draggableMoved(e))&&(i=e);i&&(Ye(t),this._fireEvent([i],t))},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(ge(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var i,n,s=this._drawFirst;s;s=s.next)(i=s.layer).options.interactive&&i._containsPoint(e)&&(n=i);n!==this._hoveredLayer&&(this._handleMouseOut(t),n&&(fe(this._container,"leaflet-interactive"),this._fireEvent([n],t,"mouseover"),this._hoveredLayer=n)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t),this._mouseHoverThrottled=!0,setTimeout(o((function(){this._mouseHoverThrottled=!1}),this),32)}},_fireEvent:function(t,e,i){this._map._fireDOMEvent(e,i||e.type,t)},_bringToFront:function(t){var e=t._order;if(e){var i=e.next,n=e.prev;i&&(i.prev=n,n?n.next=i:i&&(this._drawFirst=i),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t))}},_bringToBack:function(t){var e=t._order;if(e){var i=e.next,n=e.prev;n&&(n.next=i,i?i.prev=n:n&&(this._drawLast=n),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t))}}});function Dn(t){return zt?new qn(t):null}var Hn=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),Wn={_initContainer:function(){this._container=ue("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(jn.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=Hn("shape");fe(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=Hn("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[r(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;ce(e),t.removeInteractiveTarget(e),delete this._layers[r(t)]},_updateStyle:function(t){var e=t._stroke,i=t._fill,n=t.options,o=t._container;o.stroked=!!n.stroke,o.filled=!!n.fill,n.stroke?(e||(e=t._stroke=Hn("stroke")),o.appendChild(e),e.weight=n.weight+"px",e.color=n.color,e.opacity=n.opacity,n.dashArray?e.dashStyle=g(n.dashArray)?n.dashArray.join(" "):n.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=n.lineCap.replace("butt","flat"),e.joinstyle=n.lineJoin):e&&(o.removeChild(e),t._stroke=null),n.fill?(i||(i=t._fill=Hn("fill")),o.appendChild(i),i.color=n.fillColor||n.color,i.opacity=n.fillOpacity):i&&(o.removeChild(i),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),i=Math.round(t._radius),n=Math.round(t._radiusY||i);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+i+","+n+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){pe(t._container)},_bringToBack:function(t){_e(t._container)}},Fn=Et?Hn:J,Un=jn.extend({getEvents:function(){var t=jn.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=Fn("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Fn("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ce(this._container),Ie(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){jn.prototype._update.call(this);var t=this._bounds,e=t.getSize(),i=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,i.setAttribute("width",e.x),i.setAttribute("height",e.y)),Le(i,t.min),i.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=Fn("path");t.options.className&&fe(e,t.options.className),t.options.interactive&&fe(e,"leaflet-interactive"),this._updateStyle(t),this._layers[r(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){ce(t._path),t.removeInteractiveTarget(t._path),delete this._layers[r(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,i=t.options;e&&(i.stroke?(e.setAttribute("stroke",i.color),e.setAttribute("stroke-opacity",i.opacity),e.setAttribute("stroke-width",i.weight),e.setAttribute("stroke-linecap",i.lineCap),e.setAttribute("stroke-linejoin",i.lineJoin),i.dashArray?e.setAttribute("stroke-dasharray",i.dashArray):e.removeAttribute("stroke-dasharray"),i.dashOffset?e.setAttribute("stroke-dashoffset",i.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),i.fill?(e.setAttribute("fill",i.fillColor||i.color),e.setAttribute("fill-opacity",i.fillOpacity),e.setAttribute("fill-rule",i.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,X(t._parts,e))},_updateCircle:function(t){var e=t._point,i=Math.max(Math.round(t._radius),1),n="a"+i+","+(Math.max(Math.round(t._radiusY),1)||i)+" 0 1,0 ",o=t._empty()?"M0 0":"M"+(e.x-i)+","+e.y+n+2*i+",0 "+n+2*-i+",0 ";this._setPath(t,o)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){pe(t._path)},_bringToBack:function(t){_e(t._path)}});function Vn(t){return St||Et?new Un(t):null}Et&&Un.include(Wn),ei.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var e=this._paneRenderers[t];return void 0===e&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&Dn(t)||Vn(t)}});var Gn=an.extend({initialize:function(t,e){an.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=$(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function Kn(t,e){return new Gn(t,e)}Un.create=Fn,Un.pointsToPath=X,hn.geometryToLayer=un,hn.coordsToLatLng=dn,hn.coordsToLatLngs=pn,hn.latLngToCoords=_n,hn.latLngsToCoords=mn,hn.getFeature=fn,hn.asFeature=gn,ei.mergeOptions({boxZoom:!0});var Yn=pi.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){Ae(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ie(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ce(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._clearDeferredResetState(),this._resetState(),te(),Ce(),this._startPoint=this._map.mouseEventToContainerPoint(t),Ae(document,{contextmenu:Fe,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=ue("div","leaflet-zoom-box",this._container),fe(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new I(this._point,this._startPoint),i=e.getSize();Le(this._box,e.min),this._box.style.width=i.x+"px",this._box.style.height=i.y+"px"},_finish:function(){this._moved&&(ce(this._box),ge(this._container,"leaflet-crosshair")),ee(),ke(),Ie(document,{contextmenu:Fe,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var e=new R(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}});ei.addInitHook("addHandler","boxZoom",Yn),ei.mergeOptions({doubleClickZoom:!0});var Jn=pi.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,i=e.getZoom(),n=e.options.zoomDelta,o=t.originalEvent.shiftKey?i-n:i+n;"center"===e.options.doubleClickZoom?e.setZoom(o):e.setZoomAround(t.containerPoint,o)}});ei.addInitHook("addHandler","doubleClickZoom",Jn),ei.mergeOptions({dragging:!0,inertia:!st,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Xn=pi.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new yi(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}fe(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ge(this._map._container,"leaflet-grab"),ge(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=$(this._map.options.maxBounds);this._offsetLimit=N(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,i=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(i),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),i=this._initialWorldOffset,n=this._draggable._newPos.x,o=(n-e+i)%t+e-i,s=(n+e+i)%t-e-i,r=Math.abs(o+i)<Math.abs(s+i)?o:s;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=r},_onDragEnd:function(t){var e=this._map,i=e.options,n=!i.inertia||this._times.length<2;if(e.fire("dragend",t),n)e.fire("moveend");else{this._prunePositions(+new Date);var o=this._lastPos.subtract(this._positions[0]),s=(this._lastTime-this._times[0])/1e3,r=i.easeLinearity,a=o.multiplyBy(r/s),l=a.distanceTo([0,0]),h=Math.min(i.inertiaMaxSpeed,l),u=a.multiplyBy(h/l),c=h/(i.inertiaDeceleration*r),d=u.multiplyBy(-c/2).round();d.x||d.y?(d=e._limitOffset(d,e.options.maxBounds),M((function(){e.panBy(d,{duration:c,easeLinearity:r,noMoveStart:!0,animate:!0})}))):e.fire("moveend")}}});ei.addInitHook("addHandler","dragging",Xn),ei.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Qn=pi.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),Ae(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ie(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,i=t.scrollTop||e.scrollTop,n=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(n,i)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,i,n=this._panKeys={},o=this.keyCodes;for(e=0,i=o.left.length;e<i;e++)n[o.left[e]]=[-1*t,0];for(e=0,i=o.right.length;e<i;e++)n[o.right[e]]=[t,0];for(e=0,i=o.down.length;e<i;e++)n[o.down[e]]=[0,t];for(e=0,i=o.up.length;e<i;e++)n[o.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,i,n=this._zoomKeys={},o=this.keyCodes;for(e=0,i=o.zoomIn.length;e<i;e++)n[o.zoomIn[e]]=t;for(e=0,i=o.zoomOut.length;e<i;e++)n[o.zoomOut[e]]=-t},_addHooks:function(){Ae(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ie(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,i=t.keyCode,n=this._map;if(i in this._panKeys)n._panAnim&&n._panAnim._inProgress||(e=this._panKeys[i],t.shiftKey&&(e=O(e).multiplyBy(3)),n.panBy(e),n.options.maxBounds&&n.panInsideBounds(n.options.maxBounds));else if(i in this._zoomKeys)n.setZoom(n.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[i]);else{if(27!==i||!n._popup||!n._popup.options.closeOnEscapeKey)return;n.closePopup()}Fe(t)}}});ei.addInitHook("addHandler","keyboard",Qn),ei.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var to=pi.extend({addHooks:function(){Ae(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ie(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=Ge(t),i=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var n=Math.max(i-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),n),Fe(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),i=this._map.options.zoomSnap||0;t._stop();var n=this._delta/(4*this._map.options.wheelPxPerZoomLevel),o=4*Math.log(2/(1+Math.exp(-Math.abs(n))))/Math.LN2,s=i?Math.ceil(o/i)*i:o,r=t._limitZoom(e+(this._delta>0?s:-s))-e;this._delta=0,this._startTime=null,r&&("center"===t.options.scrollWheelZoom?t.setZoom(e+r):t.setZoomAround(this._lastMousePos,e+r))}});ei.addInitHook("addHandler","scrollWheelZoom",to),ei.mergeOptions({tap:!0,tapTolerance:15});var eo=pi.extend({addHooks:function(){Ae(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ie(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(We(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],i=e.target;this._startPos=this._newPos=new Z(e.clientX,e.clientY),i.tagName&&"a"===i.tagName.toLowerCase()&&fe(i,"leaflet-active"),this._holdTimeout=setTimeout(o((function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))}),this),1e3),this._simulateEvent("mousedown",e),Ae(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),Ie(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],i=e.target;i&&i.tagName&&"a"===i.tagName.toLowerCase()&&ge(i,"leaflet-active"),this._simulateEvent("mouseup",e),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new Z(e.clientX,e.clientY),this._simulateEvent("mousemove",e)},_simulateEvent:function(t,e){var i=document.createEvent("MouseEvents");i._simulated=!0,e.target._simulatedClick=!0,i.initMouseEvent(t,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(i)}});!Lt||Pt&&!ct||ei.addInitHook("addHandler","tap",eo),ei.mergeOptions({touchZoom:Lt&&!st,bounceAtZoomLimits:!0});var io=pi.extend({addHooks:function(){fe(this._map._container,"leaflet-touch-zoom"),Ae(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ge(this._map._container,"leaflet-touch-zoom"),Ie(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var i=e.mouseEventToContainerPoint(t.touches[0]),n=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(i.add(n)._divideBy(2))),this._startDist=i.distanceTo(n),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),Ae(document,"touchmove",this._onTouchMove,this),Ae(document,"touchend",this._onTouchEnd,this),We(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,i=e.mouseEventToContainerPoint(t.touches[0]),n=e.mouseEventToContainerPoint(t.touches[1]),s=i.distanceTo(n)/this._startDist;if(this._zoom=e.getScaleZoom(s,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&s<1||this._zoom>e.getMaxZoom()&&s>1)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===s)return}else{var r=i._add(n)._divideBy(2)._subtract(this._centerPoint);if(1===s&&0===r.x&&0===r.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(r),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),C(this._animRequest);var a=o(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=M(a,this,!0),We(t)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,C(this._animRequest),Ie(document,"touchmove",this._onTouchMove,this),Ie(document,"touchend",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});ei.addInitHook("addHandler","touchZoom",io),ei.BoxZoom=Yn,ei.DoubleClickZoom=Jn,ei.Drag=Xn,ei.Keyboard=Qn,ei.ScrollWheelZoom=to,ei.Tap=eo,ei.TouchZoom=io,t.version=e,t.Control=ni,t.control=oi,t.Browser=Zt,t.Evented=B,t.Mixin=mi,t.Util=k,t.Class=z,t.Handler=pi,t.extend=i,t.bind=o,t.stamp=r,t.setOptions=p,t.DomEvent=Qe,t.DomUtil=Ze,t.PosAnimation=ti,t.Draggable=yi,t.LineUtil=Zi,t.PolyUtil=Oi,t.Point=Z,t.point=O,t.Bounds=I,t.bounds=N,t.Transformation=V,t.transformation=G,t.Projection=Ri,t.LatLng=j,t.latLng=q,t.LatLngBounds=R,t.latLngBounds=$,t.CRS=H,t.GeoJSON=hn,t.geoJSON=yn,t.geoJson=xn,t.Layer=Di,t.LayerGroup=Hi,t.layerGroup=Wi,t.FeatureGroup=Fi,t.featureGroup=Ui,t.ImageOverlay=wn,t.imageOverlay=bn,t.VideoOverlay=Pn,t.videoOverlay=Ln,t.SVGOverlay=Tn,t.svgOverlay=Mn,t.DivOverlay=Cn,t.Popup=kn,t.popup=zn,t.Tooltip=Sn,t.tooltip=En,t.Icon=Vi,t.icon=Gi,t.DivIcon=Bn,t.divIcon=Zn,t.Marker=Ji,t.marker=Xi,t.TileLayer=In,t.tileLayer=Nn,t.GridLayer=An,t.gridLayer=On,t.SVG=Un,t.svg=Vn,t.Renderer=jn,t.Canvas=qn,t.canvas=Dn,t.Path=Qi,t.CircleMarker=tn,t.circleMarker=en,t.Circle=nn,t.circle=on,t.Polyline=sn,t.polyline=rn,t.Polygon=an,t.polygon=ln,t.Rectangle=Gn,t.rectangle=Kn,t.Map=ei,t.map=ii;var no=window.L;t.noConflict=function(){return window.L=no,this},window.L=t}(e)}(pe={exports:{}},pe.exports),pe.exports);function me(e){let i;return{c(){i=x("div"),C(i,"id","mapid"),C(i,"class","svelte-1v6uf76")},m(t,e){v(t,i,e)},p:t,i:t,o:t,d(t){t&&y(i)}}}function fe(t,e,i){let n,o,s;function r(){Object.keys(n).length>0&&o?function(){_e.Icon.Default.mergeOptions({imagePath:"/assets/images/leaflet/"});const t=n[o].metadata.mapMarker.zoom,e=Math.min(18,t+10),i=Object.keys(s.nodes).reduce(((t,e)=>{var i;return[...t,new _e.LatLng(null===(i=n[e].metadata)||void 0===i?void 0:i.mapMarker.latitude,n[e].metadata.mapMarker.longitude),...s.nodes[e].reduce(((t,i)=>n[e].dialogNodes[i].mapMarker?[...t,new _e.LatLng(n[e].dialogNodes[i].mapMarker.latitude,n[e].dialogNodes[i].mapMarker.longitude)]:t),[])]}),[]),r=_e.map("mapid").setView(i[i.length-1],t);_e.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:e,attribution:'&copy; <a href="https://openstreetmap.org/copyright">Contributeurs OpenStreetMap</a>'}).addTo(r),_e.control.scale().addTo(r);const a=n[o].metadata.mapMarker.label[s.language];if(_e.marker(i[i.length-1]).addTo(r).bindPopup(a),i.length>1&&(i[i.length-1].lat!==i[i.length-2].lat||i[i.length-1].lng!==i[i.length-2].lng)){const t=n[String(Number(o)-1)].metadata.mapMarker.label[s.language];_e.marker(i[i.length-2]).addTo(r).bindPopup(t),i.length>1&&_e.polyline(i.slice(i.length-2),{dashArray:"10, 10"}).addTo(r)}}():setTimeout(r,10)}return l(t,Ut,(t=>i(0,n=t))),l(t,Pt,(t=>i(1,o=t))),l(t,bt,(t=>i(2,s=t))),$((()=>{r()})),[]}class ge extends gt{constructor(t){super(),ft(this,t,fe,me,r,{})}}function ve(t){let e,i,n,o,s,r,a,l,h=t[4][t[0]].metadata.title[t[5].language]+"",u=10*Number(t[0])+"";return{c(){e=x("p"),i=P(),n=x("p"),o=b(t[3]),s=P(),r=x("progress"),a=b(u),l=b("%"),C(e,"id","subtitle"),C(e,"class","svelte-83csnd"),C(n,"id","date"),C(n,"class","svelte-83csnd"),C(r,"max","10"),r.value=t[0]},m(t,u){v(t,e,u),e.innerHTML=h,v(t,i,u),v(t,n,u),g(n,o),v(t,s,u),v(t,r,u),g(r,a),g(r,l)},p(t,i){49&i&&h!==(h=t[4][t[0]].metadata.title[t[5].language]+"")&&(e.innerHTML=h),8&i&&k(o,t[3]),1&i&&u!==(u=10*Number(t[0])+"")&&k(a,u),1&i&&(r.value=t[0])},d(t){t&&y(e),t&&y(i),t&&y(n),t&&y(s),t&&y(r)}}}function ye(e){let i,n,o,s,r,a,l,h,u,c=e[2]&&ve(e);return{c(){i=x("div"),n=x("div"),o=x("h1"),s=b("CHAPITRE "),r=b(e[1]),a=b(" :"),l=P(),c&&c.c(),C(o,"class","svelte-83csnd"),C(n,"id","titles"),C(n,"class","svelte-83csnd"),C(i,"id","intro"),z(i,"--url-smartphone",e[7]),z(i,"--url-tablet",e[8]),z(i,"--url-desktop",e[9]),C(i,"class","svelte-83csnd")},m(t,d){v(t,i,d),g(i,n),g(n,o),g(o,s),g(o,r),g(o,a),g(n,l),c&&c.m(n,null),h||(u=M(i,"click",e[6]),h=!0)},p(t,[e]){2&e&&k(r,t[1]),t[2]?c?c.p(t,e):(c=ve(t),c.c(),c.m(n,null)):c&&(c.d(1),c=null)},i:t,o:t,d(t){t&&y(i),c&&c.d(),h=!1,u()}}}function xe(t,e,i){let n,o,s;l(t,Ut,(t=>i(4,n=t))),l(t,Pt,(t=>i(0,o=t))),l(t,bt,(t=>i(5,s=t)));const r=q();let a,h,u=!1;$((function t(){Object.keys(n).length>0?(i(2,u=!0),i(3,h=new Intl.DateTimeFormat("fr-FR",{month:"long",day:"2-digit"}).format(new Date(n[o].metadata.date)))):setTimeout(t,10)}));const c=`url('/assets/images/intros/${o.padStart(2,"0")}_${"M"==s.gender?"Jon":"Arya"}_Ratio2-5.png')`,d=`url('/assets/images/intros/${o.padStart(2,"0")}_${"M"==s.gender?"Jon":"Arya"}_Ratio2.png')`,p=`url('/assets/images/intros/${o.padStart(2,"0")}_${"M"==s.gender?"Jon":"Arya"}_Ratio1-6.png')`;return t.$$.update=()=>{1&t.$$.dirty&&i(1,a=o.padStart(2,"0"))},[o,a,u,h,n,s,function(){r("abortTimer",{})},c,d,p]}class we extends gt{constructor(t){super(),ft(this,t,xe,ye,r,{})}}function be(t){let e,i,n,o,s;e=new Wt({});let r=t[1]&&Le();return o=new de({}),o.$on("playSound",t[3]),{c(){pt(e.$$.fragment),i=P(),r&&r.c(),n=P(),pt(o.$$.fragment)},m(t,a){_t(e,t,a),v(t,i,a),r&&r.m(t,a),v(t,n,a),_t(o,t,a),s=!0},p(t,e){t[1]?r?2&e&&at(r,1):(r=Le(),r.c(),at(r,1),r.m(n.parentNode,n)):r&&(st(),lt(r,1,1,(()=>{r=null})),rt())},i(t){s||(at(e.$$.fragment,t),at(r),at(o.$$.fragment,t),s=!0)},o(t){lt(e.$$.fragment,t),lt(r),lt(o.$$.fragment,t),s=!1},d(t){mt(e,t),t&&y(i),r&&r.d(t),t&&y(n),mt(o,t)}}}function Pe(e){let i,n;return i=new we({}),i.$on("abortTimer",e[2]),{c(){pt(i.$$.fragment)},m(t,e){_t(i,t,e),n=!0},p:t,i(t){n||(at(i.$$.fragment,t),n=!0)},o(t){lt(i.$$.fragment,t),n=!1},d(t){mt(i,t)}}}function Le(t){let e,i;return e=new ge({}),{c(){pt(e.$$.fragment)},m(t,n){_t(e,t,n),i=!0},i(t){i||(at(e.$$.fragment,t),i=!0)},o(t){lt(e.$$.fragment,t),i=!1},d(t){mt(e,t)}}}function Te(t){let e,i,n,o;const s=[Pe,be],r=[];function a(t,e){return t[0]===Tt.INTRO?0:1}return i=a(t),n=r[i]=s[i](t),{c(){e=x("main"),n.c()},m(t,n){v(t,e,n),r[i].m(e,null),o=!0},p(t,[o]){let l=i;i=a(t),i===l?r[i].p(t,o):(st(),lt(r[l],1,1,(()=>{r[l]=null})),rt(),n=r[i],n?n.p(t,o):(n=r[i]=s[i](t),n.c()),at(n,1),n.m(e,null))},i(t){o||(at(n),o=!0)},o(t){lt(n),o=!1},d(t){t&&y(e),r[i].d()}}}function Me(t,e,i){let n,o,s;function r(){s=setTimeout((()=>{Mt.set(Tt.ONGOING)}),4e3)}return l(t,Mt,(t=>i(0,n=t))),l(t,Ct,(t=>i(1,o=t))),$(r),j((()=>{clearTimeout(s)})),t.$$.update=()=>{1&t.$$.dirty&&n===Tt.INTRO&&r()},[n,o,function(){clearTimeout(s),Mt.set(Tt.ONGOING)},function(e){D.call(this,t,e)}]}class Ce extends gt{constructor(t){super(),ft(this,t,Me,Te,r,{})}}function ke(e){let i,n,o,s,r,a,l,h,u,c,d,p,_,m,f,g,w;return{c(){i=x("h4"),i.textContent="🎯 Points forts :",n=P(),o=x("ul"),o.innerHTML='<li class="svelte-53wdy3"># Inspirant, charismatique</li> \n  <li class="svelte-53wdy3"># Ambassadeur, porte-voix</li> \n  <li class="svelte-53wdy3"># Sens des responsabilités</li> \n  <li class="svelte-53wdy3"># Aptitude à motiver les autres</li>',s=P(),r=x("div"),r.innerHTML='<a href="https://www.badgee.net" target="_blank" rel="noopener noreferrer" class="svelte-53wdy3">Valorise ces compétences avec Badg&#39;ee</a>',a=P(),l=x("h4"),l.textContent="📜 Description :",h=P(),u=x("p"),u.textContent="On dit de toi que tu es inspirant et motivant ! Et oui, qui d'autre que toi pour guider les autres qui, assez spontanément, t'écoutent et te suivent. Ton dynamisme et ta motivation donnent les impulsions nécessaires pour que se forme autour de toi une équipe véritablement engagée dans les actions ou le projet que tu portes.",c=P(),d=x("p"),d.textContent="Les autres te sollicitent tout naturellement pour prendre des responsabilités. Et quand on te confie une tâche, non seulement tu l'acceptes volontiers, mais tu l'accomplis avec zèle et de façon souvent très autonome.",p=P(),_=x("p"),_.textContent="Enfin, force est de constater que tu es un excellent ambassadeur ! Tu es donc sollicité lorsqu'il s'agit de présenter et défendre un projet devant tous types de publics. Bref, tu es aussi le porte-voix de l'équipe, rôle qui te plait particulièrement.",m=P(),f=x("h4"),f.textContent="🚀 Un conseil :",g=P(),w=x("p"),w.textContent="Ce talent inné que tu as pour guider et inspirer les autres ne doit pas t'empêcher d'être aussi à l'écoute des autres, les soutenir, « faire équipe » avec eux, cela te permettra de combiner les talents du leader et du coéquipier, deux profils souvent opposés, alors qu'ils sont en réalité très complémentaires !",C(o,"class","strengths svelte-53wdy3"),C(r,"class","share-container svelte-53wdy3"),E(r,"is-hidden",!e[0])},m(t,e){v(t,i,e),v(t,n,e),v(t,o,e),v(t,s,e),v(t,r,e),v(t,a,e),v(t,l,e),v(t,h,e),v(t,u,e),v(t,c,e),v(t,d,e),v(t,p,e),v(t,_,e),v(t,m,e),v(t,f,e),v(t,g,e),v(t,w,e)},p(t,[e]){1&e&&E(r,"is-hidden",!t[0])},i:t,o:t,d(t){t&&y(i),t&&y(n),t&&y(o),t&&y(s),t&&y(r),t&&y(a),t&&y(l),t&&y(h),t&&y(u),t&&y(c),t&&y(d),t&&y(p),t&&y(_),t&&y(m),t&&y(f),t&&y(g),t&&y(w)}}}function ze(t,e,i){let{showBadgee:n=!1}=e;return t.$$set=t=>{"showBadgee"in t&&i(0,n=t.showBadgee)},[n]}class Se extends gt{constructor(t){super(),ft(this,t,ze,ke,r,{showBadgee:0})}}function Ee(e){let i,n,o,s,r,a,l,h,u,c,d,p,_,m,f;return{c(){i=x("h4"),i.textContent="🎯 Points forts :",n=P(),o=x("ul"),o.innerHTML='<li class="svelte-53wdy3"># Sens de la réflexion, de l&#39;analyse</li> \n  <li class="svelte-53wdy3"># Poursuite d&#39;objectifs structurés</li> \n  <li class="svelte-53wdy3"># Scénarisation fine des actions</li> \n  <li class="svelte-53wdy3"># Goût pour l&#39;anticipation et l&#39;évaluation</li>',s=P(),r=x("div"),r.innerHTML='<a href="https://www.badgee.net" target="_blank" rel="noopener noreferrer" class="svelte-53wdy3">Valorise ces compétences avec Badg&#39;ee</a>',a=P(),l=x("h4"),l.textContent="📜 Description :",h=P(),u=x("p"),u.textContent="S'il y a bien quelqu'un qui sait où il va, et comment il va y aller, c'est toi ! Et oui, avant d'agir, tu réfléchis, tu imagines, tu projettes les choses pour qu'elles se déroulent comme tu le souhaiterais. Que me faudra-t-il avoir ? Qui pourra m'aider ? Que dois-je savoir ou savoir faire ? Etc. Cela veut dire que tu as d'abord déterminé, de façon précise, ton ou tes objectifs. S'ensuit la mise au point d'un plan balisé en quelques grandes étapes. Bref, tu mets au point une véritable scénarisation de tes actions. Et tu définis souvent plusieurs scenarii (plan A, B, C …) pour t'assurer de tout anticiper, tout maîtriser.",c=P(),d=x("p"),d.textContent="Une fois ton plan lancé, tu t'attaches à suivre, pas à pas, chacune des tâches prévues. Cela te permet de bien évaluer ton avancement et donc de vérifier si tu es dans les temps par rapport à tes prévisions de départ. Cette maîtrise de choses et de leur déroulement, mais aussi ton état permanent de vigilance sur ce qui se passe et pourrait mettre à mal tes plans, te permet d'absorber les obstacles et surprises rencontrés en effectuant rapidement les changements nécessaires. Cette flexibilité doit garantir la poursuite de ton objectif de départ.",p=P(),_=x("h4"),_.textContent="🚀 Un conseil :",m=P(),f=x("p"),f.textContent="Ne reste pas trop absorbé par ton besoin de tout contrôler, lâche prise aussi, en accueillant les imprévus pour explorer autre chose, cela te permettra de combiner les talents du planificateur et du bricoleur, deux profils souvent opposés, alors qu'ils sont en réalité très complémentaires !",C(o,"class","strengths svelte-53wdy3"),C(r,"class","share-container svelte-53wdy3"),E(r,"is-hidden",!e[0])},m(t,e){v(t,i,e),v(t,n,e),v(t,o,e),v(t,s,e),v(t,r,e),v(t,a,e),v(t,l,e),v(t,h,e),v(t,u,e),v(t,c,e),v(t,d,e),v(t,p,e),v(t,_,e),v(t,m,e),v(t,f,e)},p(t,[e]){1&e&&E(r,"is-hidden",!t[0])},i:t,o:t,d(t){t&&y(i),t&&y(n),t&&y(o),t&&y(s),t&&y(r),t&&y(a),t&&y(l),t&&y(h),t&&y(u),t&&y(c),t&&y(d),t&&y(p),t&&y(_),t&&y(m),t&&y(f)}}}function Be(t,e,i){let{showBadgee:n=!1}=e;return t.$$set=t=>{"showBadgee"in t&&i(0,n=t.showBadgee)},[n]}class Ze extends gt{constructor(t){super(),ft(this,t,Be,Ee,r,{showBadgee:0})}}function Ae(e){let i,n,o,s,r,a,l,h,u,c,d,p,_,m,f;return{c(){i=x("h4"),i.textContent="🎯 Points forts :",n=P(),o=x("ul"),o.innerHTML='<li class="svelte-53wdy3"># Débrouillardise, inventivité</li> \n  <li class="svelte-53wdy3"># Utilisation de ce qui est « à portée de main »</li> \n  <li class="svelte-53wdy3"># Agilité, flexibilité</li> \n  <li class="svelte-53wdy3"># Goût pour l&#39;action, les défis</li>',s=P(),r=x("div"),r.innerHTML='<a href="https://www.badgee.net" target="_blank" rel="noopener noreferrer" class="svelte-53wdy3">Valorise ces compétences avec Badg&#39;ee</a>',a=P(),l=x("h4"),l.textContent="📜 Description :",h=P(),u=x("p"),u.textContent="Alors toi, on peut dire que tu es débrouillard ! Tout ce que tu as, à portée de main, tu l'utilises pour en faire quelque chose. Bref, rien ne se perd, tout peut servir … Te servir, en l'occurrence, car tu es une personne motivée, passionnée, qui se lance volontiers dans les nouveaux défis. Et tu avances, par essai-erreur, avec les ressources dont tu disposes et en n'hésitant pas non plus à faire appel à toute autre personne qui pourrait t'aider utilement dans tes projets.",c=P(),d=x("p"),d.textContent="Ton fonctionnement te permet de vite comprendre ce qui ne fonctionnera pas. Mais cela ne te décourage pas, au contraire, tu reconfigures, tu tentes autre chose, tu recommences. Cela fait partie des risques de ta façon « bricolée » d'avancer, mais tu aimes ça !",p=P(),_=x("h4"),_.textContent="🚀 Un conseil :",m=P(),f=x("p"),f.textContent="Ce talent inné que tu as pour improviser les choses ne doit pas t'empêcher d'un peu les prévoir aussi, bref prends le temps de réfléchir et d'anticiper les évènements, cela te permettra de combiner les talents du bricoleur et du planificateur, deux profils souvent opposés, alors qu'ils sont en réalité très complémentaires !",C(o,"class","strengths svelte-53wdy3"),C(r,"class","share-container svelte-53wdy3"),E(r,"is-hidden",!e[0])},m(t,e){v(t,i,e),v(t,n,e),v(t,o,e),v(t,s,e),v(t,r,e),v(t,a,e),v(t,l,e),v(t,h,e),v(t,u,e),v(t,c,e),v(t,d,e),v(t,p,e),v(t,_,e),v(t,m,e),v(t,f,e)},p(t,[e]){1&e&&E(r,"is-hidden",!t[0])},i:t,o:t,d(t){t&&y(i),t&&y(n),t&&y(o),t&&y(s),t&&y(r),t&&y(a),t&&y(l),t&&y(h),t&&y(u),t&&y(c),t&&y(d),t&&y(p),t&&y(_),t&&y(m),t&&y(f)}}}function Oe(t,e,i){let{showBadgee:n=!1}=e;return t.$$set=t=>{"showBadgee"in t&&i(0,n=t.showBadgee)},[n]}class Ie extends gt{constructor(t){super(),ft(this,t,Oe,Ae,r,{showBadgee:0})}}function Ne(e){let i,n,o,s,r,a,l,h,u,c,d,p,_,m,f,g,w;return{c(){i=x("h4"),i.textContent="🎯 Points forts :",n=P(),o=x("ul"),o.innerHTML='<li class="svelte-53wdy3"># Goût pour « faire équipe » avec les autres</li> \n  <li class="svelte-53wdy3"># Polyvalence dans le groupe (jouer divers rôles)</li> \n  <li class="svelte-53wdy3"># Sens de l&#39;autre (écoute, soutien, réconfort)</li> \n  <li class="svelte-53wdy3"># Moteur pour l&#39;équipe et son dynamisme</li>',s=P(),r=x("div"),r.innerHTML='<a href="https://www.badgee.net" target="_blank" rel="noopener noreferrer" class="svelte-53wdy3">Valorise ces compétences avec Badg&#39;ee</a>',a=P(),l=x("h4"),l.textContent="📜 Description :",h=P(),u=x("p"),u.textContent="Toi, tu es « comme un poisson dans l'eau » quand tu es dans un collectif. Être avec les autres, mais aussi et surtout, faire en sorte qu'ensemble, vous « fassiez équipe », voilà ce qui te motive. Et tu peux d'ailleurs jouer différents rôles, prendre différentes casquettes dans l'équipe pour qu'elle atteigne les objectifs qu'elle s'est fixés.",c=P(),d=x("p"),d.textContent="Ton attitude est appréciée des autres, car, loin de vouloir t'exprimer et avoir raison à tout prix, tu commences toujours par observer ce qui se passe et écouter attentivement ce que les autres ont à dire. En d'autres mots, l'écoute et le respect de chacun, sont importants à tes yeux. Ceci étant, ton avis est attendu et le collectif n'hésite jamais à te solliciter, te consulter, te mobiliser.",p=P(),_=x("p"),_.textContent="On peut enfin et surtout compter sur toi pour remotiver les troupes dans les moments les plus difficiles, mais aussi réconforter, rassurer, l'un ou l'autre quand il/elle ne va pas. Tu arrives en effet à te mettre à la place des autres, à les comprendre, et surtout tu les soutiens, les réconfortes. C'est ce que l'on appelle l'empathie ! Voilà une qualité bien précieuse...",m=P(),f=x("h4"),f.textContent="🚀 Un conseil :",g=P(),w=x("p"),w.textContent="Ton sens de l'autre, cette empathie qui te caractérise tant, n'hésite pas à les mettre aussi au service de la société au sens plus large, pour un monde meilleur porté par des valeurs, cela te permettra d'associer les talents du coéquipier et de l'idéaliste, une très belle combinaison !",C(o,"class","strengths svelte-53wdy3"),C(r,"class","share-container svelte-53wdy3"),E(r,"is-hidden",!e[0])},m(t,e){v(t,i,e),v(t,n,e),v(t,o,e),v(t,s,e),v(t,r,e),v(t,a,e),v(t,l,e),v(t,h,e),v(t,u,e),v(t,c,e),v(t,d,e),v(t,p,e),v(t,_,e),v(t,m,e),v(t,f,e),v(t,g,e),v(t,w,e)},p(t,[e]){1&e&&E(r,"is-hidden",!t[0])},i:t,o:t,d(t){t&&y(i),t&&y(n),t&&y(o),t&&y(s),t&&y(r),t&&y(a),t&&y(l),t&&y(h),t&&y(u),t&&y(c),t&&y(d),t&&y(p),t&&y(_),t&&y(m),t&&y(f),t&&y(g),t&&y(w)}}}function Re(t,e,i){let{showBadgee:n=!1}=e;return t.$$set=t=>{"showBadgee"in t&&i(0,n=t.showBadgee)},[n]}class $e extends gt{constructor(t){super(),ft(this,t,Re,Ne,r,{showBadgee:0})}}function je(e){let i,n,o,s,r,a,l,h,u,c,d,p,_,m,f;return{c(){i=x("h4"),i.textContent="🎯 Points forts :",n=P(),o=x("ul"),o.innerHTML='<li class="svelte-53wdy3"># Idéalisme, sens des valeurs</li> \n  <li class="svelte-53wdy3"># Convictions fortes</li> \n  <li class="svelte-53wdy3"># Engagement, voire militantisme</li> \n  <li class="svelte-53wdy3"># Goût pour les échanges, le débat</li>',s=P(),r=x("div"),r.innerHTML='<a href="https://www.badgee.net" target="_blank" rel="noopener noreferrer" class="svelte-53wdy3">Valorise ces compétences avec Badg&#39;ee</a>',a=P(),l=x("h4"),l.textContent="📜 Description :",h=P(),u=x("p"),u.textContent="S'il y a bien quelqu'un qui a des convictions, c'est toi ! Différentes causes dans ce monde en transition te sont chères et tu n'hésites pas à l'afficher, à le revendiquer même parfois lorsque ton engagement se mue en véritable militantisme. Il s'agit pour toi de ne pas rester les bras croisés, mais d'agir pour défendre ou mener des combats qui permettront un avenir meilleur, un avenir que tu juges souhaitable. Tu apprécies d'ailleurs les échanges qui permettent de débattre de ces changements provoqués par l'action humaine et donc des enjeux de durabilité.",c=P(),d=x("p"),d.textContent="Ton idéalisme guide également tes choix. Ainsi, si quelqu'un te sollicite pour prendre part à un projet, tu ne prends pas la proposition « à la légère » en l'acceptant d'emblée. Non, tu réfléchis ; tu pèses le « pour » et le « contre » par rapport à qui tu es, tes aspirations, tes valeurs. Parmi ces valeurs, l'intégrité, l'honnêteté, le courage et l'engagement sont particulièrement importantes. Tu n'accepteras en fin de compte que si tu estimes le projet aligné sur ta vision du monde et les causes que tu défends.",p=P(),_=x("h4"),_.textContent="🚀 Un conseil :",m=P(),f=x("p"),f.textContent="N'hésite pas à t'engager comme porte-voix, comme ambassadeur, de tes nobles combats, cela te permettra d'associer les talents de l'idéaliste et du leader, une belle combinaison !",C(o,"class","strengths svelte-53wdy3"),C(r,"class","share-container svelte-53wdy3"),E(r,"is-hidden",!e[0])},m(t,e){v(t,i,e),v(t,n,e),v(t,o,e),v(t,s,e),v(t,r,e),v(t,a,e),v(t,l,e),v(t,h,e),v(t,u,e),v(t,c,e),v(t,d,e),v(t,p,e),v(t,_,e),v(t,m,e),v(t,f,e)},p(t,[e]){1&e&&E(r,"is-hidden",!t[0])},i:t,o:t,d(t){t&&y(i),t&&y(n),t&&y(o),t&&y(s),t&&y(r),t&&y(a),t&&y(l),t&&y(h),t&&y(u),t&&y(c),t&&y(d),t&&y(p),t&&y(_),t&&y(m),t&&y(f)}}}function qe(t,e,i){let{showBadgee:n=!1}=e;return t.$$set=t=>{"showBadgee"in t&&i(0,n=t.showBadgee)},[n]}class De extends gt{constructor(t){super(),ft(this,t,qe,je,r,{showBadgee:0})}}function He(e){let i,n,o,s,r,a,l,h,u,c,d,p,_,m,f,g,w;return{c(){i=x("h4"),i.textContent="🎯 Points forts :",n=P(),o=x("ul"),o.innerHTML='<li class="svelte-53wdy3"># Curiosité, ouverture d&#39;esprit</li> \n  <li class="svelte-53wdy3"># Bonnes intuitions</li> \n  <li class="svelte-53wdy3"># Capacité à imaginer des idées originales</li> \n  <li class="svelte-53wdy3"># Capacité à évaluer les meilleures idées</li>',s=P(),r=x("div"),r.innerHTML='<a href="https://www.badgee.net" target="_blank" rel="noopener noreferrer" class="svelte-53wdy3">Valorise ces compétences avec Badg&#39;ee</a>',a=P(),l=x("h4"),l.textContent="📜 Description :",h=P(),u=x("p"),u.textContent="Alors toi, tu es vraiment curieux de tout, ouvert d'esprit, attentif à l'environnement dans lequel tu te trouves et aux personnes présentes. Tu as beaucoup d'intuition aussi. Cela te permet d'identifier facilement des besoins pour lesquels il conviendrait de trouver des solutions originales.",c=P(),d=x("p"),d.textContent="Quand une situation, un problème, ou encore un projet nécessitent de trouver des idées originales, c'est donc incontestablement à toi que les autres songent. Et oui, tes capacités créatives sont connues et reconnues ! Qui d'autre, mieux que toi, serait capable d'émettre beaucoup d'idées et, de bonnes idées, de surcroît ? Tu as en effet ce talent d'avoir des idées, mais aussi de rebondir sur celles des autres, par associations, métaphores ou autres techniques, pour continuer à en produire encore de nouvelles.",p=P(),_=x("p"),_.textContent="Tu parviens également à évaluer la valeur, la pertinence, le degré d'originalité d'idées émises (les tiennes et celles des autres), ce qui est bien utile quand arrive le moment de faire un choix.",m=P(),f=x("h4"),f.textContent="🚀 Un conseil :",g=P(),w=x("p"),w.textContent="N'hésite pas à nourrir les autres de tes brillantes idées pour « faire équipe » avec eux autour de nouveaux projets, cela te permettra d'associer les talents du créatif et du coéquipier, une belle combinaison !",C(o,"class","strengths svelte-53wdy3"),C(r,"class","share-container svelte-53wdy3"),E(r,"is-hidden",!e[0])},m(t,e){v(t,i,e),v(t,n,e),v(t,o,e),v(t,s,e),v(t,r,e),v(t,a,e),v(t,l,e),v(t,h,e),v(t,u,e),v(t,c,e),v(t,d,e),v(t,p,e),v(t,_,e),v(t,m,e),v(t,f,e),v(t,g,e),v(t,w,e)},p(t,[e]){1&e&&E(r,"is-hidden",!t[0])},i:t,o:t,d(t){t&&y(i),t&&y(n),t&&y(o),t&&y(s),t&&y(r),t&&y(a),t&&y(l),t&&y(h),t&&y(u),t&&y(c),t&&y(d),t&&y(p),t&&y(_),t&&y(m),t&&y(f),t&&y(g),t&&y(w)}}}function We(t,e,i){let{showBadgee:n=!1}=e;return t.$$set=t=>{"showBadgee"in t&&i(0,n=t.showBadgee)},[n]}class Fe extends gt{constructor(t){super(),ft(this,t,We,He,r,{showBadgee:0})}}function Ue(e){let i,n,o,s,r,a,l,h,u,c,d,p,_,m,f,g,w;return{c(){i=x("h4"),i.textContent="🎯 Points forts :",n=P(),o=x("ul"),o.innerHTML='<li class="svelte-53wdy3"># Hautes ambitions</li> \n  <li class="svelte-53wdy3"># Confiance en soi, optimisme</li> \n  <li class="svelte-53wdy3"># Motivation à se fixer des objectifs</li> \n  <li class="svelte-53wdy3"># Capacités à rebondir après un échec</li>',s=P(),r=x("div"),r.innerHTML='<a href="https://www.badgee.net" target="_blank" rel="noopener noreferrer" class="svelte-53wdy3">Valorise ces compétences avec Badg&#39;ee</a>',a=P(),l=x("h4"),l.textContent="📜 Description :",h=P(),u=x("p"),u.textContent="Alors, toi, on peut dire que tu es quelqu'un « qui en veut » dans la vie ! Cela bouillonne dans ta tête entre les projets que tu veux réaliser, ces personnes que tu dois absolument rencontrer, sans oublier ces lieux que tu juges essentiels de découvrir, etc. Bref, tu sais ce qui te fait rêver, ce qui t'intéresse et tu sais où tu vas. Chaque objectif atteint fait place au suivant, celui qui reste à relever, puisque tu es en perpétuel mouvement, en action.",c=P(),d=x("p"),d.textContent="L'échec ne te fait pas peur. Au contraire, tu t'en saisis pour mieux comprendre pourquoi les choses n'ont pas fonctionné comme tu l'avais imaginé, pour rebondir, faire autrement ; bref repartir sur le chemin trépidant de ce que tu veux encore accomplir.",p=P(),_=x("p"),_.textContent="Tu relèves souvent avec succès les défis que tu te lances parce que tu crois en toi, en tes capacités, tes habilités et tes connaissances, pour y parvenir. Avec une telle confiance en toi et un tel optimisme, tu fais bouger les lignes ; tu déplaces des montagnes ; bref tu accomplis des missions qui te profitent, certes, mais qui peuvent aussi profiter aux autres et à la société en général.",m=P(),f=x("h4"),f.textContent="🚀 Un conseil :",g=P(),w=x("p"),w.textContent="N'hésite pas à utiliser ta confiance en toi et ta soif d'avancer pour construire des projets porteurs de sens, de valeurs, pour un monde meilleur, cela te permettra d'associer les talents de l'audacieux et de l'idéaliste, une belle combinaison !",C(o,"class","strengths svelte-53wdy3"),C(r,"class","share-container svelte-53wdy3"),E(r,"is-hidden",!e[0])},m(t,e){v(t,i,e),v(t,n,e),v(t,o,e),v(t,s,e),v(t,r,e),v(t,a,e),v(t,l,e),v(t,h,e),v(t,u,e),v(t,c,e),v(t,d,e),v(t,p,e),v(t,_,e),v(t,m,e),v(t,f,e),v(t,g,e),v(t,w,e)},p(t,[e]){1&e&&E(r,"is-hidden",!t[0])},i:t,o:t,d(t){t&&y(i),t&&y(n),t&&y(o),t&&y(s),t&&y(r),t&&y(a),t&&y(l),t&&y(h),t&&y(u),t&&y(c),t&&y(d),t&&y(p),t&&y(_),t&&y(m),t&&y(f),t&&y(g),t&&y(w)}}}function Ve(t,e,i){let{showBadgee:n=!1}=e;return t.$$set=t=>{"showBadgee"in t&&i(0,n=t.showBadgee)},[n]}class Ge extends gt{constructor(t){super(),ft(this,t,Ve,Ue,r,{showBadgee:0})}}function Ke(e){let i,n,o,s,r,a,l,h,u,c,d,p,_,m,f,g,w;return{c(){i=x("h4"),i.textContent="🎯 Points forts :",n=P(),o=x("ul"),o.innerHTML='<li class="svelte-53wdy3"># Goût de l&#39;aventure</li> \n  <li class="svelte-53wdy3"># Sens fin de l&#39;observation</li> \n  <li class="svelte-53wdy3"># Capacités à rebondir après un échec</li> \n  <li class="svelte-53wdy3"># Sens de l&#39;évaluation, de l&#39;analyse</li>',s=P(),r=x("div"),r.innerHTML='<a href="https://www.badgee.net" target="_blank" rel="noopener noreferrer" class="svelte-53wdy3">Valorise ces compétences avec Badg&#39;ee</a>',a=P(),l=x("h4"),l.textContent="📜 Description :",h=P(),u=x("p"),u.textContent="Le moins que l'on puisse dire est que tu es quelqu'un d'attentif, de vigilant. Tu observes minutieusement les autres, les choses, bref l'environnement et les situations dans lesquelles tu te trouves. Cela te permet de voir, comprendre, et de décrypter beaucoup d'informations. Ces observations, leur fine évaluation, mais aussi ton intuition te conduisent à repérer les opportunités qui se présentent sur ton chemin (projets, défis, rencontres, idées, etc.) et à les saisir !",c=P(),d=x("p"),d.textContent="On peut aussi dire de toi que tu as le goût de l'aventure. L'imprévu, les soucis, voire l'échec ne te font pas peur. Au contraire, tu t'en saisis pour mieux comprendre ton environnement, rebondir, faire autrement ; bref repartir sur le chemin trépidant de ce qui reste encore à découvrir.",p=P(),_=x("p"),_.textContent="Au fil de tes aventures et explorations, tu développes de l'expérience, ce qui te permet de mieux évaluer encore ce qu'il faut faire, ne pas faire ; ce qu'il faut éviter ou, au contraire, ce qu'il faut rechercher à tout prix.",m=P(),f=x("h4"),f.textContent="🚀 Un conseil :",g=P(),w=x("p"),w.textContent="N'hésite pas à utiliser ton sens de l'observation et tes intuitions pour identifier de nouveaux besoins, des défis, et penser à leurs solutions, cela te permettra d'associer les talents de l'explorateur et du créatif, une belle combinaison !",C(o,"class","strengths svelte-53wdy3"),C(r,"class","share-container svelte-53wdy3"),E(r,"is-hidden",!e[0])},m(t,e){v(t,i,e),v(t,n,e),v(t,o,e),v(t,s,e),v(t,r,e),v(t,a,e),v(t,l,e),v(t,h,e),v(t,u,e),v(t,c,e),v(t,d,e),v(t,p,e),v(t,_,e),v(t,m,e),v(t,f,e),v(t,g,e),v(t,w,e)},p(t,[e]){1&e&&E(r,"is-hidden",!t[0])},i:t,o:t,d(t){t&&y(i),t&&y(n),t&&y(o),t&&y(s),t&&y(r),t&&y(a),t&&y(l),t&&y(h),t&&y(u),t&&y(c),t&&y(d),t&&y(p),t&&y(_),t&&y(m),t&&y(f),t&&y(g),t&&y(w)}}}function Ye(t,e,i){let{showBadgee:n=!1}=e;return t.$$set=t=>{"showBadgee"in t&&i(0,n=t.showBadgee)},[n]}class Je extends gt{constructor(t){super(),ft(this,t,Ye,Ke,r,{showBadgee:0})}}function Xe(t,e,i){const n=t.slice();return n[10]=e[i][0],n[11]=e[i][1],n[13]=i,n}function Qe(t,e,i){const n=t.slice();return n[10]=e[i],n[13]=i,n}function ti(t,e){let i;return{key:t,first:null,c(){i=w("circle"),C(i,"cx",e[6][e[13]].x),C(i,"cy",e[6][e[13]].y),C(i,"r","5"),C(i,"fill","#FF5050"),this.first=i},m(t,e){v(t,i,e)},p(t,i){e=t},d(t){t&&y(i)}}}function ei(t,e){let i,n,o,s,r,a,l=e[5][e[10]].name+"",h=e[11]+"";return{key:t,first:null,c(){i=x("option"),n=b(l),o=b(" ["),s=b(h),r=b("]"),i.__value=a=e[10],i.value=i.__value,this.first=i},m(t,e){v(t,i,e),g(i,n),g(i,o),g(i,s),g(i,r)},p(t,o){e=t,8&o&&l!==(l=e[5][e[10]].name+"")&&k(n,l),8&o&&h!==(h=e[11]+"")&&k(s,h),8&o&&a!==(a=e[10])&&(i.__value=a,i.value=i.__value)},d(t){t&&y(i)}}}function ii(t){let e,i,n,o,s,r,a,l,h,u,c,d,p,_,m,f,L,T,z,E,B,Z,A,O,I,N,R,$,j,q,D,H,W,F,U,V,G,K,J,X,Q,tt,et=t[5][t[0]].name+"",it=[],nt=new Map,ot=[],ht=new Map,ut=t[4];const ft=t=>t[13];for(let e=0;e<ut.length;e+=1){let i=Qe(t,ut,e),n=ft(i);nt.set(n,it[e]=ti(n,i))}let gt=t[3];const vt=t=>t[13];for(let e=0;e<gt.length;e+=1){let i=Xe(t,gt,e),n=vt(i);ht.set(n,ot[e]=ei(n,i))}var yt=t[5][t[2]].component;function xt(t){return{props:{showBadgee:t[2]===t[0]}}}return yt&&(G=new yt(xt(t))),J=new Et({}),{c(){e=x("main"),i=x("div"),i.innerHTML='<h1>Félicitations!</h1> \n    <p class="is-bold">Belle aventure ! Félicitations et merci d’avoir joué ! <br/>\n      Voici les résultats du test :</p>',n=P(),o=x("div"),s=x("h3"),s.textContent="Ton profil dominant :",r=P(),a=x("h2"),l=b(et),h=P(),u=x("div"),c=x("picture"),d=x("source"),_=P(),m=x("source"),L=P(),T=x("img"),B=P(),Z=x("p"),Z.textContent="Voici les toutes les composantes de ton profil :",A=P(),O=x("div"),I=w("svg"),N=w("use"),R=w("path");for(let t=0;t<it.length;t+=1)it[t].c();$=b("\n\n      Votre navigateur ne permet pas d'afficher le graphe des résultats."),j=P(),q=x("div"),D=x("div"),H=x("div"),W=x("select");for(let t=0;t<ot.length;t+=1)ot[t].c();var g,v;F=P(),U=x("p"),U.textContent="Clique sur les autres profils pour voir leur description",V=P(),G&&pt(G.$$.fragment),K=P(),pt(J.$$.fragment),C(i,"id","congratulations"),C(s,"class","svelte-qgvdmt"),C(a,"class","svelte-qgvdmt"),C(o,"id","profile"),C(o,"class","svelte-qgvdmt"),C(d,"srcset",p="assets/images/profiles/"+t[5][t[0]].avatarName+"_"+t[1].gender+"_Medium.png"),C(d,"media","(min-width: 769px)"),C(m,"srcset",f="assets/images/profiles/"+t[5][t[0]].avatarName+"_"+t[1].gender+"_Small.png"),C(m,"media","(max-width: 768px)"),T.src!==(z="assets/images/profiles/"+t[5][t[0]].avatarName+"_"+t[1].gender+"_Small.png")&&C(T,"src",z),C(T,"alt",E=t[5][t[0]].name),C(T,"class","svelte-qgvdmt"),C(u,"id","profile-avatar-container"),C(u,"class","svelte-qgvdmt"),C(N,"href","assets/sprite_results.svg#results-background"),g="xlink:href",v="assets/sprite_results.svg#results-background",N.setAttributeNS("http://www.w3.org/1999/xlink",g,v),C(R,"d",t[7]+" Z"),C(R,"stroke","var(--color-primary)"),C(R,"stroke-width","3"),C(R,"fill","#FF505099"),C(I,"id","graph"),C(I,"viewBox","0 0 500 500"),C(I,"class","svelte-qgvdmt"),C(O,"id","graph-container"),C(O,"class","svelte-qgvdmt"),C(W,"class","svelte-qgvdmt"),void 0===t[2]&&Y((()=>t[8].call(W))),C(H,"id","profile-select"),C(H,"class","svelte-qgvdmt"),C(U,"class","caption svelte-qgvdmt"),C(D,"class","has-text-centered"),C(q,"id","description"),C(q,"class","svelte-qgvdmt")},m(p,f){v(p,e,f),g(e,i),g(e,n),g(e,o),g(o,s),g(o,r),g(o,a),g(a,l),g(e,h),g(e,u),g(u,c),g(c,d),g(c,_),g(c,m),g(c,L),g(c,T),g(e,B),g(e,Z),g(e,A),g(e,O),g(O,I),g(I,N),g(I,R);for(let t=0;t<it.length;t+=1)it[t].m(I,null);g(I,$),g(e,j),g(e,q),g(q,D),g(D,H),g(H,W);for(let t=0;t<ot.length;t+=1)ot[t].m(W,null);S(W,t[2]),g(D,F),g(D,U),g(q,V),G&&_t(G,q,null),v(p,K,f),_t(J,p,f),X=!0,Q||(tt=M(W,"change",t[8]),Q=!0)},p(t,[e]){(!X||1&e)&&et!==(et=t[5][t[0]].name+"")&&k(l,et),(!X||3&e&&p!==(p="assets/images/profiles/"+t[5][t[0]].avatarName+"_"+t[1].gender+"_Medium.png"))&&C(d,"srcset",p),(!X||3&e&&f!==(f="assets/images/profiles/"+t[5][t[0]].avatarName+"_"+t[1].gender+"_Small.png"))&&C(m,"srcset",f),(!X||3&e&&T.src!==(z="assets/images/profiles/"+t[5][t[0]].avatarName+"_"+t[1].gender+"_Small.png"))&&C(T,"src",z),(!X||1&e&&E!==(E=t[5][t[0]].name))&&C(T,"alt",E),80&e&&(ut=t[4],it=dt(it,e,ft,1,t,ut,nt,I,ct,ti,$,Qe)),40&e&&(gt=t[3],ot=dt(ot,e,vt,1,t,gt,ht,W,ct,ei,null,Xe)),12&e&&S(W,t[2]);const i={};if(5&e&&(i.showBadgee=t[2]===t[0]),yt!==(yt=t[5][t[2]].component)){if(G){st();const t=G;lt(t.$$.fragment,1,0,(()=>{mt(t,1)})),rt()}yt?(G=new yt(xt(t)),pt(G.$$.fragment),at(G.$$.fragment,1),_t(G,q,null)):G=null}else yt&&G.$set(i)},i(t){X||(G&&at(G.$$.fragment,t),at(J.$$.fragment,t),X=!0)},o(t){G&&lt(G.$$.fragment,t),lt(J.$$.fragment,t),X=!1},d(t){t&&y(e);for(let t=0;t<it.length;t+=1)it[t].d();for(let t=0;t<ot.length;t+=1)ot[t].d();G&&mt(G),t&&y(K),mt(J,t),Q=!1,tt()}}}function ni(t,e,i){let n,o,s,r,a;l(t,bt,(t=>i(1,n=t))),l(t,Pt,(t=>i(9,o=t))),l(t,Lt,(t=>i(3,s=t)));const h=["creatif","audacieux","leader","explorateur","bricoleur","planificateur","idealiste","coequipier"],u={leader:{name:"Le Leader",component:Se,avatarName:"Leader"},bricoleur:{name:"Le Bricoleur",component:Ie,avatarName:"Bricoleur"},coequipier:{name:"Le Coéquipier",component:$e,avatarName:"Coequipier"},planificateur:{name:"Le Planificateur",component:Ze,avatarName:"Planificateur"},idealiste:{name:"L'Idéaliste",component:De,avatarName:"Idealiste"},creatif:{name:"Le Créatif",component:Fe,avatarName:"Creatif"},audacieux:{name:"L'Audacieux",component:Ge,avatarName:"Audacieux"},explorateur:{name:"L'Explorateur",component:Je,avatarName:"Explorateur"}},c=h.map(((t,e)=>({x:Math.floor(250+21.25*n.attribution[t]*Math.cos(2*Math.PI*e*(1/8))),y:Math.floor(250-21.25*n.attribution[t]*Math.sin(2*Math.PI*e*(1/8)))}))),d=c.reduce(((t,e,i)=>0===i?t+`M${e.x} ${e.y}`:t+` L${e.x} ${e.y}`),"");return $((()=>{window.scrollTo(0,0),"10"===o&&async function(t){const e=new FormData;Object.keys(t).forEach((i=>{e.append(`profile[${i}]`,String(t[i]))}));const i=await fetch("http://localhost:3000/profiles",{method:"POST",headers:{Accept:"application/json"},body:e});i.ok||console.error(`ERROR ${i.status}: ${i.statusText})`)}(n.attribution)})),t.$$.update=()=>{2&t.$$.dirty&&i(0,r=Object.entries(n.attribution).reduce(((t,[e,i])=>i>n.attribution[t]?e:t),"planificateur")),1&t.$$.dirty&&i(2,a=r)},[r,n,a,s,h,u,c,d,function(){a=function(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}(this),i(2,a),i(0,r),i(1,n)}]}class oi extends gt{constructor(t){super(),ft(this,t,ni,ii,r,{})}}function si(e){let i,n,o,s,r,a,l,h,u,c;return{c(){i=x("main"),n=x("h1"),n.textContent="Voyage au bout du monde",o=P(),s=x("h3"),s.textContent="Une aventure d'introspection",r=P(),a=x("div"),l=x("p"),h=b("Une erreur est survenue lors du chargement des chapitres du jeu: "),u=x("br"),c=b(e[0]),C(l,"class","error svelte-jgovyv"),C(a,"class","error-container svelte-jgovyv")},m(t,e){v(t,i,e),g(i,n),g(i,o),g(i,s),g(i,r),g(i,a),g(a,l),g(l,h),g(l,u),g(l,c)},p:t,i:t,o:t,d(t){t&&y(i)}}}function ri(t,e,i){let n;l(t,Ut,(t=>i(1,n=t)));return[n.error]}class ai extends gt{constructor(t){super(),ft(this,t,ri,si,r,{})}}function li(t){let e,i,n,o,s,r,a;return e=new Nt({}),{c(){pt(e.$$.fragment),i=P(),n=x("audio"),n.innerHTML='<track kind="captions"/>',C(n,"id","background-music"),n.src!==(o="/assets/sounds/watermarked_Sounds_Like_Sander_When_Stars_Collide_instrumental_3_49.mp3")&&C(n,"src","/assets/sounds/watermarked_Sounds_Like_Sander_When_Stars_Collide_instrumental_3_49.mp3"),n.autoplay=!0,n.loop=!0},m(o,l){_t(e,o,l),v(o,i,l),v(o,n,l),n.muted=t[3],s=!0,r||(a=M(n,"volumechange",t[8]),r=!0)},p(t,e){8&e&&(n.muted=t[3])},i(t){s||(at(e.$$.fragment,t),s=!0)},o(t){lt(e.$$.fragment,t),s=!1},d(t){mt(e,t),t&&y(i),t&&y(n),r=!1,a()}}}function hi(e){let i,n;return i=new ai({}),{c(){pt(i.$$.fragment)},m(t,e){_t(i,t,e),n=!0},p:t,i(t){n||(at(i.$$.fragment,t),n=!0)},o(t){lt(i.$$.fragment,t),n=!1},d(t){mt(i,t)}}}function ui(e){let i,n;return i=new oi({}),{c(){pt(i.$$.fragment)},m(t,e){_t(i,t,e),n=!0},p:t,i(t){n||(at(i.$$.fragment,t),n=!0)},o(t){lt(i.$$.fragment,t),n=!1},d(t){mt(i,t)}}}function ci(e){let i,n;return i=new Ce({}),i.$on("playSound",e[5]),{c(){pt(i.$$.fragment)},m(t,e){_t(i,t,e),n=!0},p:t,i(t){n||(at(i.$$.fragment,t),n=!0)},o(t){lt(i.$$.fragment,t),n=!1},d(t){mt(i,t)}}}function di(t){let e,i,n,o,s,r;const a=[ci,ui,hi,li],l=[];function h(t,e){return t[0]?0:t[1]?1:t[2]?2:3}return e=h(t),i=l[e]=a[e](t),{c(){i.c(),n=P(),o=x("audio"),o.innerHTML='<track kind="captions"/>',C(o,"id","notification-sound"),o.src!==(s="/assets/sounds/message.mp3")&&C(o,"src","/assets/sounds/message.mp3")},m(i,s){l[e].m(i,s),v(i,n,s),v(i,o,s),t[9](o),r=!0},p(t,[o]){let s=e;e=h(t),e===s?l[e].p(t,o):(st(),lt(l[s],1,1,(()=>{l[s]=null})),rt(),i=l[e],i?i.p(t,o):(i=l[e]=a[e](t),i.c()),at(i,1),i.m(n.parentNode,n))},i(t){r||(at(i),r=!0)},o(t){lt(i),r=!1},d(i){l[e].d(i),i&&y(n),i&&y(o),t[9](null)}}}function pi(t,e,i){let n,o,s;l(t,zt,(t=>i(10,n=t))),l(t,Mt,(t=>i(6,o=t))),l(t,kt,(t=>i(7,s=t)));let r,a=!1,h=!1,u=!1,c=!1;return $((()=>{const t=window.localStorage;t&&t.getItem("state")&&bt.set(JSON.parse(t.getItem("state")))})),t.$$.update=()=>{64&t.$$.dirty&&i(0,a=o===Tt.ONGOING||o===Tt.INTRO),64&t.$$.dirty&&i(1,h=o===Tt.FINISHED),64&t.$$.dirty&&i(2,u=o===Tt.ERROR),192&t.$$.dirty&&i(3,c=!s||o!==Tt.UNSTARTED)},[a,h,u,c,r,function(){n&&r.play()},o,s,function(){c=this.muted,i(3,c),i(7,s),i(6,o)},function(t){W[t?"unshift":"push"]((()=>{r=t,i(4,r)}))}]}return new class extends gt{constructor(t){super(),ft(this,t,pi,di,r,{})}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
