var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function c(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function o(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function i(t,e,n){t.$$.on_destroy.push(o(e,n))}function l(t,e,n=e){return t.set(n),e}let a,u=!1;function d(t,e,n,r){for(;t<e;){const c=t+(e-t>>1);n(c)<=r?t=c+1:e=c}return t}function f(t,e){u?(!function(t){if(t.hydrate_init)return;t.hydrate_init=!0;const e=t.childNodes,n=new Int32Array(e.length+1),r=new Int32Array(e.length);n[0]=-1;let c=0;for(let t=0;t<e.length;t++){const s=d(1,c+1,(t=>e[n[t]].claim_order),e[t].claim_order)-1;r[t]=n[s]+1;const o=s+1;n[o]=t,c=Math.max(o,c)}const s=[],o=[];let i=e.length-1;for(let t=n[c]+1;0!=t;t=r[t-1]){for(s.push(e[t-1]);i>=t;i--)o.push(e[i]);i--}for(;i>=0;i--)o.push(e[i]);s.reverse(),o.sort(((t,e)=>t.claim_order-e.claim_order));for(let e=0,n=0;e<o.length;e++){for(;n<s.length&&o[e].claim_order>=s[n].claim_order;)n++;const r=n<s.length?s[n]:null;t.insertBefore(o[e],r)}}(t),(void 0===t.actual_end_child||null!==t.actual_end_child&&t.actual_end_child.parentElement!==t)&&(t.actual_end_child=t.firstChild),e!==t.actual_end_child?t.insertBefore(e,t.actual_end_child):t.actual_end_child=e.nextSibling):e.parentNode!==t&&t.appendChild(e)}function g(t,e,n){u&&!n?f(t,e):(e.parentNode!==t||n&&e.nextSibling!==n)&&t.insertBefore(e,n||null)}function p(t){t.parentNode.removeChild(t)}function h(t){return document.createElement(t)}function m(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function v(t){return document.createTextNode(t)}function $(){return v(" ")}function y(){return v("")}function w(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function b(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function x(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function k(t,e,n){t.classList[n?"add":"remove"](e)}function _(t){a=t}function N(){if(!a)throw new Error("Function called outside component initialization");return a}function O(t){N().$$.on_mount.push(t)}const P=[],E=[],S=[],j=[],q=Promise.resolve();let A=!1;function C(){A||(A=!0,q.then(z))}function T(t){S.push(t)}let I=!1;const R=new Set;function z(){if(!I){I=!0;do{for(let t=0;t<P.length;t+=1){const e=P[t];_(e),M(e.$$)}for(_(null),P.length=0;E.length;)E.pop()();for(let t=0;t<S.length;t+=1){const e=S[t];R.has(e)||(R.add(e),e())}S.length=0}while(P.length);for(;j.length;)j.pop()();A=!1,I=!1,R.clear()}}function M(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(T)}}const D=new Set;let H;function U(t,e){t&&t.i&&(D.delete(t),t.i(e))}function G(t,e,n,r){if(t&&t.o){if(D.has(t))return;D.add(t),H.c.push((()=>{D.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}function L(t,e){t.d(1),e.delete(t.key)}function F(t,e,n,r,c,s,o,i,l,a,u,d){let f=t.length,g=s.length,p=f;const h={};for(;p--;)h[t[p].key]=p;const m=[],v=new Map,$=new Map;for(p=g;p--;){const t=d(c,s,p),i=n(t);let l=o.get(i);l?r&&l.p(t,e):(l=a(i,t),l.c()),v.set(i,m[p]=l),i in h&&$.set(i,Math.abs(p-h[i]))}const y=new Set,w=new Set;function b(t){U(t,1),t.m(i,u),o.set(t.key,t),u=t.first,g--}for(;f&&g;){const e=m[g-1],n=t[f-1],r=e.key,c=n.key;e===n?(u=e.first,f--,g--):v.has(c)?!o.has(r)||y.has(r)?b(e):w.has(c)?f--:$.get(r)>$.get(c)?(w.add(r),b(e)):(y.add(c),f--):(l(n,o),f--)}for(;f--;){const e=t[f];v.has(e.key)||l(e,o)}for(;g;)b(m[g-1]);return m}function B(t){t&&t.c()}function J(t,n,s,o){const{fragment:i,on_mount:l,on_destroy:a,after_update:u}=t.$$;i&&i.m(n,s),o||T((()=>{const n=l.map(e).filter(c);a?a.push(...n):r(n),t.$$.on_mount=[]})),u.forEach(T)}function V(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function K(e,c,s,o,i,l,d=[-1]){const f=a;_(e);const g=e.$$={fragment:null,ctx:null,props:l,update:t,not_equal:i,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:c.context||[]),callbacks:n(),dirty:d,skip_bound:!1};let h=!1;if(g.ctx=s?s(e,c.props||{},((t,n,...r)=>{const c=r.length?r[0]:n;return g.ctx&&i(g.ctx[t],g.ctx[t]=c)&&(!g.skip_bound&&g.bound[t]&&g.bound[t](c),h&&function(t,e){-1===t.$$.dirty[0]&&(P.push(t),C(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(e,t)),n})):[],g.update(),h=!0,r(g.before_update),g.fragment=!!o&&o(g.ctx),c.target){if(c.hydrate){u=!0;const t=function(t){return Array.from(t.childNodes)}(c.target);g.fragment&&g.fragment.l(t),t.forEach(p)}else g.fragment&&g.fragment.c();c.intro&&U(e.$$.fragment),J(e,c.target,c.anchor,c.customElement),u=!1,z()}_(f)}class Q{$destroy(){V(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const W=[];function X(t,e){return{subscribe:Y(t,e).subscribe}}function Y(e,n=t){let r;const c=[];function o(t){if(s(e,t)&&(e=t,r)){const t=!W.length;for(let t=0;t<c.length;t+=1){const n=c[t];n[1](),W.push(n,e)}if(t){for(let t=0;t<W.length;t+=2)W[t][0](W[t+1]);W.length=0}}}return{set:o,update:function(t){o(t(e))},subscribe:function(s,i=t){const l=[s,i];return c.push(l),1===c.length&&(r=n(o)||t),s(e),()=>{const t=c.indexOf(l);-1!==t&&c.splice(t,1),0===c.length&&(r(),r=null)}}}}const Z=Y({gender:"",language:"fr",attribution:{leader:0,bricoleur:0,coequipier:0,planificateur:0,idealiste:0,creatif:0,audacieux:0,explorateur:0},nodes:{}}),tt=function(e,n,s){const i=!Array.isArray(e),l=i?[e]:e,a=n.length<2;return X(s,(e=>{let s=!1;const u=[];let d=0,f=t;const g=()=>{if(d)return;f();const r=n(i?u[0]:u,e);a?e(r):f=c(r)?r:t},p=l.map(((t,e)=>o(t,(t=>{u[e]=t,d&=~(1<<e),s&&g()}),(()=>{d|=1<<e}))));return s=!0,g(),function(){r(p),f()}}))}(Z,(t=>Object.keys(t.nodes).reduce(((t,e)=>e>t?e:t),"1")));var et;!function(t){t[t.UNSTARTED=0]="UNSTARTED",t[t.ONGOING=1]="ONGOING",t[t.PAUSED=2]="PAUSED",t[t.FINISHED=3]="FINISHED",t[t.ERROR=4]="ERROR"}(et||(et={}));const nt=Y(et.UNSTARTED);function rt(t){let e,n,r;return{c(){e=h("button"),e.textContent="Continuer",b(e,"class","svelte-1wkgo86"),k(e,"pressed",!t[0])},m(c,s){g(c,e,s),n||(r=w(e,"click",t[4]),n=!0)},p(t,n){1&n&&k(e,"pressed",!t[0])},d(t){t&&p(e),n=!1,r()}}}function ct(e){let n,c,s,o,i,l,a,u,d,m,y,x,_,N,O,P,E=e[1]&&e[2]&&rt(e);return{c(){n=h("main"),c=h("h1"),c.textContent="Voyage au bout du monde",s=$(),o=h("h3"),o.textContent="Une aventure d'introspection",i=$(),l=h("div"),E&&E.c(),a=$(),u=h("button"),u.textContent="Nouvelle Partie",d=$(),m=h("div"),y=v("Protagoniste:\n    "),x=h("button"),x.innerHTML='<svg class="icon svelte-1wkgo86"><use href="assets/sprite_icons.svg#mars"></use></svg>\n      Masculin',_=$(),N=h("button"),N.innerHTML='<svg class="icon svelte-1wkgo86"><use href="assets/sprite_icons.svg#venus"></use></svg>\n      Féminin',b(c,"class","svelte-1wkgo86"),b(u,"class","svelte-1wkgo86"),k(u,"pressed",e[0]),b(l,"class","is-grid svelte-1wkgo86"),b(x,"class","svelte-1wkgo86"),b(N,"class","svelte-1wkgo86"),b(m,"class","is-grid protagoniste svelte-1wkgo86"),k(m,"is-hidden",!e[0]),b(n,"class","svelte-1wkgo86")},m(t,r){g(t,n,r),f(n,c),f(n,s),f(n,o),f(n,i),f(n,l),E&&E.m(l,null),f(l,a),f(l,u),f(n,d),f(n,m),f(m,y),f(m,x),f(m,_),f(m,N),O||(P=[w(u,"click",e[3]),w(x,"click",e[8]),w(N,"click",e[9])],O=!0)},p(t,[e]){t[1]&&t[2]?E?E.p(t,e):(E=rt(t),E.c(),E.m(l,a)):E&&(E.d(1),E=null),1&e&&k(u,"pressed",t[0]),1&e&&k(m,"is-hidden",!t[0])},i:t,o:t,d(t){t&&p(n),E&&E.d(),O=!1,r(P)}}}function st(t,e,n){let r,c;var s;i(t,nt,(t=>n(10,r=t))),i(t,Z,(t=>n(7,c=t)));let o,a=!1,u=!1;function d(){l(nt,r=et.ONGOING,r)}function f(t){l(Z,c.gender=t,c),l(Z,c.nodes={},c),d()}return t.$$.update=()=>{128&t.$$.dirty&&n(1,u=0===Object.entries(c.nodes).length),192&t.$$.dirty&&n(2,o=((null===n(6,s=null==c?void 0:c.gender)||void 0===s?void 0:s.length)||0)>0)},[a,u,o,function(){n(0,a=!a)},d,f,s,c,()=>f("m"),()=>f("f")]}class ot extends Q{constructor(t){super(),K(this,t,st,ct,s,{})}}function it(e){let n,r,c,s,o,i,l,a,u,d,v,y,x,k,_,N,O,P,E,S,j,q,A;return{c(){n=h("div"),r=m("svg"),c=m("use"),s=$(),o=m("svg"),i=m("use"),l=$(),a=m("svg"),u=m("use"),d=$(),v=m("svg"),y=m("use"),x=$(),k=m("svg"),_=m("use"),N=$(),O=m("svg"),P=m("use"),E=$(),S=m("svg"),j=m("use"),b(c,"href","assets/sprite_icons.svg#home"),b(r,"class","icon navbar-icon svelte-1mz4axq"),b(i,"href","assets/sprite_icons.svg#square"),b(o,"class","icon navbar-icon svelte-1mz4axq"),b(u,"href","assets/sprite_icons.svg#square"),b(a,"class","icon navbar-icon svelte-1mz4axq"),b(y,"href","assets/sprite_icons.svg#square"),b(v,"class","icon navbar-icon svelte-1mz4axq"),b(_,"href","assets/sprite_icons.svg#square"),b(k,"class","icon navbar-icon svelte-1mz4axq"),b(P,"href","assets/sprite_icons.svg#square"),b(O,"class","icon navbar-icon svelte-1mz4axq"),b(j,"href","assets/sprite_icons.svg#square"),b(S,"class","icon navbar-icon svelte-1mz4axq"),b(n,"id","navbar"),b(n,"class","is-flex is-justify-content-center svelte-1mz4axq")},m(t,p){g(t,n,p),f(n,r),f(r,c),f(n,s),f(n,o),f(o,i),f(n,l),f(n,a),f(a,u),f(n,d),f(n,v),f(v,y),f(n,x),f(n,k),f(k,_),f(n,N),f(n,O),f(O,P),f(n,E),f(n,S),f(S,j),q||(A=w(r,"click",e[0]),q=!0)},p:t,i:t,o:t,d(t){t&&p(n),q=!1,A()}}}function lt(t){return[function(){nt.set(et.PAUSED)}]}class at extends Q{constructor(t){super(),K(this,t,lt,it,s,{})}}function ut(e){let n;return{c(){n=h("div"),n.innerHTML="<p>JON / Ayria :</p>",b(n,"class","is-flex header svelte-cjqldj")},m(t,e){g(t,n,e)},p:t,i:t,o:t,d(t){t&&p(n)}}}class dt extends Q{constructor(t){super(),K(this,t,null,ut,s,{})}}const ft=X({},(function(t){const e=Array.from(Array(6).keys()).map((async t=>{const e=await fetch(`chapters/chapitre${String(t+1).padStart(2,"0")}.json`);if(e.ok){const t=await e.text();return JSON.parse(t)}throw new Error(`Impossible de lire le scénario n°${String(t+1).padStart(2,"0")}`)}));return Promise.all(e).then((e=>{const n=e.reduce(((t,e)=>Object.assign(Object.assign({},t),{[e.metadata.chapter]:e.dialogNodes})),{});t(n)})).catch((e=>{t({error:e.message})})),function(){}}));function gt(t,e,n){const r=t.slice();return r[22]=e[n],r}function pt(t,e,n){const r=t.slice();return r[25]=e[n],r}function ht(e){let n;return{c(){n=h("p"),n.textContent="Chargement...",b(n,"class","svelte-1wyktwc")},m(t,e){g(t,n,e)},p:t,d(t){t&&p(n)}}}function mt(t){let e,n,r,c,s,o,i,l,a,u=[],d=new Map,m=[],v=new Map,w=t[3];const x=t=>t[25];for(let e=0;e<w.length;e+=1){let n=pt(t,w,e),r=x(n);d.set(r,u[e]=bt(r,n))}let _=t[7];const N=t=>t[22];for(let e=0;e<_.length;e+=1){let n=gt(t,_,e),r=N(n);v.set(r,m[e]=Ot(r,n))}let O=t[4]&&Pt(t),P=t[5]&&Et(t);return{c(){e=h("div");for(let t=0;t<u.length;t+=1)u[t].c();n=$(),r=h("div"),r.innerHTML='<p class="svelte-1wyktwc">...</p>',c=$(),s=h("div"),o=h("div");for(let t=0;t<m.length;t+=1)m[t].c();i=$(),O&&O.c(),l=$(),P&&P.c(),a=y(),b(r,"id","typing-container"),b(r,"class","svelte-1wyktwc"),k(r,"is-hidden",!t[8]),k(r,"npc1",t[9]),k(r,"player",t[10]),b(e,"id","dialog-container"),b(e,"class","svelte-1wyktwc"),b(o,"class","player svelte-1wyktwc"),k(o,"is-inline-flex",t[7].reduce(t[16],!1)),b(s,"id","answer-container"),b(s,"class","svelte-1wyktwc")},m(t,d){g(t,e,d);for(let t=0;t<u.length;t+=1)u[t].m(e,null);f(e,n),f(e,r),g(t,c,d),g(t,s,d),f(s,o);for(let t=0;t<m.length;t+=1)m[t].m(o,null);g(t,i,d),O&&O.m(t,d),g(t,l,d),P&&P.m(t,d),g(t,a,d)},p(t,c){15&c&&(w=t[3],u=F(u,c,x,1,t,w,d,e,L,bt,n,pt)),256&c&&k(r,"is-hidden",!t[8]),512&c&&k(r,"npc1",t[9]),1024&c&&k(r,"player",t[10]),8327&c&&(_=t[7],m=F(m,c,N,1,t,_,v,o,L,Ot,null,gt)),133&c&&k(o,"is-inline-flex",t[7].reduce(t[16],!1)),t[4]?O?O.p(t,c):(O=Pt(t),O.c(),O.m(l.parentNode,l)):O&&(O.d(1),O=null),t[5]?P?P.p(t,c):(P=Et(t),P.c(),P.m(a.parentNode,a)):P&&(P.d(1),P=null)},d(t){t&&p(e);for(let t=0;t<u.length;t+=1)u[t].d();t&&p(c),t&&p(s);for(let t=0;t<m.length;t+=1)m[t].d();t&&p(i),O&&O.d(t),t&&p(l),P&&P.d(t),t&&p(a)}}}function vt(t){let e;function n(t,e){return t[0][t[2]][t[25]].text[t[1].language]instanceof Object?wt:yt}let r=n(t),c=r(t);return{c(){e=h("p"),c.c(),b(e,"class","svelte-1wyktwc")},m(t,n){g(t,e,n),c.m(e,null)},p(t,s){r===(r=n(t))&&c?c.p(t,s):(c.d(1),c=r(t),c&&(c.c(),c.m(e,null)))},d(t){t&&p(e),c.d()}}}function $t(t){let e,n,r;return{c(){e=h("img"),e.src!==(n=t[0][t[2]][t[25]].imagePath)&&b(e,"src",n),b(e,"alt",r=t[0][t[2]][t[25]].imageAlt),b(e,"class","svelte-1wyktwc")},m(t,n){g(t,e,n)},p(t,c){13&c&&e.src!==(n=t[0][t[2]][t[25]].imagePath)&&b(e,"src",n),13&c&&r!==(r=t[0][t[2]][t[25]].imageAlt)&&b(e,"alt",r)},d(t){t&&p(e)}}}function yt(t){let e,n=t[0][t[2]][t[25]].text[t[1].language]+"";return{c(){e=v(n)},m(t,n){g(t,e,n)},p(t,r){15&r&&n!==(n=t[0][t[2]][t[25]].text[t[1].language]+"")&&x(e,n)},d(t){t&&p(e)}}}function wt(t){let e,n=t[0][t[2]][t[25]].text[t[1].language][t[1].gender]+"";return{c(){e=v(n)},m(t,n){g(t,e,n)},p(t,r){15&r&&n!==(n=t[0][t[2]][t[25]].text[t[1].language][t[1].gender]+"")&&x(e,n)},d(t){t&&p(e)}}}function bt(t,e){let n;function r(t,e){return t[0][t[2]][t[25]].imagePath?$t:vt}let c=r(e),s=c(e);return{key:t,first:null,c(){n=h("div"),s.c(),b(n,"class","svelte-1wyktwc"),k(n,"npc1","NPC1"===e[0][e[2]][e[25]].character),k(n,"player","Player"===e[0][e[2]][e[25]].character),k(n,"narrator","Narrator"===e[0][e[2]][e[25]].character),this.first=n},m(t,e){g(t,n,e),s.m(n,null)},p(t,o){c===(c=r(e=t))&&s?s.p(e,o):(s.d(1),s=c(e),s&&(s.c(),s.m(n,null))),13&o&&k(n,"npc1","NPC1"===e[0][e[2]][e[25]].character),13&o&&k(n,"player","Player"===e[0][e[2]][e[25]].character),13&o&&k(n,"narrator","Narrator"===e[0][e[2]][e[25]].character)},d(t){t&&p(n),s.d()}}}function xt(t){let e,n,r,c;function s(t,e){return t[0][t[2]][t[22]].text[t[1].language]instanceof Object?Nt:_t}let o=s(t),i=o(t);function l(){return t[15](t[22])}return{c(){e=h("p"),i.c(),n=$(),b(e,"class","choice svelte-1wyktwc")},m(t,s){g(t,e,s),i.m(e,null),f(e,n),r||(c=w(e,"click",l),r=!0)},p(r,c){o===(o=s(t=r))&&i?i.p(t,c):(i.d(1),i=o(t),i&&(i.c(),i.m(e,n)))},d(t){t&&p(e),i.d(),r=!1,c()}}}function kt(t){let e,n,r,c,s;function o(){return t[14](t[22])}return{c(){e=h("img"),e.src!==(n=t[0][t[2]][t[22]].imagePath)&&b(e,"src",n),b(e,"alt",r=t[0][t[2]][t[22]].imageAlt),b(e,"class","svelte-1wyktwc")},m(t,n){g(t,e,n),c||(s=w(e,"click",o),c=!0)},p(c,s){t=c,133&s&&e.src!==(n=t[0][t[2]][t[22]].imagePath)&&b(e,"src",n),133&s&&r!==(r=t[0][t[2]][t[22]].imageAlt)&&b(e,"alt",r)},d(t){t&&p(e),c=!1,s()}}}function _t(t){let e,n=t[0][t[2]][t[22]].text[t[1].language]+"";return{c(){e=v(n)},m(t,n){g(t,e,n)},p(t,r){135&r&&n!==(n=t[0][t[2]][t[22]].text[t[1].language]+"")&&x(e,n)},d(t){t&&p(e)}}}function Nt(t){let e,n=t[0][t[2]][t[22]].text[t[1].language][t[1].gender]+"";return{c(){e=v(n)},m(t,n){g(t,e,n)},p(t,r){135&r&&n!==(n=t[0][t[2]][t[22]].text[t[1].language][t[1].gender]+"")&&x(e,n)},d(t){t&&p(e)}}}function Ot(t,e){let n,r;function c(t,e){return t[0][t[2]][t[22]].imagePath?kt:xt}let s=c(e),o=s(e);return{key:t,first:null,c(){n=y(),o.c(),r=y(),this.first=n},m(t,e){g(t,n,e),o.m(t,e),g(t,r,e)},p(t,n){s===(s=c(e=t))&&o?o.p(e,n):(o.d(1),o=s(e),o&&(o.c(),o.m(r.parentNode,r)))},d(t){t&&p(n),o.d(t),t&&p(r)}}}function Pt(t){let e,n,r,c,s,o,i;return{c(){e=h("div"),n=h("p"),r=v("Continuer (Chapitre "),c=v(t[6]),s=v(") →"),b(n,"class","svelte-1wyktwc"),b(e,"id","next-chapter-container"),b(e,"class","svelte-1wyktwc")},m(l,a){g(l,e,a),f(e,n),f(n,r),f(n,c),f(n,s),o||(i=w(e,"click",t[12]),o=!0)},p(t,e){64&e&&x(c,t[6])},d(t){t&&p(e),o=!1,i()}}}function Et(e){let n,r,c;return{c(){n=h("div"),n.innerHTML='<p class="svelte-1wyktwc">Fin de l&#39;Aventure (Résultats) →</p>',b(n,"id","next-chapter-container"),b(n,"class","svelte-1wyktwc")},m(t,s){g(t,n,s),r||(c=w(n,"click",e[11]),r=!0)},p:t,d(t){t&&p(n),r=!1,c()}}}function St(e){let n;function r(t,e){return t[0][t[2]]?mt:ht}let c=r(e),s=c(e);return{c(){n=h("div"),s.c(),b(n,"id","dialog-container-background"),b(n,"class","svelte-1wyktwc")},m(t,e){g(t,n,e),s.m(n,null)},p(t,[e]){c===(c=r(t))&&s?s.p(t,e):(s.d(1),s=c(t),s&&(s.c(),s.m(n,null)))},i:t,o:t,d(t){t&&p(n),s.d()}}}function jt(t,e,n){let r,c,s;i(t,ft,(t=>n(0,r=t))),i(t,Z,(t=>n(1,c=t))),i(t,tt,(t=>n(2,s=t)));var o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(c,s){function o(t){try{l(r.next(t))}catch(t){s(t)}}function i(t){try{l(r.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?c(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,i)}l((r=r.apply(t,e||[])).next())}))};let a,u,d=!1,f=!1,g=[],p=!1,h=!1,m=!1;function v(t,e=!1){var o;const i=e?["1"]:r[s][t].nextNodes,a=Object.entries(r[s]).filter((([t,e])=>i.includes(e.id))).map((([t,e])=>e));r[s][t||"1"].character;const $=a.reduce(((t,e)=>"Player"===t||"Player"===e.character?"Player":t),(null===(o=a[0])||void 0===o?void 0:o.character)||"NPC1");if(n(9,h="NPC1"===$),n(10,m="Player"===$),0===a.length){const t=Object.keys(r).reduce(((t,e)=>Number(e)>t?Number(e):t),1);n(6,u=Number(s)+1),t>=u?n(4,d=!0):n(5,f=!0)}else if("Player"===$&&a.length>1){setTimeout((()=>{!function(t){n(7,g=t)}(i)}),1e3)}else if("Narrator"===$)l(Z,c.nodes[s]=[...c.nodes[s]||[],i[0]],c),v(i[0]);else{setTimeout((()=>{n(8,p=!0);setTimeout((()=>{n(8,p=!1),l(Z,c.nodes[s]=[...c.nodes[s]||[],i[0]],c),v(i[0])}),1)}),1)}}function $(t){n(7,g=[]),l(Z,c.nodes[s]=[...c.nodes[s]||[],t],c),"Player"===r[s][t].character&&l(Z,c.attribution=Object.keys(c.attribution).reduce(((e,[n,c])=>Object.assign(Object.assign({},e),{[n]:c+r[s][t].attribution[n]})),{leader:0,bricoleur:0,coequipier:0,planificateur:0,idealiste:0,creatif:0,audacieux:0,explorateur:0}),c),v(t)}function y(){if(Object.keys(r).length>0){const t=a[a.length-1];v(t,void 0===t)}else setTimeout(y,10)}var w;O((()=>o(void 0,void 0,void 0,(function*(){y()})))),w=()=>{window.scrollTo(0,document.body.scrollHeight)},N().$$.after_update.push(w);return t.$$.update=()=>{1&t.$$.dirty&&Object.keys(r).includes("error")&&nt.set(et.ERROR),6&t.$$.dirty&&n(3,a=c.nodes[s]||[])},[r,c,s,a,d,f,u,g,p,h,m,function(){nt.set(et.FINISHED)},function(){return o(this,void 0,void 0,(function*(){l(Z,c.nodes[String(u)]=[],c),n(4,d=!1),yield(C(),q),v(void 0,!0)}))},$,t=>$(t),t=>$(t),(t,e)=>t||r[s][e].imagePath]}class qt extends Q{constructor(t){super(),K(this,t,jt,St,s,{})}}function At(e){let n,r,c,s,o,i,l;return r=new at({}),s=new dt({}),i=new qt({}),{c(){n=h("main"),B(r.$$.fragment),c=$(),B(s.$$.fragment),o=$(),B(i.$$.fragment),b(n,"class","svelte-12r0jps")},m(t,e){g(t,n,e),J(r,n,null),f(n,c),J(s,n,null),f(n,o),J(i,n,null),l=!0},p:t,i(t){l||(U(r.$$.fragment,t),U(s.$$.fragment,t),U(i.$$.fragment,t),l=!0)},o(t){G(r.$$.fragment,t),G(s.$$.fragment,t),G(i.$$.fragment,t),l=!1},d(t){t&&p(n),V(r),V(s),V(i)}}}class Ct extends Q{constructor(t){super(),K(this,t,null,At,s,{})}}function Tt(e){let n;return{c(){n=h("p"),n.textContent="Result Screen!"},m(t,e){g(t,n,e)},p:t,i:t,o:t,d(t){t&&p(n)}}}class It extends Q{constructor(t){super(),K(this,t,null,Tt,s,{})}}function Rt(e){let n,r,c,s,o,i,l,a,u,d;return{c(){n=h("main"),r=h("h1"),r.textContent="Voyage au bout du monde",c=$(),s=h("h3"),s.textContent="Une aventure d'introspection",o=$(),i=h("div"),l=h("p"),a=v("Une erreur est survenue lors du chargement des chapitres du jeu: "),u=h("br"),d=v(e[0]),b(r,"class","svelte-hxqzcc"),b(l,"class","error svelte-hxqzcc"),b(i,"class","error-container svelte-hxqzcc"),b(n,"class","svelte-hxqzcc")},m(t,e){g(t,n,e),f(n,r),f(n,c),f(n,s),f(n,o),f(n,i),f(i,l),f(l,a),f(l,u),f(l,d)},p:t,i:t,o:t,d(t){t&&p(n)}}}function zt(t,e,n){let r;i(t,ft,(t=>n(1,r=t)));return[r.error]}class Mt extends Q{constructor(t){super(),K(this,t,zt,Rt,s,{})}}function Dt(t){let e,n;return e=new ot({}),{c(){B(e.$$.fragment)},m(t,r){J(e,t,r),n=!0},i(t){n||(U(e.$$.fragment,t),n=!0)},o(t){G(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function Ht(t){let e,n;return e=new Mt({}),{c(){B(e.$$.fragment)},m(t,r){J(e,t,r),n=!0},i(t){n||(U(e.$$.fragment,t),n=!0)},o(t){G(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function Ut(t){let e,n;return e=new It({}),{c(){B(e.$$.fragment)},m(t,r){J(e,t,r),n=!0},i(t){n||(U(e.$$.fragment,t),n=!0)},o(t){G(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function Gt(t){let e,n;return e=new Ct({}),{c(){B(e.$$.fragment)},m(t,r){J(e,t,r),n=!0},i(t){n||(U(e.$$.fragment,t),n=!0)},o(t){G(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function Lt(t){let e,n,c,s;const o=[Gt,Ut,Ht,Dt],i=[];function l(t,e){return t[0]?0:t[1]?1:t[2]?2:3}return e=l(t),n=i[e]=o[e](t),{c(){n.c(),c=y()},m(t,n){i[e].m(t,n),g(t,c,n),s=!0},p(t,[s]){let a=e;e=l(t),e!==a&&(H={r:0,c:[],p:H},G(i[a],1,1,(()=>{i[a]=null})),H.r||r(H.c),H=H.p,n=i[e],n||(n=i[e]=o[e](t),n.c()),U(n,1),n.m(c.parentNode,c))},i(t){s||(U(n),s=!0)},o(t){G(n),s=!1},d(t){i[e].d(t),t&&p(c)}}}function Ft(t,e,n){let r;i(t,nt,(t=>n(3,r=t)));let c=!1,s=!1,o=!1;return O((()=>{const t=window.localStorage;t&&t.getItem("state")&&Z.set(JSON.parse(t.getItem("state")))})),t.$$.update=()=>{8&t.$$.dirty&&n(0,c=r===et.ONGOING),8&t.$$.dirty&&n(1,s=r===et.FINISHED),8&t.$$.dirty&&n(2,o=r===et.ERROR)},[c,s,o,r]}return new class extends Q{constructor(t){super(),K(this,t,Ft,Lt,s,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
