var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function r(e){e.forEach(t)}function s(e){return"function"==typeof e}function c(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function o(t,...n){if(null==t)return e;const r=t.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function i(e,t,n){e.$$.on_destroy.push(o(t,n))}function a(e,t,n=t){return e.set(n),t}let l,u=!1;function d(e,t,n,r){for(;e<t;){const s=e+(t-e>>1);n(s)<=r?e=s+1:t=s}return e}function f(e,t){u?(!function(e){if(e.hydrate_init)return;e.hydrate_init=!0;const t=e.childNodes,n=new Int32Array(t.length+1),r=new Int32Array(t.length);n[0]=-1;let s=0;for(let e=0;e<t.length;e++){const c=d(1,s+1,(e=>t[n[e]].claim_order),t[e].claim_order)-1;r[e]=n[c]+1;const o=c+1;n[o]=e,s=Math.max(o,s)}const c=[],o=[];let i=t.length-1;for(let e=n[s]+1;0!=e;e=r[e-1]){for(c.push(t[e-1]);i>=e;i--)o.push(t[i]);i--}for(;i>=0;i--)o.push(t[i]);c.reverse(),o.sort(((e,t)=>e.claim_order-t.claim_order));for(let t=0,n=0;t<o.length;t++){for(;n<c.length&&o[t].claim_order>=c[n].claim_order;)n++;const r=n<c.length?c[n]:null;e.insertBefore(o[t],r)}}(e),(void 0===e.actual_end_child||null!==e.actual_end_child&&e.actual_end_child.parentElement!==e)&&(e.actual_end_child=e.firstChild),t!==e.actual_end_child?e.insertBefore(t,e.actual_end_child):e.actual_end_child=t.nextSibling):t.parentNode!==e&&e.appendChild(t)}function g(e,t,n){u&&!n?f(e,t):(t.parentNode!==e||n&&t.nextSibling!==n)&&e.insertBefore(t,n||null)}function h(e){e.parentNode.removeChild(e)}function p(e){return document.createElement(e)}function m(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function v(e){return document.createTextNode(e)}function $(){return v(" ")}function b(){return v("")}function y(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function x(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function _(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function w(e,t,n){e.classList[n?"add":"remove"](t)}function k(e){l=e}function N(){if(!l)throw new Error("Function called outside component initialization");return l}function q(e){N().$$.on_mount.push(e)}const O=[],E=[],S=[],P=[],j=Promise.resolve();let A=!1;function C(){A||(A=!0,j.then(R))}function T(e){S.push(e)}let I=!1;const M=new Set;function R(){if(!I){I=!0;do{for(let e=0;e<O.length;e+=1){const t=O[e];k(t),z(t.$$)}for(k(null),O.length=0;E.length;)E.pop()();for(let e=0;e<S.length;e+=1){const t=S[e];M.has(t)||(M.add(t),t())}S.length=0}while(O.length);for(;P.length;)P.pop()();A=!1,I=!1,M.clear()}}function z(e){if(null!==e.fragment){e.update(),r(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(T)}}const D=new Set;let H;function U(e,t){e&&e.i&&(D.delete(e),e.i(t))}function G(e,t,n,r){if(e&&e.o){if(D.has(e))return;D.add(e),H.c.push((()=>{D.delete(e),r&&(n&&e.d(1),r())})),e.o(t)}}function L(e,t){e.d(1),t.delete(e.key)}function F(e,t,n,r,s,c,o,i,a,l,u,d){let f=e.length,g=c.length,h=f;const p={};for(;h--;)p[e[h].key]=h;const m=[],v=new Map,$=new Map;for(h=g;h--;){const e=d(s,c,h),i=n(e);let a=o.get(i);a?r&&a.p(e,t):(a=l(i,e),a.c()),v.set(i,m[h]=a),i in p&&$.set(i,Math.abs(h-p[i]))}const b=new Set,y=new Set;function x(e){U(e,1),e.m(i,u),o.set(e.key,e),u=e.first,g--}for(;f&&g;){const t=m[g-1],n=e[f-1],r=t.key,s=n.key;t===n?(u=t.first,f--,g--):v.has(s)?!o.has(r)||b.has(r)?x(t):y.has(s)?f--:$.get(r)>$.get(s)?(y.add(r),x(t)):(b.add(s),f--):(a(n,o),f--)}for(;f--;){const t=e[f];v.has(t.key)||a(t,o)}for(;g;)x(m[g-1]);return m}function B(e){e&&e.c()}function J(e,n,c,o){const{fragment:i,on_mount:a,on_destroy:l,after_update:u}=e.$$;i&&i.m(n,c),o||T((()=>{const n=a.map(t).filter(s);l?l.push(...n):r(n),e.$$.on_mount=[]})),u.forEach(T)}function V(e,t){const n=e.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function K(t,s,c,o,i,a,d=[-1]){const f=l;k(t);const g=t.$$={fragment:null,ctx:null,props:a,update:e,not_equal:i,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:s.context||[]),callbacks:n(),dirty:d,skip_bound:!1};let p=!1;if(g.ctx=c?c(t,s.props||{},((e,n,...r)=>{const s=r.length?r[0]:n;return g.ctx&&i(g.ctx[e],g.ctx[e]=s)&&(!g.skip_bound&&g.bound[e]&&g.bound[e](s),p&&function(e,t){-1===e.$$.dirty[0]&&(O.push(e),C(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(t,e)),n})):[],g.update(),p=!0,r(g.before_update),g.fragment=!!o&&o(g.ctx),s.target){if(s.hydrate){u=!0;const e=function(e){return Array.from(e.childNodes)}(s.target);g.fragment&&g.fragment.l(e),e.forEach(h)}else g.fragment&&g.fragment.c();s.intro&&U(t.$$.fragment),J(t,s.target,s.anchor,s.customElement),u=!1,R()}k(f)}class Q{$destroy(){V(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const W=[];function X(e,t){return{subscribe:Y(e,t).subscribe}}function Y(t,n=e){let r;const s=[];function o(e){if(c(t,e)&&(t=e,r)){const e=!W.length;for(let e=0;e<s.length;e+=1){const n=s[e];n[1](),W.push(n,t)}if(e){for(let e=0;e<W.length;e+=2)W[e][0](W[e+1]);W.length=0}}}return{set:o,update:function(e){o(e(t))},subscribe:function(c,i=e){const a=[c,i];return s.push(a),1===s.length&&(r=n(o)||e),c(t),()=>{const e=s.indexOf(a);-1!==e&&s.splice(e,1),0===s.length&&(r(),r=null)}}}}const Z=Y({gender:"",language:"fr",attribution:{leader:0,bricoleur:0,coequipier:0,planificateur:0,idealiste:0,creatif:0,audacieux:0,explorateur:0},nodes:{}}),ee=function(t,n,c){const i=!Array.isArray(t),a=i?[t]:t,l=n.length<2;return X(c,(t=>{let c=!1;const u=[];let d=0,f=e;const g=()=>{if(d)return;f();const r=n(i?u[0]:u,t);l?t(r):f=s(r)?r:e},h=a.map(((e,t)=>o(e,(e=>{u[t]=e,d&=~(1<<t),c&&g()}),(()=>{d|=1<<t}))));return c=!0,g(),function(){r(h),f()}}))}(Z,(e=>Object.keys(e.nodes).reduce(((e,t)=>t>e?t:e),"1")));var te;!function(e){e[e.UNSTARTED=0]="UNSTARTED",e[e.ONGOING=1]="ONGOING",e[e.PAUSED=2]="PAUSED",e[e.FINISHED=3]="FINISHED",e[e.ERROR=4]="ERROR"}(te||(te={}));const ne=Y(te.UNSTARTED);function re(e){let t,n,r;return{c(){t=p("button"),t.textContent="Continuer",x(t,"class","svelte-1wkgo86"),w(t,"pressed",!e[0])},m(s,c){g(s,t,c),n||(r=y(t,"click",e[4]),n=!0)},p(e,n){1&n&&w(t,"pressed",!e[0])},d(e){e&&h(t),n=!1,r()}}}function se(t){let n,s,c,o,i,a,l,u,d,m,b,_,k,N,q,O,E=t[1]&&t[2]&&re(t);return{c(){n=p("main"),s=p("h1"),s.textContent="Voyage au bout du monde",c=$(),o=p("h3"),o.textContent="Une aventure d'introspection",i=$(),a=p("div"),E&&E.c(),l=$(),u=p("button"),u.textContent="Nouvelle Partie",d=$(),m=p("div"),b=v("Protagoniste:\n    "),_=p("button"),_.innerHTML='<svg class="icon svelte-1wkgo86"><use href="assets/sprite_icons.svg#mars"></use></svg>\n      Masculin',k=$(),N=p("button"),N.innerHTML='<svg class="icon svelte-1wkgo86"><use href="assets/sprite_icons.svg#venus"></use></svg>\n      FÃ©minin',x(s,"class","svelte-1wkgo86"),x(u,"class","svelte-1wkgo86"),w(u,"pressed",t[0]),x(a,"class","is-grid svelte-1wkgo86"),x(_,"class","svelte-1wkgo86"),x(N,"class","svelte-1wkgo86"),x(m,"class","is-grid protagoniste svelte-1wkgo86"),w(m,"is-hidden",!t[0]),x(n,"class","svelte-1wkgo86")},m(e,r){g(e,n,r),f(n,s),f(n,c),f(n,o),f(n,i),f(n,a),E&&E.m(a,null),f(a,l),f(a,u),f(n,d),f(n,m),f(m,b),f(m,_),f(m,k),f(m,N),q||(O=[y(u,"click",t[3]),y(_,"click",t[8]),y(N,"click",t[9])],q=!0)},p(e,[t]){e[1]&&e[2]?E?E.p(e,t):(E=re(e),E.c(),E.m(a,l)):E&&(E.d(1),E=null),1&t&&w(u,"pressed",e[0]),1&t&&w(m,"is-hidden",!e[0])},i:e,o:e,d(e){e&&h(n),E&&E.d(),q=!1,r(O)}}}function ce(e,t,n){let r,s;var c;i(e,ne,(e=>n(10,r=e))),i(e,Z,(e=>n(7,s=e)));let o,l=!1,u=!1;function d(){a(ne,r=te.ONGOING,r)}function f(e){a(Z,s.gender=e,s),a(Z,s.nodes={},s),d()}return e.$$.update=()=>{128&e.$$.dirty&&n(1,u=0===Object.entries(s.nodes).length),192&e.$$.dirty&&n(2,o=((null===n(6,c=null==s?void 0:s.gender)||void 0===c?void 0:c.length)||0)>0)},[l,u,o,function(){n(0,l=!l)},d,f,c,s,()=>f("m"),()=>f("f")]}class oe extends Q{constructor(e){super(),K(this,e,ce,se,c,{})}}function ie(t){let n,r,s,c,o,i,a,l,u,d,v,b,_,w,k,N,q,O,E,S,P,j,A;return{c(){n=p("div"),r=m("svg"),s=m("use"),c=$(),o=m("svg"),i=m("use"),a=$(),l=m("svg"),u=m("use"),d=$(),v=m("svg"),b=m("use"),_=$(),w=m("svg"),k=m("use"),N=$(),q=m("svg"),O=m("use"),E=$(),S=m("svg"),P=m("use"),x(s,"href","assets/sprite_icons.svg#home"),x(r,"class","icon navbar-icon svelte-1mz4axq"),x(i,"href","assets/sprite_icons.svg#square"),x(o,"class","icon navbar-icon svelte-1mz4axq"),x(u,"href","assets/sprite_icons.svg#square"),x(l,"class","icon navbar-icon svelte-1mz4axq"),x(b,"href","assets/sprite_icons.svg#square"),x(v,"class","icon navbar-icon svelte-1mz4axq"),x(k,"href","assets/sprite_icons.svg#square"),x(w,"class","icon navbar-icon svelte-1mz4axq"),x(O,"href","assets/sprite_icons.svg#square"),x(q,"class","icon navbar-icon svelte-1mz4axq"),x(P,"href","assets/sprite_icons.svg#square"),x(S,"class","icon navbar-icon svelte-1mz4axq"),x(n,"id","navbar"),x(n,"class","is-flex is-justify-content-center svelte-1mz4axq")},m(e,h){g(e,n,h),f(n,r),f(r,s),f(n,c),f(n,o),f(o,i),f(n,a),f(n,l),f(l,u),f(n,d),f(n,v),f(v,b),f(n,_),f(n,w),f(w,k),f(n,N),f(n,q),f(q,O),f(n,E),f(n,S),f(S,P),j||(A=y(r,"click",t[0]),j=!0)},p:e,i:e,o:e,d(e){e&&h(n),j=!1,A()}}}function ae(e){return[function(){ne.set(te.PAUSED)}]}class le extends Q{constructor(e){super(),K(this,e,ae,ie,c,{})}}function ue(t){let n;return{c(){n=p("div"),n.innerHTML="<p>JON / Ayria :</p>",x(n,"class","is-flex header svelte-cjqldj")},m(e,t){g(e,n,t)},p:e,i:e,o:e,d(e){e&&h(n)}}}class de extends Q{constructor(e){super(),K(this,e,null,ue,c,{})}}const fe=X({},(function(e){const t=Array.from(Array(6).keys()).map((async e=>{const t=await fetch(`chapters/chapitre${String(e+1).padStart(2,"0")}.json`);if(t.ok){const e=await t.text();return JSON.parse(e)}throw new Error(`Impossible de lire le scÃ©nario nÂ°${String(e+1).padStart(2,"0")}`)}));return Promise.all(t).then((t=>{const n=t.reduce(((e,t)=>Object.assign(Object.assign({},e),{[t.metadata.chapter]:t.dialogNodes})),{});e(n)})).catch((t=>{e({error:t.message})})),function(){}}));function ge(e,t,n){const r=e.slice();return r[20]=t[n],r}function he(e,t,n){const r=e.slice();return r[23]=t[n],r}function pe(t){let n;return{c(){n=p("p"),n.textContent="Chargement...",x(n,"class","svelte-dq9n98")},m(e,t){g(e,n,t)},p:e,d(e){e&&h(n)}}}function me(e){let t,n,r,s,c,o,i,a,l,u=[],d=new Map,m=[],v=new Map,y=e[3];const _=e=>e[23];for(let t=0;t<y.length;t+=1){let n=he(e,y,t),r=_(n);d.set(r,u[t]=be(r,n))}let k=e[7];const N=e=>e[20];for(let t=0;t<k.length;t+=1){let n=ge(e,k,t),r=N(n);v.set(r,m[t]=we(r,n))}let q=e[4]&&ke(e),O=e[5]&&Ne(e);return{c(){t=p("div");for(let e=0;e<u.length;e+=1)u[e].c();n=$(),r=p("div"),r.innerHTML='<p class="svelte-dq9n98">...</p>',s=$(),c=p("div"),o=p("div");for(let e=0;e<m.length;e+=1)m[e].c();i=$(),q&&q.c(),a=$(),O&&O.c(),l=b(),x(r,"id","typing-container"),x(r,"class","svelte-dq9n98"),w(r,"is-hidden",!e[8]),w(r,"npc1",e[9]),w(r,"player",e[10]),x(t,"id","dialog-container"),x(t,"class","svelte-dq9n98"),x(o,"class","player svelte-dq9n98"),x(c,"id","answer-container"),x(c,"class","svelte-dq9n98")},m(e,d){g(e,t,d);for(let e=0;e<u.length;e+=1)u[e].m(t,null);f(t,n),f(t,r),g(e,s,d),g(e,c,d),f(c,o);for(let e=0;e<m.length;e+=1)m[e].m(o,null);g(e,i,d),q&&q.m(e,d),g(e,a,d),O&&O.m(e,d),g(e,l,d)},p(e,s){15&s&&(y=e[3],u=F(u,s,_,1,e,y,d,t,L,be,n,he)),256&s&&w(r,"is-hidden",!e[8]),512&s&&w(r,"npc1",e[9]),1024&s&&w(r,"player",e[10]),8327&s&&(k=e[7],m=F(m,s,N,1,e,k,v,o,L,we,null,ge)),e[4]?q?q.p(e,s):(q=ke(e),q.c(),q.m(a.parentNode,a)):q&&(q.d(1),q=null),e[5]?O?O.p(e,s):(O=Ne(e),O.c(),O.m(l.parentNode,l)):O&&(O.d(1),O=null)},d(e){e&&h(t);for(let e=0;e<u.length;e+=1)u[e].d();e&&h(s),e&&h(c);for(let e=0;e<m.length;e+=1)m[e].d();e&&h(i),q&&q.d(e),e&&h(a),O&&O.d(e),e&&h(l)}}}function ve(e){let t,n=e[0][e[2]][e[23]].text[e[1].language]+"";return{c(){t=v(n)},m(e,n){g(e,t,n)},p(e,r){15&r&&n!==(n=e[0][e[2]][e[23]].text[e[1].language]+"")&&_(t,n)},d(e){e&&h(t)}}}function $e(e){let t,n=e[0][e[2]][e[23]].text[e[1].language][e[1].gender]+"";return{c(){t=v(n)},m(e,n){g(e,t,n)},p(e,r){15&r&&n!==(n=e[0][e[2]][e[23]].text[e[1].language][e[1].gender]+"")&&_(t,n)},d(e){e&&h(t)}}}function be(e,t){let n,r;function s(e,t){return e[0][e[2]][e[23]].text[e[1].language]instanceof Object?$e:ve}let c=s(t),o=c(t);return{key:e,first:null,c(){n=p("div"),r=p("p"),o.c(),x(r,"class","svelte-dq9n98"),x(n,"class","svelte-dq9n98"),w(n,"npc1","NPC1"===t[0][t[2]][t[23]].character),w(n,"player","Player"===t[0][t[2]][t[23]].character),w(n,"narrator","Narrator"===t[0][t[2]][t[23]].character),this.first=n},m(e,t){g(e,n,t),f(n,r),o.m(r,null)},p(e,i){c===(c=s(t=e))&&o?o.p(t,i):(o.d(1),o=c(t),o&&(o.c(),o.m(r,null))),13&i&&w(n,"npc1","NPC1"===t[0][t[2]][t[23]].character),13&i&&w(n,"player","Player"===t[0][t[2]][t[23]].character),13&i&&w(n,"narrator","Narrator"===t[0][t[2]][t[23]].character)},d(e){e&&h(n),o.d()}}}function ye(e){let t,n,r;return{c(){t=p("img"),t.src!==(n=e[0][e[2]][e[20]].imagePath)&&x(t,"src",n),x(t,"alt",r=e[0][e[2]][e[20]].imageAlt),x(t,"class","svelte-dq9n98")},m(e,n){g(e,t,n)},p(e,s){133&s&&t.src!==(n=e[0][e[2]][e[20]].imagePath)&&x(t,"src",n),133&s&&r!==(r=e[0][e[2]][e[20]].imageAlt)&&x(t,"alt",r)},d(e){e&&h(t)}}}function xe(e){let t,n=e[0][e[2]][e[20]].text[e[1].language]+"";return{c(){t=v(n)},m(e,n){g(e,t,n)},p(e,r){135&r&&n!==(n=e[0][e[2]][e[20]].text[e[1].language]+"")&&_(t,n)},d(e){e&&h(t)}}}function _e(e){let t,n=e[0][e[2]][e[20]].text[e[1].language][e[1].gender]+"";return{c(){t=v(n)},m(e,n){g(e,t,n)},p(e,r){135&r&&n!==(n=e[0][e[2]][e[20]].text[e[1].language][e[1].gender]+"")&&_(t,n)},d(e){e&&h(t)}}}function we(e,t){let n,r,s,c,o,i,a=t[0][t[2]][t[20]].imagePath&&ye(t);function l(e,t){return e[0][e[2]][e[20]].text[e[1].language]instanceof Object?_e:xe}let u=l(t),d=u(t);function m(){return t[14](t[20])}return{key:e,first:null,c(){n=p("div"),a&&a.c(),r=$(),s=p("p"),d.c(),c=$(),x(s,"class","choice svelte-dq9n98"),x(n,"class","answer svelte-dq9n98"),this.first=n},m(e,t){g(e,n,t),a&&a.m(n,null),f(n,r),f(n,s),d.m(s,null),f(n,c),o||(i=y(s,"click",m),o=!0)},p(e,c){(t=e)[0][t[2]][t[20]].imagePath?a?a.p(t,c):(a=ye(t),a.c(),a.m(n,r)):a&&(a.d(1),a=null),u===(u=l(t))&&d?d.p(t,c):(d.d(1),d=u(t),d&&(d.c(),d.m(s,null)))},d(e){e&&h(n),a&&a.d(),d.d(),o=!1,i()}}}function ke(e){let t,n,r,s,c,o,i;return{c(){t=p("div"),n=p("p"),r=v("Continuer (Chapitre "),s=v(e[6]),c=v(") â"),x(n,"class","svelte-dq9n98"),x(t,"id","next-chapter-container"),x(t,"class","svelte-dq9n98")},m(a,l){g(a,t,l),f(t,n),f(n,r),f(n,s),f(n,c),o||(i=y(t,"click",e[12]),o=!0)},p(e,t){64&t&&_(s,e[6])},d(e){e&&h(t),o=!1,i()}}}function Ne(t){let n,r,s;return{c(){n=p("div"),n.innerHTML='<p class="svelte-dq9n98">Fin de l&#39;Aventure (RÃ©sultats) â</p>',x(n,"id","next-chapter-container"),x(n,"class","svelte-dq9n98")},m(e,c){g(e,n,c),r||(s=y(n,"click",t[11]),r=!0)},p:e,d(e){e&&h(n),r=!1,s()}}}function qe(t){let n;function r(e,t){return e[0][e[2]]?me:pe}let s=r(t),c=s(t);return{c(){n=p("div"),c.c(),x(n,"id","dialog-container-background"),x(n,"class","svelte-dq9n98")},m(e,t){g(e,n,t),c.m(n,null)},p(e,[t]){s===(s=r(e))&&c?c.p(e,t):(c.d(1),c=s(e),c&&(c.c(),c.m(n,null)))},i:e,o:e,d(e){e&&h(n),c.d()}}}function Oe(e,t,n){let r,s,c;i(e,fe,(e=>n(0,r=e))),i(e,Z,(e=>n(1,s=e))),i(e,ee,(e=>n(2,c=e)));var o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(s,c){function o(e){try{a(r.next(e))}catch(e){c(e)}}function i(e){try{a(r.throw(e))}catch(e){c(e)}}function a(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,i)}a((r=r.apply(e,t||[])).next())}))};let l,u,d=!1,f=!1,g=[],h=!1,p=!1,m=!1;function v(e,t=!1){var o;const i=t?["1"]:r[c][e].nextNodes,l=Object.entries(r[c]).filter((([e,t])=>i.includes(t.id))).map((([e,t])=>t));r[c][e||"1"].character;const $=l.reduce(((e,t)=>"Player"===e||"Player"===t.character?"Player":e),(null===(o=l[0])||void 0===o?void 0:o.character)||"NPC1");if(n(9,p="NPC1"===$),n(10,m="Player"===$),0===l.length){const e=Object.keys(r).reduce(((e,t)=>Number(t)>e?Number(t):e),1);n(6,u=Number(c)+1),e>=u?n(4,d=!0):n(5,f=!0)}else if("Player"===$&&l.length>1){setTimeout((()=>{!function(e){n(7,g=e)}(i)}),1e3)}else if("Narrator"===$)a(Z,s.nodes[c]=[...s.nodes[c]||[],i[0]],s),v(i[0]);else{const e=Math.floor(251*Math.random()+500);setTimeout((()=>{n(8,h=!0);const e=Math.floor(1001*Math.random()+1e3);setTimeout((()=>{n(8,h=!1),a(Z,s.nodes[c]=[...s.nodes[c]||[],i[0]],s),v(i[0])}),e)}),e)}}function $(e){n(7,g=[]),a(Z,s.nodes[c]=[...s.nodes[c]||[],e],s),"Player"===r[c][e].character&&a(Z,s.attribution=Object.keys(s.attribution).reduce(((t,[n,s])=>Object.assign(Object.assign({},t),{[n]:s+r[c][e].attribution[n]})),{leader:0,bricoleur:0,coequipier:0,planificateur:0,idealiste:0,creatif:0,audacieux:0,explorateur:0}),s),v(e)}function b(){if(Object.keys(r).length>0){const e=l[l.length-1];v(e,void 0===e)}else setTimeout(b,10)}var y;q((()=>o(void 0,void 0,void 0,(function*(){b()})))),y=()=>{window.scrollTo(0,document.body.scrollHeight)},N().$$.after_update.push(y);return e.$$.update=()=>{1&e.$$.dirty&&Object.keys(r).includes("error")&&ne.set(te.ERROR),6&e.$$.dirty&&n(3,l=s.nodes[c]||[])},[r,s,c,l,d,f,u,g,h,p,m,function(){ne.set(te.FINISHED)},function(){return o(this,void 0,void 0,(function*(){a(Z,s.nodes[String(u)]=[],s),n(4,d=!1),yield(C(),j),v(void 0,!0)}))},$,e=>$(e)]}class Ee extends Q{constructor(e){super(),K(this,e,Oe,qe,c,{})}}function Se(t){let n,r,s,c,o,i,a;return r=new le({}),c=new de({}),i=new Ee({}),{c(){n=p("main"),B(r.$$.fragment),s=$(),B(c.$$.fragment),o=$(),B(i.$$.fragment),x(n,"class","svelte-12r0jps")},m(e,t){g(e,n,t),J(r,n,null),f(n,s),J(c,n,null),f(n,o),J(i,n,null),a=!0},p:e,i(e){a||(U(r.$$.fragment,e),U(c.$$.fragment,e),U(i.$$.fragment,e),a=!0)},o(e){G(r.$$.fragment,e),G(c.$$.fragment,e),G(i.$$.fragment,e),a=!1},d(e){e&&h(n),V(r),V(c),V(i)}}}class Pe extends Q{constructor(e){super(),K(this,e,null,Se,c,{})}}function je(t){let n;return{c(){n=p("p"),n.textContent="Result Screen!"},m(e,t){g(e,n,t)},p:e,i:e,o:e,d(e){e&&h(n)}}}class Ae extends Q{constructor(e){super(),K(this,e,null,je,c,{})}}function Ce(t){let n,r,s,c,o,i,a,l,u,d;return{c(){n=p("main"),r=p("h1"),r.textContent="Voyage au bout du monde",s=$(),c=p("h3"),c.textContent="Une aventure d'introspection",o=$(),i=p("div"),a=p("p"),l=v("Une erreur est survenue lors du chargement des chapitres du jeu: "),u=p("br"),d=v(t[0]),x(r,"class","svelte-hxqzcc"),x(a,"class","error svelte-hxqzcc"),x(i,"class","error-container svelte-hxqzcc"),x(n,"class","svelte-hxqzcc")},m(e,t){g(e,n,t),f(n,r),f(n,s),f(n,c),f(n,o),f(n,i),f(i,a),f(a,l),f(a,u),f(a,d)},p:e,i:e,o:e,d(e){e&&h(n)}}}function Te(e,t,n){let r;i(e,fe,(e=>n(1,r=e)));return[r.error]}class Ie extends Q{constructor(e){super(),K(this,e,Te,Ce,c,{})}}function Me(e){let t,n;return t=new oe({}),{c(){B(t.$$.fragment)},m(e,r){J(t,e,r),n=!0},i(e){n||(U(t.$$.fragment,e),n=!0)},o(e){G(t.$$.fragment,e),n=!1},d(e){V(t,e)}}}function Re(e){let t,n;return t=new Ie({}),{c(){B(t.$$.fragment)},m(e,r){J(t,e,r),n=!0},i(e){n||(U(t.$$.fragment,e),n=!0)},o(e){G(t.$$.fragment,e),n=!1},d(e){V(t,e)}}}function ze(e){let t,n;return t=new Ae({}),{c(){B(t.$$.fragment)},m(e,r){J(t,e,r),n=!0},i(e){n||(U(t.$$.fragment,e),n=!0)},o(e){G(t.$$.fragment,e),n=!1},d(e){V(t,e)}}}function De(e){let t,n;return t=new Pe({}),{c(){B(t.$$.fragment)},m(e,r){J(t,e,r),n=!0},i(e){n||(U(t.$$.fragment,e),n=!0)},o(e){G(t.$$.fragment,e),n=!1},d(e){V(t,e)}}}function He(e){let t,n,s,c;const o=[De,ze,Re,Me],i=[];function a(e,t){return e[0]?0:e[1]?1:e[2]?2:3}return t=a(e),n=i[t]=o[t](e),{c(){n.c(),s=b()},m(e,n){i[t].m(e,n),g(e,s,n),c=!0},p(e,[c]){let l=t;t=a(e),t!==l&&(H={r:0,c:[],p:H},G(i[l],1,1,(()=>{i[l]=null})),H.r||r(H.c),H=H.p,n=i[t],n||(n=i[t]=o[t](e),n.c()),U(n,1),n.m(s.parentNode,s))},i(e){c||(U(n),c=!0)},o(e){G(n),c=!1},d(e){i[t].d(e),e&&h(s)}}}function Ue(e,t,n){let r;i(e,ne,(e=>n(3,r=e)));let s=!1,c=!1,o=!1;return q((()=>{const e=window.localStorage;e&&e.getItem("state")&&Z.set(JSON.parse(e.getItem("state")))})),e.$$.update=()=>{8&e.$$.dirty&&n(0,s=r===te.ONGOING),8&e.$$.dirty&&n(1,c=r===te.FINISHED),8&e.$$.dirty&&n(2,o=r===te.ERROR)},[s,c,o,r]}return new class extends Q{constructor(e){super(),K(this,e,Ue,He,c,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
